(this.webpackJsonpBill1neUI=this.webpackJsonpBill1neUI||[]).push([[0],{109:function(e,t,a){e.exports=a(168)},12:function(e,t,a){"use strict";(function(e){a.d(t,"e",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o}));var n=function(t,a){e.localStorage.setItem(t,a)},r=function(t){return e.localStorage.getItem(t)},c=function(){e.localStorage.removeItem("t"),e.localStorage.removeItem("activeBranch")};function s(e){return(e<10?"0":"")+e}var i=function(e){return function(e){var t=new Date(e),a=t.getMonth()+1;return s(t.getDate())+"/"+s(a)+"/"+t.getFullYear()}(e)+" "+function(e){var t=new Date(e),a=t.getHours();return a<12?s(a)+":"+s(t.getMinutes())+" AM":s(a-=12)+":"+s(t.getMinutes())+" PM"}(e)},o=function(e,t,a,n){return e.employees&&e.employees[0]&&e.employees[0].employee_id===t&&e.employees[0].perm&&e.employees[0].perm[a][n]}}).call(this,a(69))},128:function(e,t,a){},129:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},152:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){e.exports=a.p+"static/media/icon.eee5af7e.png"},168:function(e,t,a){"use strict";a.r(t),a.d(t,"history",(function(){return Rr}));var n=a(6),r=a(7),c=a(9),s=a(8),i=a(1),o=a.n(i),l=a(29),d=a.n(l),u=a(17),m=a(21),p=a(24),h=a(99),v=a(36),b=a(107),g=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function f(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var E=a(4),y=a(11),O=a(3),C=a.n(O),k=a(14),N=a(12);function S(){return(S=Object(k.a)(C.a.mark((function e(t,a,n){var r,c,s,i,o,l,d,u,m,p,h,v,b,g,f,y,O,k;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.type,c=void 0===r?"GET":r,s=t.uri,i=t.fullUrl,o=void 0===i?"":i,l=t.obj,d=void 0===l?{}:l,u=t.headers,m=void 0===u?{}:u,p=c,h=o||"".concat("","/api/").concat(s),v=m,b=d.toJS?d.toJS():d,"del"===p&&(p="DELETE"),e.t0=p.toLowerCase(),e.next="head"===e.t0||"get"===e.t0?9:"post"===e.t0||"put"===e.t0||"patch"===e.t0||"delete"===e.t0?11:13;break;case 9:return b=void 0,e.abrupt("break",14);case 11:return b=JSON.stringify(b),e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:return p=p.toUpperCase(),v=Object(E.a)({Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+Object(N.c)("t")},v),e.next=18,fetch(h,{method:p,headers:v,body:b});case 18:return g=e.sent,e.next=21,g.json().catch((function(){return g.text()})).catch((function(){return null}));case 21:if(f=e.sent,y={},g.ok||a){e.next=31;break}throw(O=new Error("some error happened")).res=g,O.body=f,("Invalid token"===f.data||"jwt expired"===f.data)&&(window.location.href="/"),O;case 31:!g.ok&&a&&(y.body=f);case 32:if(!f||"error"!==f.status||a){e.next=38;break}throw(k=new Error(f.data)).res=g,k.body=f,("Invalid token"===f.data||"jwt expired"===f.data)&&(window.location.href="/"),k;case 38:return e.abrupt("return",a?n(y,{body:f}):{res:g,body:f.response});case 39:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e,t,a){return S.apply(this,arguments)},w=a(25),_=a(56),x=a(100),D=a(67),M=a.n(D),L=a(2),A=function(e){return e.appModuleReducer.get("postNewCustomerData")},I=function(e){return e.appModuleReducer.get("postNewBillData")},P=function(e){return e.appModuleReducer.get("postNewProductData")},T=function(e){return e.appModuleReducer.get("postNewServiceData")},U=function(e){return e.appModuleReducer.get("addNewStockToProductData")},B=function(e){return e.appModuleReducer.get("credsDetail")},V=function(e){return e.appModuleReducer.get("deleteACustomerData")},R=function(e){return e.appModuleReducer.get("putCustomerData")},F=function(e){return e.appModuleReducer.get("deleteABranchData")},z=function(e){return e.appModuleReducer.get("updateHistoryFn").toJS()},q=function(e){return e.appModuleReducer.get("takeSnapshotQuery")},J=C.a.mark(tt),G=C.a.mark(at),H=C.a.mark(nt),W=C.a.mark(rt),Q=C.a.mark(ct),K=C.a.mark(st),Y=C.a.mark(it),$=C.a.mark(ot),X=C.a.mark(lt),Z=C.a.mark(dt),ee=C.a.mark(ut),te=C.a.mark(mt),ae=C.a.mark(pt),ne=C.a.mark(ht),re=C.a.mark(vt),ce=C.a.mark(bt),se=C.a.mark(gt),ie=C.a.mark(ft),oe=C.a.mark(Et),le=C.a.mark(yt),de=C.a.mark(Ot),ue=C.a.mark(Ct),me=C.a.mark(kt),pe=C.a.mark(Nt),he=C.a.mark(St),ve=C.a.mark(jt),be=C.a.mark(wt),ge=C.a.mark(_t),fe=C.a.mark(xt),Ee=C.a.mark(Dt),ye=C.a.mark(Mt),Oe=C.a.mark(Lt),Ce=C.a.mark(At),ke=C.a.mark(It),Ne=C.a.mark(Pt),Se=C.a.mark(Tt),je=C.a.mark(Ut),we=C.a.mark(Bt),_e=C.a.mark(Vt),xe=C.a.mark(Rt),De=C.a.mark(Ft),Me=C.a.mark(zt),Le=C.a.mark(qt),Ae=C.a.mark(Jt),Ie=C.a.mark(Gt),Pe=C.a.mark(Ht),Te=C.a.mark(Wt),Ue="appModule/ONCLICK_LOGIN",Be="appModule/LOGIN_SUCCESS",Ve="appModule/ADD_NOTIFICATION",Re="appModule/SUCCESS",Fe="appModule/GET_ALL_CUSTOMER",ze="appModule/PUT_CUSTOMER",qe="appModule/POST_NEW_BILL",Je="appModule/POST_NEW_PRODUCT",Ge="appModule/POST_NEW_SERVICE",He="appModule/GET_ALL_PRODUCT",We="appModule/GET_BY_ID",Qe="appModule/GET_ALL_SERVICE",Ke="appModule/GET_ALL_BILLS",Ye="appModule/DELETE_BRANCH",$e="appModule/TAKE_SNAPSHOT",Xe="appModule/UPDATE_PRODUCT",Ze="appModule/UPDATE_SERVICE",et={updateUserAccessDetails:function(e){return{type:"appModule/UPDATE_USER_ACCESS_DETAILS",data:e}},onClickLogin:function(e){return{type:Ue,data:e}},loginSuccess:function(){return{type:"appModule/LOGIN_SUCCESS"}},loginFails:function(e){return{type:Be,data:e}},loginLoading:function(e){return{type:"appModule/LOGIN_LOADING",data:e}},success:function(e){return{type:Re,data:e}},failure:function(e){return{type:"appModule/FAILURE",data:e}},getAllCustomer:function(e){return{type:Fe,data:e}},getAllCustomerSuccess:function(e){return{type:"appModule/GET_ALL_CUSTOMER_SUCCESS",data:e}},getAllCustomerFails:function(e){return{type:"appModule/GET_ALL_CUSTOMER_FAILS",data:e}},postNewCustomer:function(e){return{type:"appModule/POST_NEW_CUSTOMER",data:e}},postNewCustomerSuccess:function(e){return{type:"appModule/POST_NEW_CUSTOMER_SUCCESS",data:e}},postNewCustomerFails:function(e){return{type:"appModule/POST_NEW_CUSTOMER_FAILS",data:e}},putCustomer:function(e){return{type:ze,data:e}},deleteACustomer:function(e){return{type:"appModule/DELETE_A_CUSTOMER",data:e}},deleteACustomerSuccess:function(e){return{type:"appModule/DELETE_A_CUSTOMER_SUCCESS",data:e}},deleteACustomerFails:function(e){return{type:"appModule/DELETE_A_CUSTOMER_FAILS",data:e}},postNewService:function(e){return{type:Ge,data:e}},postNewServiceSuccess:function(e){return{type:"appModule/POST_NEW_SERVICE_SUCCESS",data:e}},postNewServiceFails:function(e){return{type:"appModule/POST_NEW_SERVICE_FAILS",data:e}},updateService:function(e){return{type:Ze,data:e}},getAllStock:function(e){return{type:"appModule/GET_ALL_STOCK",data:e}},getAllStockSuccess:function(e){return{type:"appModule/GET_ALL_STOCK_SUCCESS",data:e}},getAllStockFails:function(e){return{type:"appModule/GET_ALL_STOCK_FAILS",data:e}},postNewProduct:function(e){return{type:Je,data:e}},postNewProductSuccess:function(e){return{type:"appModule/POST_NEW_PRODUCT_SUCCESS",data:e}},postNewProductFails:function(e){return{type:"appModule/POST_NEW_PRODUCT_FAILS",data:e}},updateProduct:function(e){return{type:Xe,data:e}},getAllProduct:function(e){return{type:He,data:e}},getById:function(e){return{type:We,data:e}},getAllProductSuccess:function(e){return{type:"appModule/GET_ALL_PRODUCT_SUCCESS",data:e}},getAllProductFails:function(e){return{type:"appModule/GET_ALL_PRODUCT_FAILS",data:e}},getAllService:function(e){return{type:Qe,data:e}},getAllServiceSuccess:function(e){return{type:"appModule/GET_ALL_SERVICE_SUCCESS",data:e}},getAllServiceFails:function(e){return{type:"appModule/GET_ALL_SERVICE_FAILS",data:e}},addStockToProduct:function(e){return{type:"appModule/ADD_STOCK_TO_PRODUCT",data:e}},addStockToProductSuccess:function(e){return{type:"appModule/ADD_STOCK_TO_PRODUCT_SUCCESS",data:e}},addStockToProductFails:function(e){return{type:"appModule/ADD_STOCK_TO_PRODUCT_FAILS",data:e}},postNewBill:function(e){return{type:qe,data:e}},postNewBillSuccess:function(e){return{type:"appModule/POST_NEW_BILL_SUCCESS",data:e}},postNewBillFails:function(e){return{type:"appModule/POST_NEW_BILL_FAILS",data:e}},getAllBills:function(e){return{type:Ke,data:e}},getAllBillsSuccess:function(e){return{type:"appModule/GET_ALL_BILLS_SUCCESS",data:e}},getAllBillsFails:function(e){return{type:"appModule/GET_ALL_BILLS_FAILS",data:e}},getAllBranch:function(e){return{type:"appModule/GET_ALL_BRANCH",data:e}},getAllBranchSuccess:function(e){return{type:"appModule/GET_ALL_BRANCH_SUCCESS",data:e}},getAllBranchFails:function(e){return{type:"appModule/GET_ALL_BRANCH_FAILS",data:e}},getAllEmployees:function(e){return{type:"appModule/GET_ALL_EMPLOYEES",data:e}},getAllEmployeesSuccess:function(e){return{type:"appModule/GET_ALL_EMPLOYEES_SUCCESS",data:e}},getAllEmployeesFails:function(e){return{type:"appModule/GET_ALL_EMPLOYEES_FAILS",data:e}},editBranch:function(e){return{type:"appModule/EDIT_BRANCH",data:e}},deleteBranch:function(e){return{type:Ye,data:e}},deleteBranchSuccess:function(e){return{type:"appModule/DELETE_BRANCH_SUCCESS",data:e}},deleteBranchFails:function(e){return{type:"appModule/DELETE_BRANCH_FAILS",data:e}},updateHistoryFun:function(e){return{type:"appModule/UPDATE_HISTORY_FN",data:e}},getAllActivities:function(e){return{type:"appModule/GET_ALL_ACTIVITIES",data:e}},checkAuth:function(e){return{type:"appModule/CHECK_AUTH"}},addNotification:function(e){return{type:Ve,data:e}},takeSnapshot:function(e){return{type:$e,data:e}},setCurrentBranch:function(e){return{type:"appModule/SET_CURRENT_BRANCH",data:e}},getStats:function(e){return{type:"appModule/GET_STATS",data:e}},modalToggle:function(e){return{type:"appModule/MODAL_TOGGLE",data:e}},loadingToogle:function(e){return{type:"appModule/LOADING_TOOGLE",data:e}},commonErrorMsg:function(e){return{type:"appModule/COMMON_ERROR_MESSAGE",data:e}},firstTimeBoot:function(e){return{type:"appModule/FIRST_TIME_BOOT",data:e}}};function tt(){var e,t,a;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(L.d)(et.loginLoading(!0));case 2:return n.next=4,Object(L.d)(et.loginFails(""));case 4:return n.next=6,Object(L.e)(B);case 6:return e=n.sent,n.prev=7,n.next=10,Object(L.b)(j,{type:"post",uri:"auth/login",obj:{username:e.get("username"),password:e.get("password")}});case 10:return t=n.sent,a=t.body,Object(N.e)("t",a.token),n.next=15,Object(L.d)(et.loginSuccess(a));case 15:return n.next=17,Object(L.d)(et.loginLoading(!1));case 17:window.location.href="/",n.next=26;break;case 20:return n.prev=20,n.t0=n.catch(7),n.next=24,Object(L.d)(et.loginFails(n.t0.body.data));case 24:return n.next=26,Object(L.d)(et.loginLoading(!1));case 26:case"end":return n.stop()}}),J,null,[[7,20]])}function at(){var e,t,a;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(L.d)(et.loadingToogle({key:"getAllCustomerLoading",value:!0}));case 2:return n.next=4,Object(L.e)((function(e){return e.appModuleReducer.get("customerQueryPage")}));case 4:return e=n.sent,n.prev=5,n.next=8,Object(L.b)(j,{type:"get",uri:"customers?page="+e});case 8:return t=n.sent,a=t.body,n.next=12,Object(L.d)(et.getAllCustomerSuccess(a));case 12:return n.next=14,Object(L.d)(et.loadingToogle({key:"getAllCustomerLoading",value:!1}));case 14:n.next=24;break;case 16:return n.prev=16,n.t0=n.catch(5),n.next=20,Object(L.d)(et.addNotification({message:n.t0.body.data,level:"error"}));case 20:return n.next=22,Object(L.d)(et.getAllCustomerFails(n.t0.body.data));case 22:return n.next=24,Object(L.d)(et.loadingToogle({key:"getAllCustomerLoading",value:!1}));case 24:case"end":return n.stop()}}),G,null,[[5,16]])}function nt(){var e,t,a,n,r;return C.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(L.d)(et.loadingToogle({key:"postNewCustomerLoading",value:!0}));case 2:return c.next=4,Object(L.e)(A);case 4:return e=c.sent,c.next=7,Object(L.e)(z);case 7:return t=c.sent,c.prev=8,a={type:"post",uri:"customer",obj:Object(E.a)({},e.toJS())},c.next=12,Object(L.b)(j,a);case 12:return n=c.sent,r=n.body,c.next=16,Object(L.d)(et.postNewCustomerSuccess(r));case 16:return c.next=18,Object(L.d)(et.getAllCustomer());case 18:if(!r.message||!r._id){c.next=21;break}return c.next=21,Object(L.d)(et.addNotification({message:"Customer ".concat(e.get("name")," - ").concat(r._id," created successfully."),level:"success"}));case 21:return c.next=23,Object(L.d)(et.loadingToogle({key:"postNewCustomerLoading",value:!1}));case 23:t.push("/customers"),c.next=34;break;case 26:return c.prev=26,c.t0=c.catch(8),c.next=30,Object(L.d)(et.addNotification({message:c.t0.body.data,level:"error"}));case 30:return c.next=32,Object(L.d)(et.postNewCustomerFails(c.t0.body.data));case 32:return c.next=34,Object(L.d)(et.loadingToogle({key:"postNewCustomerLoading",value:!1}));case 34:case"end":return c.stop()}}),H,null,[[8,26]])}function rt(){var e,t,a,n,r,c,s,i;return C.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(L.d)(et.loadingToogle({key:"putCustomerLoading",value:!0}));case 2:return o.next=4,Object(L.e)(R);case 4:return e=o.sent,o.next=7,Object(L.e)(z);case 7:return o.sent,o.prev=8,o.next=11,Object(L.e)((function(e){return e.appModuleReducer.get("detailData")}));case 11:return t=o.sent,o.next=14,Object(L.e)((function(e){return e.appModuleReducer.get("currentBranch").toJS()}));case 14:return a=o.sent,n=t.get("queryId"),r=t.get("type"),c={type:"put",uri:"customer/".concat(a._id,"/").concat(e.get("mobileNo")),obj:Object(E.a)({},e.toJS())},o.next=20,Object(L.b)(j,c);case 20:return s=o.sent,i=s.body,o.next=24,Object(L.d)(et.success());case 24:return o.next=26,Object(L.d)(et.getById({type:r,id:n}));case 26:if(!i.message||!i._id){o.next=29;break}return o.next=29,Object(L.d)(et.addNotification({message:"Customer ".concat(e.get("name")," - ").concat(e.get("mobileNo")," updated successfully."),level:"success"}));case 29:return o.next=31,Object(L.d)(et.loadingToogle({key:"putCustomerLoading",value:!1}));case 31:o.next=41;break;case 33:return o.prev=33,o.t0=o.catch(8),o.next=37,Object(L.d)(et.addNotification({message:o.t0.body.data,level:"error"}));case 37:return o.next=39,Object(L.d)(et.failure(o.t0.body.data));case 39:return o.next=41,Object(L.d)(et.loadingToogle({key:"putCustomerLoading",value:!1}));case 41:case"end":return o.stop()}}),W,null,[[8,33]])}function ct(){var e,t,a,n;return C.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(L.d)(et.loadingToogle({key:"deleteACustomerLoading",value:!0}));case 2:return r.next=4,Object(L.e)(V);case 4:return e=r.sent,r.next=7,Object(L.e)(z);case 7:return t=r.sent,r.prev=8,r.next=11,Object(L.b)(j,{type:"delete",uri:"customer/"+e.get("mobile_number")});case 11:return a=r.sent,n=a.body,t.push("/customers"),r.next=16,Object(L.d)(et.getAllCustomer());case 16:if(!n.message||!n._id){r.next=19;break}return r.next=19,Object(L.d)(et.addNotification({message:"Customer ".concat(e.get("full_name")," - ").concat(e.get("_id")," deleted successfully."),level:"success"}));case 19:return r.next=21,Object(L.d)(et.loadingToogle({key:"deleteACustomerLoading",value:!1}));case 21:r.next=31;break;case 23:return r.prev=23,r.t0=r.catch(8),r.next=27,Object(L.d)(et.addNotification({message:r.t0.body.data,level:"error"}));case 27:return r.next=29,Object(L.d)(et.deleteACustomerFails(r.t0.body.data));case 29:return r.next=31,Object(L.d)(et.loadingToogle({key:"deleteACustomerLoading",value:!1}));case 31:case"end":return r.stop()}}),Q,null,[[8,23]])}function st(){var e,t,a,n;return C.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(L.d)(et.loadingToogle({key:"getProductLoading",value:!0}));case 2:return r.prev=2,r.next=5,Object(L.e)((function(e){return e.appModuleReducer.get("productQueryPage")}));case 5:return e=r.sent,r.next=8,Object(L.e)((function(e){return e.appModuleReducer.get("currentBranch").toJS()}));case 8:return t=r.sent,r.next=11,Object(L.b)(j,{type:"get",uri:"products/".concat(t._id,"/?page=").concat(e)});case 11:return a=r.sent,n=a.body,r.next=15,Object(L.d)(et.getAllProductSuccess(n));case 15:return r.next=17,Object(L.d)(et.loadingToogle({key:"getProductLoading",value:!1}));case 17:r.next=27;break;case 19:return r.prev=19,r.t0=r.catch(2),r.next=23,Object(L.d)(et.addNotification({message:r.t0.body.data,level:"error"}));case 23:return r.next=25,Object(L.d)(et.failure(r.t0.body.data));case 25:return r.next=27,Object(L.d)(et.loadingToogle({key:"getProductLoading",value:!1}));case 27:case"end":return r.stop()}}),K,null,[[2,19]])}function it(){var e,t,a,n,r,c,s,i;return C.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(L.d)(et.loadingToogle({key:"getByIdLoading",value:!0}));case 2:return o.prev=2,o.next=5,Object(L.e)((function(e){return e.appModuleReducer.get("detailData")}));case 5:return e=o.sent,o.next=8,Object(L.e)((function(e){return e.appModuleReducer.get("currentBranch").toJS()}));case 8:t=o.sent,a=e.get("queryId"),n=e.get("type"),r="".concat(n,"/").concat(a),o.t0=n,o.next="product"===o.t0||"service"===o.t0||"invoice"===o.t0?15:"branch"===o.t0?17:19;break;case 15:return r="".concat(n,"/").concat(t._id,"/").concat(a),o.abrupt("break",20);case 17:return r="".concat(n,"/").concat(t._id,"/"),o.abrupt("break",20);case 19:return o.abrupt("break",20);case 20:return o.next=22,Object(L.b)(j,{type:"get",uri:r});case 22:c=o.sent,s=c.body,i={},o.t1=n,o.next="product"===o.t1?28:"service"===o.t1?30:"invoice"===o.t1?32:"customer"===o.t1?34:"branch"===o.t1?36:38;break;case 28:return i={detailData:{detail:s.product,invoicesAdded:s.invoicesAdded,servicesUsed:s.servicesUsed,queryId:a,type:n}},o.abrupt("break",39);case 30:return i={detailData:{detail:s.service,invoicesAdded:s.invoicesAdded,queryId:a,type:n}},o.abrupt("break",39);case 32:return i={detailData:{detail:s.invoice,queryId:a,type:n}},o.abrupt("break",39);case 34:return i={detailData:{detail:s.customer,invoicesAdded:s.invoicesAdded,queryId:a,type:n}},o.abrupt("break",39);case 36:return i={detailData:{detail:s.branch,type:n}},o.abrupt("break",39);case 38:return o.abrupt("break",39);case 39:return o.next=41,Object(L.d)(et.success(i));case 41:return o.next=43,Object(L.d)(et.loadingToogle({key:"getByIdLoading",value:!1}));case 43:o.next=53;break;case 45:return o.prev=45,o.t2=o.catch(2),o.next=49,Object(L.d)(et.addNotification({message:o.t2.body.data,level:"error"}));case 49:return o.next=51,Object(L.d)(et.failure(o.t2.body.data));case 51:return o.next=53,Object(L.d)(et.loadingToogle({key:"getByIdLoading",value:!1}));case 53:case"end":return o.stop()}}),Y,null,[[2,45]])}function ot(){var e,t,a,n;return C.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(L.d)(et.loadingToogle({key:"postNewProductLoading",value:!0}));case 2:return r.next=4,Object(L.e)(P);case 4:return e=r.sent,r.next=7,Object(L.e)((function(e){return e.appModuleReducer.get("currentBranch").toJS()}));case 7:return t=r.sent,r.prev=8,r.next=11,Object(L.b)(j,{type:"post",uri:"product/".concat(t._id),obj:Object(E.a)({},e.toJS())});case 11:return a=r.sent,n=a.body,r.next=15,Object(L.d)(et.modalToggle({modal:Kt,view:!1}));case 15:return r.next=17,Object(L.d)(et.success(n));case 17:return r.next=19,Object(L.d)(et.getAllProduct());case 19:if(!n.message||!n._id){r.next=22;break}return r.next=22,Object(L.d)(et.addNotification({message:"Product ".concat(n._id," added successfully."),level:"success"}));case 22:return r.next=24,Object(L.d)(et.loadingToogle({key:"postNewProductLoading",value:!1}));case 24:r.next=34;break;case 26:return r.prev=26,r.t0=r.catch(8),r.next=30,Object(L.d)(et.addNotification({message:r.t0.body.data,level:"error"}));case 30:return r.next=32,Object(L.d)(et.failure(r.t0.body.data));case 32:return r.next=34,Object(L.d)(et.loadingToogle({key:"postNewProductLoading",value:!1}));case 34:case"end":return r.stop()}}),$,null,[[8,26]])}function lt(){var e,t,a,n,r,c,s;return C.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(L.d)(et.loadingToogle({key:"postNewProductLoading",value:!0}));case 2:return i.next=4,Object(L.e)(P);case 4:return e=i.sent,i.prev=5,i.next=8,Object(L.e)((function(e){return e.appModuleReducer.get("detailData")}));case 8:return t=i.sent,i.next=11,Object(L.e)((function(e){return e.appModuleReducer.get("currentBranch").toJS()}));case 11:return a=i.sent,n=t.get("queryId"),r=t.get("type"),i.next=16,Object(L.b)(j,{type:"put",uri:"product/".concat(a._id,"/").concat(e.get("_id")),obj:Object(E.a)({},e.toJS())});case 16:return c=i.sent,s=c.body,i.next=20,Object(L.d)(et.modalToggle({modal:$t,view:!1}));case 20:return i.next=22,Object(L.d)(et.success(s));case 22:return i.next=24,Object(L.d)(et.getById({type:r,id:n}));case 24:if(!s.message||!s._id){i.next=27;break}return i.next=27,Object(L.d)(et.addNotification({message:s.message,level:"success"}));case 27:return i.next=29,Object(L.d)(et.loadingToogle({key:"postNewProductLoading",value:!1}));case 29:i.next=39;break;case 31:return i.prev=31,i.t0=i.catch(5),i.next=35,Object(L.d)(et.addNotification({message:i.t0.body.data,level:"error"}));case 35:return i.next=37,Object(L.d)(et.failure(i.t0.body.data));case 37:return i.next=39,Object(L.d)(et.loadingToogle({key:"postNewProductLoading",value:!1}));case 39:case"end":return i.stop()}}),X,null,[[5,31]])}function dt(){var e,t,a;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(L.d)(et.loadingToogle({key:"getStockLoading",value:!0}));case 2:return n.prev=2,n.next=5,Object(L.e)((function(e){return e.appModuleReducer.get("currentBranch").toJS()}));case 5:return e=n.sent,n.next=8,Object(L.b)(j,{type:"get",uri:"stock/".concat(e._id)});case 8:return t=n.sent,a=t.body,n.next=12,Object(L.d)(et.getAllStockSuccess(a));case 12:return n.next=14,Object(L.d)(et.loadingToogle({key:"getStockLoading",value:!1}));case 14:n.next=24;break;case 16:return n.prev=16,n.t0=n.catch(2),n.next=20,Object(L.d)(et.addNotification({message:n.t0.body.data,level:"error"}));case 20:return n.next=22,Object(L.d)(et.getAllStockFails(n.t0.body.data));case 22:return n.next=24,Object(L.d)(et.loadingToogle({key:"getStockLoading",value:!1}));case 24:case"end":return n.stop()}}),Z,null,[[2,16]])}function ut(){var e,t,a,n;return C.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(L.d)(et.loadingToogle({key:"getServiceLoading",value:!0}));case 2:return r.prev=2,r.next=5,Object(L.e)((function(e){return e.appModuleReducer.get("serviceQueryPage")}));case 5:return e=r.sent,r.next=8,Object(L.e)((function(e){return e.appModuleReducer.get("currentBranch").toJS()}));case 8:return t=r.sent,r.next=11,Object(L.b)(j,{type:"get",uri:"services/".concat(t._id,"?page=").concat(e)});case 11:return a=r.sent,n=a.body,r.next=15,Object(L.d)(et.getAllServiceSuccess(n));case 15:return r.next=17,Object(L.d)(et.loadingToogle({key:"getServiceLoading",value:!1}));case 17:r.next=27;break;case 19:return r.prev=19,r.t0=r.catch(2),r.next=23,Object(L.d)(et.addNotification({message:r.t0.body.data,level:"error"}));case 23:return r.next=25,Object(L.d)(et.getAllServiceFails(r.t0.body.data));case 25:return r.next=27,Object(L.d)(et.loadingToogle({key:"getServiceLoading",value:!1}));case 27:case"end":return r.stop()}}),ee,null,[[2,19]])}function mt(){var e,t,a,n,r,c,s;return C.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(L.d)(et.loadingToogle({key:"addStockToProductLoading",value:!0}));case 2:return i.next=4,Object(L.e)(U);case 4:return e=i.sent,i.prev=5,i.next=8,Object(L.e)((function(e){return e.appModuleReducer.get("detailData")}));case 8:return t=i.sent,i.next=11,Object(L.e)((function(e){return e.appModuleReducer.get("currentBranch").toJS()}));case 11:return a=i.sent,n=t.get("queryId"),r=t.get("type"),i.next=16,Object(L.b)(j,{type:"post",uri:"stock/".concat(a._id),obj:Object(E.a)({},e.toJS())});case 16:return c=i.sent,s=c.body,i.next=20,Object(L.d)(et.addStockToProductSuccess(s));case 20:return i.next=22,Object(L.d)(et.getById({type:r,id:n}));case 22:if(!s.message||!s._id){i.next=25;break}return i.next=25,Object(L.d)(et.addNotification({message:"Stock ".concat(s._id," added successfully."),level:"success"}));case 25:return i.next=27,Object(L.d)(et.loadingToogle({key:"addStockToProductLoading",value:!1}));case 27:i.next=37;break;case 29:return i.prev=29,i.t0=i.catch(5),i.next=33,Object(L.d)(et.addNotification({message:i.t0.body.data,level:"error"}));case 33:return i.next=35,Object(L.d)(et.addStockToProductFails(i.t0.body.data));case 35:return i.next=37,Object(L.d)(et.loadingToogle({key:"addStockToProductLoading",value:!1}));case 37:case"end":return i.stop()}}),te,null,[[5,29]])}function pt(){var e,t,a,n;return C.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(L.d)(et.loadingToogle({key:"postNewProductLoading",value:!0}));case 2:return r.next=4,Object(L.e)(T);case 4:return e=r.sent,r.prev=5,r.next=8,Object(L.e)((function(e){return e.appModuleReducer.get("currentBranch").toJS()}));case 8:return t=r.sent,r.next=11,Object(L.b)(j,{type:"post",uri:"service/".concat(t._id),obj:Object(E.a)({},e.toJS())});case 11:return a=r.sent,n=a.body,r.next=15,Object(L.d)(et.modalToggle({modal:Yt,view:!1}));case 15:return r.next=17,Object(L.d)(et.postNewServiceSuccess(n));case 17:return r.next=19,Object(L.d)(et.getAllService());case 19:if(!n.message||!n._id){r.next=22;break}return r.next=22,Object(L.d)(et.addNotification({message:"Service ".concat(n._id," created successfully."),level:"success"}));case 22:return r.next=24,Object(L.d)(et.loadingToogle({key:"postNewProductLoading",value:!1}));case 24:return r.next=26,Object(L.d)(et.modalToggle({key:"newProductModal",value:!1}));case 26:r.next=36;break;case 28:return r.prev=28,r.t0=r.catch(5),r.next=32,Object(L.d)(et.addNotification({message:r.t0.body.data,level:"error"}));case 32:return r.next=34,Object(L.d)(et.postNewServiceFails(r.t0.body.data));case 34:return r.next=36,Object(L.d)(et.loadingToogle({key:"postNewProductLoading",value:!1}));case 36:case"end":return r.stop()}}),ae,null,[[5,28]])}function ht(){var e,t,a,n,r,c,s;return C.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(L.d)(et.loadingToogle({key:"updateServiceLoading",value:!0}));case 2:return i.next=4,Object(L.e)(T);case 4:return e=i.sent,i.prev=5,i.next=8,Object(L.e)((function(e){return e.appModuleReducer.get("detailData")}));case 8:return t=i.sent,i.next=11,Object(L.e)((function(e){return e.appModuleReducer.get("currentBranch").toJS()}));case 11:return a=i.sent,n=t.get("queryId"),r=t.get("type"),i.next=16,Object(L.b)(j,{type:"put",uri:"service/".concat(a._id,"/").concat(e.get("_id")),obj:Object(E.a)({},e.toJS())});case 16:return c=i.sent,s=c.body,i.next=20,Object(L.d)(et.modalToggle({modal:Xt,view:!1}));case 20:return i.next=22,Object(L.d)(et.success(s));case 22:return i.next=24,Object(L.d)(et.getById({type:r,id:n}));case 24:if(!s.message||!s._id){i.next=27;break}return i.next=27,Object(L.d)(et.addNotification({message:"Service ".concat(s._id," updated successfully."),level:"success"}));case 27:return i.next=29,Object(L.d)(et.loadingToogle({key:"updateServiceLoading",value:!1}));case 29:i.next=39;break;case 31:return i.prev=31,i.t0=i.catch(5),i.next=35,Object(L.d)(et.addNotification({message:i.t0.body.data,level:"error"}));case 35:return i.next=37,Object(L.d)(et.failure(i.t0.body.data));case 37:return i.next=39,Object(L.d)(et.loadingToogle({key:"updateServiceLoading",value:!1}));case 39:case"end":return i.stop()}}),ne,null,[[5,31]])}function vt(){var e,t,a,n,r;return C.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(L.d)(et.loadingToogle({key:"postNewBillLoading",value:!0}));case 2:return c.next=4,Object(L.e)(I);case 4:return e=c.sent,c.next=7,Object(L.e)(z);case 7:return t=c.sent,c.prev=8,c.next=11,Object(L.e)((function(e){return e.appModuleReducer.get("currentBranch").toJS()}));case 11:return a=c.sent,c.next=14,Object(L.b)(j,{type:"post",uri:"invoice/".concat(a._id),obj:Object(E.a)({},e.toJS())});case 14:if(n=c.sent,r=n.body,t.goBack(),!r.message||!r._id){c.next=20;break}return c.next=20,Object(L.d)(et.addNotification({message:"Invoice ".concat(r._id," created successfully."),level:"success"}));case 20:return c.next=22,Object(L.d)(et.loadingToogle({key:"postNewBillLoading",value:!1}));case 22:return c.next=24,Object(L.d)(et.modalToggle({key:"newBillModal",value:!1}));case 24:c.next=34;break;case 26:return c.prev=26,c.t0=c.catch(8),c.next=30,Object(L.d)(et.addNotification({message:c.t0.body.data,level:"error"}));case 30:return c.next=32,Object(L.d)(et.postNewBillFails(c.t0));case 32:return c.next=34,Object(L.d)(et.loadingToogle({key:"postNewBillLoading",value:!1}));case 34:case"end":return c.stop()}}),re,null,[[8,26]])}function bt(){var e,t,a,n;return C.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(L.d)(et.loadingToogle({key:"getBillLoading",value:!0}));case 2:return r.prev=2,r.next=5,Object(L.e)((function(e){return e.appModuleReducer.get("billQueryPage")}));case 5:return e=r.sent,r.next=8,Object(L.e)((function(e){return e.appModuleReducer.get("currentBranch").toJS()}));case 8:return t=r.sent,r.next=11,Object(L.b)(j,{type:"get",uri:"invoices/".concat(t._id,"?page=").concat(e)});case 11:return a=r.sent,n=a.body,r.next=15,Object(L.d)(et.getAllBillsSuccess(n));case 15:return r.next=17,Object(L.d)(et.loadingToogle({key:"getBillLoading",value:!1}));case 17:r.next=27;break;case 19:return r.prev=19,r.t0=r.catch(2),r.next=23,Object(L.d)(et.addNotification({message:r.t0.body.data,level:"error"}));case 23:return r.next=25,Object(L.d)(et.getAllBillsFails(r.t0.body.data));case 25:return r.next=27,Object(L.d)(et.loadingToogle({key:"getBillLoading",value:!1}));case 27:case"end":return r.stop()}}),ce,null,[[2,19]])}function gt(){var e,t;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(L.d)(et.loadingToogle({key:"getAllBranchLoading",value:!0}));case 2:return a.prev=2,a.next=5,Object(L.b)(j,{type:"get",uri:"branches"});case 5:return e=a.sent,t=e.body,a.next=9,Object(L.d)(et.getAllBranchSuccess(t));case 9:return a.next=11,Object(L.d)(et.loadingToogle({key:"getAllBranchLoading",value:!1}));case 11:a.next=21;break;case 13:return a.prev=13,a.t0=a.catch(2),a.next=17,Object(L.d)(et.addNotification({message:a.t0.body.data,level:"error"}));case 17:return a.next=19,Object(L.d)(et.getAllBranchFails(a.t0.body.data));case 19:return a.next=21,Object(L.d)(et.loadingToogle({key:"getAllBranchLoading",value:!1}));case 21:case"end":return a.stop()}}),se,null,[[2,13]])}function ft(){var e,t;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(L.d)(et.loadingToogle({key:"getAllEmployeesLoading",value:!0}));case 2:return a.prev=2,a.next=5,Object(L.b)(j,{type:"get",uri:"user/employees"});case 5:return e=a.sent,t=e.body,a.next=9,Object(L.d)(et.getAllEmployeesSuccess(t));case 9:return a.next=11,Object(L.d)(et.loadingToogle({key:"getAllEmployeesLoading",value:!1}));case 11:a.next=21;break;case 13:return a.prev=13,a.t0=a.catch(2),a.next=17,Object(L.d)(et.addNotification({message:a.t0.body.data,level:"error"}));case 17:return a.next=19,Object(L.d)(et.getAllEmployeesFails(a.t0.body.data));case 19:return a.next=21,Object(L.d)(et.loadingToogle({key:"getAllEmployeesLoading",value:!1}));case 21:case"end":return a.stop()}}),ie,null,[[2,13]])}function Et(){var e,t;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(L.d)(et.loadingToogle({key:"deleteABranchLoading",value:!0}));case 2:return a.next=4,Object(L.e)(F);case 4:return e=a.sent,a.prev=5,a.next=8,Object(L.b)(j,{type:"delete",uri:"branch/"+e.get("_id")});case 8:return t=a.sent,t.body,a.next=12,Object(L.d)(et.getAllBranch());case 12:return a.next=14,Object(L.d)(et.addNotification({message:"".concat(e.get("name")," - ").concat(e.get("_id")," deleted successfully."),level:"success"}));case 14:return a.next=16,Object(L.d)(et.loadingToogle({key:"deleteABranchLoading",value:!1}));case 16:a.next=28;break;case 18:return a.prev=18,a.t0=a.catch(5),a.next=22,Object(L.d)(et.addNotification({message:a.t0.body.data,level:"error"}));case 22:return a.next=24,Object(L.d)(et.addNotification({message:a.t0.body.data,level:"error"}));case 24:return a.next=26,Object(L.d)(et.deleteBranchFails(a.t0.body.data));case 26:return a.next=28,Object(L.d)(et.loadingToogle({key:"deleteABranchLoading",value:!1}));case 28:case"end":return a.stop()}}),oe,null,[[5,18]])}function yt(){var e,t;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(L.d)(et.loadingToogle({key:"getAllActivitiesLoading",value:!0}));case 2:return a.prev=2,a.next=5,Object(L.b)(j,{type:"get",uri:"activity"});case 5:return e=a.sent,t=e.body,a.next=9,Object(L.d)(et.success({allActivitiesData:t.activities}));case 9:return a.next=11,Object(L.d)(et.loadingToogle({key:"getAllActivitiesLoading",value:!1}));case 11:a.next=21;break;case 13:return a.prev=13,a.t0=a.catch(2),a.next=17,Object(L.d)(et.addNotification({message:a.t0.body.data,level:"error"}));case 17:return a.next=19,Object(L.d)(et.failure(a.t0.body.data));case 19:return a.next=21,Object(L.d)(et.loadingToogle({key:"getAllActivitiesLoading",value:!1}));case 21:case"end":return a.stop()}}),le,null,[[2,13]])}function Ot(){var e,t;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(L.b)(j,{type:"get",uri:"auth/verify"});case 3:return e=a.sent,t=e.body,a.next=7,Object(L.d)(et.updateUserAccessDetails(t));case 7:console.log("user logged in"),a.next=24;break;case 10:return a.prev=10,a.t0=a.catch(0),a.next=14,Object(L.d)(et.addNotification({message:"user logged out",level:"error"}));case 14:return console.log("user logged out"),a.prev=15,a.next=18,Object(L.e)(z);case 18:a.sent.push("/auth"),a.next=24;break;case 22:a.prev=22,a.t1=a.catch(15);case 24:case"end":return a.stop()}}),de,null,[[0,10],[15,22]])}function Ct(){var e,t,a,n,r,c,s,i,o,l,d;return C.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(L.d)(et.loadingToogle({key:"takeSnapshotLoading",value:!0}));case 2:return u.prev=2,u.next=5,Object(L.e)(q);case 5:return e=u.sent,t="","today"===e?((a=new Date).setHours(0,0,0,0),(n=new Date).setHours(23,59,59,999),t="start=".concat(a.toISOString(),"&end=").concat(n.toISOString())):"week"===e?(r=M()().subtract(7,"days").toDate(),(c=new Date).setHours(23,59,59,999),t="start=".concat(r,"&end=").concat(c)):"month"===e?(s=M()().subtract(30,"days").toDate(),(i=new Date).setHours(23,59,59,999),t="start=".concat(s.toISOString(),"&end=").concat(i.toISOString())):"year"===e&&(o=M()().subtract(365,"days").toDate(),(l=new Date).setHours(23,59,59,999),t="start=".concat(o.toISOString(),"&end=").concat(l.toISOString())),u.next=10,Object(L.b)(j,{type:"get",uri:"snapshot?"+t});case 10:return d=u.sent,d.body,u.next=14,Object(L.d)(et.addNotification({message:"Today's snapshot has been sent to your email successfully.",level:"success"}));case 14:return u.next=16,Object(L.d)(et.loadingToogle({key:"takeSnapshotLoading",value:!1}));case 16:u.next=24;break;case 18:return u.prev=18,u.t0=u.catch(2),u.next=22,Object(L.d)(et.addNotification({message:u.t0.body.data,level:"error"}));case 22:return u.next=24,Object(L.d)(et.loadingToogle({key:"takeSnapshotLoading",value:!1}));case 24:case"end":return u.stop()}}),ue,null,[[2,18]])}function kt(){var e,t;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(L.d)(et.loadingToogle({key:"getStatsLoading",value:!0}));case 2:return a.prev=2,a.next=5,Object(L.b)(j,{type:"get",uri:"stats/today"});case 5:return e=a.sent,t=e.body,a.next=9,Object(L.d)(et.success({stats:t.stats}));case 9:return a.next=11,Object(L.d)(et.loadingToogle({key:"getStatsLoading",value:!1}));case 11:a.next=21;break;case 13:return a.prev=13,a.t0=a.catch(2),a.next=17,Object(L.d)(et.addNotification({message:a.t0.body.data,level:"error"}));case 17:return a.next=19,Object(L.d)(et.failure(a.t0.body.data));case 19:return a.next=21,Object(L.d)(et.loadingToogle({key:"getStatsLoading",value:!1}));case 21:case"end":return a.stop()}}),me,null,[[2,13]])}function Nt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)(Ue,tt);case 2:case"end":return e.stop()}}),pe)}function St(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)(Fe,at);case 2:case"end":return e.stop()}}),he)}function jt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)("appModule/POST_NEW_CUSTOMER",nt);case 2:case"end":return e.stop()}}),ve)}function wt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)(ze,rt);case 2:case"end":return e.stop()}}),be)}function _t(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)("appModule/DELETE_A_CUSTOMER",ct);case 2:case"end":return e.stop()}}),ge)}function xt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)(Je,ot);case 2:case"end":return e.stop()}}),fe)}function Dt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)(Xe,lt);case 2:case"end":return e.stop()}}),Ee)}function Mt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)(He,st);case 2:case"end":return e.stop()}}),ye)}function Lt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.f)(We,it);case 2:case"end":return e.stop()}}),Oe)}function At(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)("appModule/ADD_STOCK_TO_PRODUCT",mt);case 2:case"end":return e.stop()}}),Ce)}function It(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)(Ge,pt);case 2:case"end":return e.stop()}}),ke)}function Pt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)(Ze,ht);case 2:case"end":return e.stop()}}),Ne)}function Tt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)(Qe,ut);case 2:case"end":return e.stop()}}),Se)}function Ut(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)(qe,vt);case 2:case"end":return e.stop()}}),je)}function Bt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)("appModule/GET_ALL_STOCK",dt);case 2:case"end":return e.stop()}}),we)}function Vt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)(Ke,bt);case 2:case"end":return e.stop()}}),_e)}function Rt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)("appModule/GET_ALL_BRANCH",gt);case 2:case"end":return e.stop()}}),xe)}function Ft(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)("appModule/GET_ALL_EMPLOYEES",ft);case 2:case"end":return e.stop()}}),De)}function zt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)(Ye,Et);case 2:case"end":return e.stop()}}),Me)}function qt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)("appModule/GET_ALL_ACTIVITIES",yt);case 2:case"end":return e.stop()}}),Le)}function Jt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)("appModule/CHECK_AUTH",Ot);case 2:case"end":return e.stop()}}),Ae)}function Gt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)($e,Ct);case 2:case"end":return e.stop()}}),Ie)}function Ht(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.g)("appModule/GET_STATS",kt);case 2:case"end":return e.stop()}}),Pe)}function Wt(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.a)([Object(L.c)(Nt),Object(L.c)(St),Object(L.c)(wt),Object(L.c)(jt),Object(L.c)(_t),Object(L.c)(xt),Object(L.c)(Dt),Object(L.c)(Mt),Object(L.c)(Lt),Object(L.c)(At),Object(L.c)(It),Object(L.c)(Pt),Object(L.c)(Tt),Object(L.c)(Ut),Object(L.c)(Bt),Object(L.c)(Vt),Object(L.c)(Rt),Object(L.c)(Ft),Object(L.c)(zt),Object(L.c)(qt),Object(L.c)(Jt),Object(L.c)(Gt),Object(L.c)(Ht)]);case 2:case"end":return e.stop()}}),Te)}var Qt=Object(x.fromJS)({myUserAccess:{role:"",perm:{bill:{add:!1,edit:!1,view:!1},customer:{add:!1,edit:!1,view:!1},items:{add:!1,edit:!1,view:!1}}},commonErrorMsg:"",firstTimeBoot:!1,loginLoading:!1,credsDetail:{},success:{},error:"",postNewCustomerData:{},putCustomerData:{},postNewProductData:{},postNewServiceData:{},postNewBillData:{},takeSnapshotQuery:"",addNewStockToProductData:{},allProductsData:{products:[],count:{total:0,page:0,totalPages:0}},productQueryPage:0,detailData:{detail:{},invoicesAdded:[],servicesUsed:[],queryId:""},allCustomerData:{customers:[],count:{total:0,page:0,totalPages:0}},customerQueryPage:0,allServiceData:{services:[],count:{total:0,page:0,totalPages:0}},serviceQueryPage:0,allStockData:[],allBillData:{invoices:[],count:{total:0,page:0,totalPages:0}},billQueryPage:0,allBranchData:[],editBranchData:{},allEmployeesData:{employees:[],admins:[]},allActivitiesData:[],deleteACustomerData:{},deleteABranchData:{},stats:[],currentBranch:{},loading:{postNewCustomerLoading:!1,postNewProductLoading:!1,viewProductsLoading:!1,getProductLoading:!1,addStockToProductLoading:!1,getAllCustomerLoading:!1,postNewServiceLoading:!1,getServiceLoading:!1,postNewBillLoading:!1,getStockLoading:!1,getBillLoading:!1,deleteACustomerLoading:!1,getAllBranchLoading:!1,getAllEmployeesLoading:!1,deleteABranchLoading:!1,putCustomerLoading:!1,getAllActivitiesLoading:!1,takeSnapshotLoading:!1,getByIdLoading:!1,updateServiceLoading:!1,getStatsLoading:!1},modal:{customerAddModal:!1,productAddModal:!1,serviceAddModal:!1,productEditModal:!1,serviceEditModal:!1,branchAddModal:!1,branchEditModal:!1,employeeAddModal:!1,viewCustomersModal:!1},updateHistoryFn:{},notification:{type:"",message:"",level:""}}),Kt="productAddModal",Yt="serviceAddModal",$t="productEditModal",Xt="serviceEditModal",Zt=a(26),ea=a(30),ta=(a(82),a(101)),aa=a.n(ta),na={NotificationItem:{DefaultStyle:{margin:"10px 5px 2px 1px",backgroundColor:"white",border:"1px solid #c7c7c7",boxShadow:"0px 4px 20px 0px #c7c7c7"},success:{color:"black"},error:{color:"#ed5e5e",border:"1px solid #ed5e5e",backgroundColor:"#ffeded"}},MessageWrapper:{DefaultStyle:{margin:0,padding:3}},Dismiss:{DefaultStyle:{backgroundColor:"#000000",color:"#ffffff",top:"6px",right:"8px"},success:{backgroundColor:"#000000",color:"#ffffff"},error:{backgroundColor:"#ed5e5e",color:"white"},warning:{backgroundColor:"#000000",color:"#ffffff"},info:{backgroundColor:"#000000",color:"#ffffff"}}},ra=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={message:"",level:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.notificationSystem=this.refs.notificationSystem}},{key:"componentWillReceiveProps",value:function(e){var t=e.appModuleData.toJS().notification,a=t.message,n=t.level;a&&n&&(this.notificationSystem.addNotification({message:a,level:n}),this.setState({message:a,level:n}),this.props.addNotification({message:null,level:null}))}},{key:"render",value:function(){return o.a.createElement(aa.a,{ref:"notificationSystem",style:na})}}]),a}(i.Component),ca=Object(E.a)({},et),sa=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),ca)(ra)),ia=(a(128),a(129),a(106)),oa=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.open,a=e.onClose,n=e.header,r=e.content,c=e.footer,s=e.center,i=e.showCloseIcon,l={};switch(e.size){case"mini":l={modal:"Modal-Mini"};break;case"big":l={modal:"Modal-Big"}}return o.a.createElement(ia.a,{open:t,onClose:a,center:s,showCloseIcon:i,classNames:l},o.a.createElement("div",{className:"ModalIndex"},n&&c?o.a.createElement("div",null,o.a.createElement("div",{className:"Header"},o.a.createElement("div",null,n)),o.a.createElement("div",{className:"Content"},r),o.a.createElement("div",{className:"Footer"},o.a.createElement("div",null,c))):o.a.createElement("div",null,r)))}}]),a}(i.Component),la=(a(133),a(134),a(135),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).container=o.a.createRef(),r.checkType=function(e){r.setState({typeDropdown:e})},r.showDropdown=function(e){r.setState({isOpen:!0})},r.hideDropdown=function(e){r.container.current&&!r.container.current.contains(e.target)&&r.setState({isOpen:!1})},r.chooseItem=function(e){r.state.labelItem!==e&&r.setState({labelItem:e})},r.renderDataDropDown=function(e,t){var a=r.props.onSelectOption,n={value:t,label:e},c=n.value,s=n.label;return o.a.createElement("li",{key:t,value:c,onClick:function(){return a(s.value)}},o.a.createElement("a",{className:"dropdown-menu-li"},s&&s.value&&s.value.toLocaleUpperCase()))},r.state={isOpen:!1,labelItem:null,typeDropdown:null},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(this.props.list.length>0){var e=this.props.list[0].label,t=null;"undefined"!==typeof e?(this.checkType(!1),t=e):(this.checkType(!0),t=this.props.list[0]),this.setState({labelItem:t})}document.addEventListener("mousedown",this.hideDropdown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.hideDropdown)}},{key:"render",value:function(){var e=this.props,t=e.list,a=e.icon;return o.a.createElement("div",{ref:this.container},o.a.createElement("div",{style:{cursor:"pointer"},onClick:this.showDropdown},o.a.createElement("img",{style:{width:a?34:18},src:a||"https://img.icons8.com/material-outlined/96/000000/menu-2.png"})),o.a.createElement("div",{className:"dropdown ".concat(this.state.isOpen?"open":"")},o.a.createElement("ul",{className:"dropdown-menu"},t.length>0?t.map(this.renderDataDropDown):o.a.createElement("li",null,o.a.createElement("a",null,"No Options")))))}}]),a}(i.Component));la.defaultProps={list:[]};var da,ua=la,ma=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props.pageName;return o.a.createElement("div",{className:"page-header",id:"pageHeader"},o.a.createElement("div",{className:"page-header-name"},t),o.a.createElement("div",{className:"page-header-user-icon"},o.a.createElement(ua,{icon:"https://img.icons8.com/fluent/344/user-male-circle.png",list:pa,onSelectOption:function(t){"My Account"===t?e.props.history.push("/account"):e.props.history.push("/logout")}})))}}]),a}(i.Component),pa=[{value:"My Account"},{value:"Logout"}],ha="/dashboard",va="/branches",ba="/account",ga="/users",fa="/activities",Ea="/branch/:branchId/customers",ya="/branch/:branchId/items",Oa="/branch/:branchId/product/:id",Ca="/branch/:branchId/service/:id",ka="/branch/:branchId/invoices",Na="/branch/:branchId/settings",Sa="/branch/:branchId/new-invoice",ja=(da={},Object(w.a)(da,ha,{name:"Dashboard",path:ha}),Object(w.a)(da,va,{name:"Branches",path:va}),Object(w.a)(da,ba,{name:"Account",path:ba}),Object(w.a)(da,ga,{name:"Users",path:ga}),Object(w.a)(da,fa,{name:"Activities",path:fa}),Object(w.a)(da,Ea,{name:"Customers",path:Ea}),Object(w.a)(da,ya,{name:"Items",path:ya}),Object(w.a)(da,ka,{name:"Invoices",path:ka}),Object(w.a)(da,Na,{name:"Settings",path:Na}),Object(w.a)(da,Sa,{name:"New Invoice",path:Sa}),Object(w.a)(da,Oa,{name:"Product",path:Oa}),Object(w.a)(da,Ca,{name:"Service",path:Ca}),da),wa=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e,t=this.props.pageLocation;return o.a.createElement("div",{className:"app-page"},o.a.createElement(ma,{history:this.props.history,pageName:(e=t.pathname,e.includes("/customer")?ja[Ea]:e.includes("/items")?ja[ya]:e.includes("/product")?ja[Oa]:e.includes("/service")?ja[Ca]:e.includes("/invoice")?ja[ka]:e.includes("/new-invoice")?ja[Sa]:e.includes("/settings")?ja[Na]:ja[e.toLowerCase()]?ja[e.toLowerCase()]:{name:""}).name}),o.a.createElement("div",{className:"page-content"},this.props.children))}}]),a}(i.Component),_a=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;Object(n.a)(this,a);return(r=t.call(this,e)).state={leftMenuWidth:100,pageWidth:window.innerWidth,pageHeight:window.innerHeight-52,onSelectBranch:{},showLeftMenu:!1},r.handleWindowResize=r.handleWindowResize.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"handleWindowResize",value:function(){this.setState({pageWidth:window.innerWidth,pageHeight:window.innerHeight-52})}},{key:"componentWillMount",value:function(){window.addEventListener("resize",this.handleWindowResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"render",value:function(){var e=this,t=this.props;return console.log(t),o.a.createElement("div",{className:"app-view"},o.a.createElement("div",{className:"app-menu"},o.a.createElement("div",{className:"app-name-container"},o.a.createElement("div",{className:"app-header-menu-icon",onClick:function(){return e.setState({showLeftMenu:!e.state.showLeftMenu})}},!this.state.showLeftMenu&&o.a.createElement(Zt.b,{size:"32px",color:"white"}),this.state.showLeftMenu&&o.a.createElement(Zt.d,{size:"32px",color:"white"})),o.a.createElement("div",{className:"app-header-icon",onClick:function(){return e.props.history.push("/dashboard")}}),o.a.createElement("div",{className:"app-header-name",onClick:function(){return e.props.history.push("/dashboard")}},t.pageHeader.appName)),o.a.createElement("div",{className:"app-left-menu-items view-active",style:{display:this.state.pageWidth>800?"block":"none"}},o.a.createElement("div",{className:t.pageHeader.isBranch?"app-left-menu-group":""},t.pageHeader.leftMenu.map((function(t,a){return o.a.createElement("div",{key:a,className:"app-left-menu-list ".concat(e.props.location.pathname.includes(t.link)&&"app-left-menu-list-active")},o.a.createElement("div",{className:"app-left-menu-name",onClick:function(){e.setState({showLeftMenu:!1}),e.props.history.push(t.link)}},t.name),(t.addLink||t.addFunc)&&o.a.createElement("div",{className:"app-left-menu-add-icon",onClick:function(){t.addFunc?t.addFunc():t.addLink&&e.props.history.push(t.addLink)}},o.a.createElement(Zt.a,{size:"24px",color:e.props.location.pathname.includes(t.link)?"white":"black"})))})))),this.state.pageWidth<800&&o.a.createElement(oa,{open:this.state.showLeftMenu,onClose:function(){return e.setState({showLeftMenu:!1})},center:!1,showCloseIcon:!0,size:"mini",content:o.a.createElement("div",{className:"ModalIndex"},o.a.createElement("div",{style:{padding:10,marginTop:50}},t.pageHeader.leftMenu.map((function(t,a){return o.a.createElement("div",{key:a,className:"app-left-menu-list ".concat(e.props.location.pathname.includes(t.link)&&"app-left-menu-list-active"),onClick:function(){e.setState({showLeftMenu:!1}),e.props.history.push(t.link)}},o.a.createElement("div",{className:"app-left-menu-name"},t.name))})),o.a.createElement("div",{className:"app-actions"},t.pageHeader.actions&&t.pageHeader.actions.map((function(t,a){return o.a.createElement("div",{key:a,className:"app-action ".concat(e.props.location.pathname.includes(t.link)&&"app-action-active"),onClick:function(){e.setState({showLeftMenu:!1}),e.props.history.push(t.link)}},t.icon)})))))})),o.a.createElement(wa,{history:this.props.history,pageLocation:this.props.history.location},t.children))}}]),a}(i.Component),xa=(a(136),a(173)),Da=(i.Component,a(138),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={tabActive:1},r._getMenuItems=r._getMenuItems.bind(Object(y.a)(r)),r._getSelectedPanel=r._getSelectedPanel.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"setActive",value:function(e,t){t.preventDefault(),this.setState({tabActive:e}),this.props.onTabClick&&this.props.onTabClick(e)}},{key:"componentDidMount",value:function(){this.props.activeTab&&this.setState({tabActive:this.props.activeTab})}},{key:"_getMenuItems",value:function(){var e=this,t=this.props.type;return t||(t="type1"),o.a.createElement("div",{className:"tabs-menu-".concat(t),style:{display:"flex"}},this.props.panes.map((function(t,a){return o.a.createElement("div",{key:a,className:e.state.tabActive-1===a?"tabs-menu-item-active":"tabs-menu-item",onClick:function(t){e.setActive(a+1,t)}},o.a.createElement("div",null,t.menuItem))})))}},{key:"_getSelectedPanel",value:function(){var e=this.state.tabActive-1,t=this.props.panes[e],a=this.props.type;return a||(a="type1"),o.a.createElement("div",{className:"tab-panel-".concat(a)},t.render)}},{key:"render",value:function(){return o.a.createElement("div",{className:"tabs-main"},this._getMenuItems(),this._getSelectedPanel())}}]),a}(i.Component)),Ma=a(15),La=a.n(Ma),Aa=(a(47),a(139),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.onClick,n=e.color,r=e.width,c=e.disabled,s=e.style,i=e.icon;return i||o.a.createElement("button",{className:"button-main",disabled:c,style:Object(E.a)({width:r,color:n},s),onClick:function(){return a()}},t.toUpperCase())}}]),a}(i.Component));function Ia(){return(Ia=Object(k.a)(C.a.mark((function e(t,a,n){var r,c,s,i,o,l,d,u,m,p,h,v,b,g,f,y,O;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.type,c=void 0===r?"GET":r,s=t.uri,i=t.fullUrl,o=void 0===i?"":i,l=t.obj,d=void 0===l?{}:l,u=t.headers,m=void 0===u?{}:u,p=c,h=o||"".concat("","/api/").concat(s),v=m,b=d.toJS?d.toJS():d,"del"===p&&(p="DELETE"),e.t0=p.toLowerCase(),e.next="head"===e.t0||"get"===e.t0?9:"post"===e.t0||"put"===e.t0||"patch"===e.t0||"delete"===e.t0?11:13;break;case 9:return b=void 0,e.abrupt("break",14);case 11:return b=JSON.stringify(b),e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:return p=p.toUpperCase(),v=Object(E.a)({Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+Object(N.c)("t")},v),e.next=18,fetch(h,{method:p,headers:v,body:b});case 18:return g=e.sent,e.next=21,g.json().catch((function(){return g.text()})).catch((function(){return null}));case 21:if(f=e.sent,g.ok&&500!==g.status){e.next=28;break}throw(y=new Error(f.data?f.data:"API Error happened")).res=g,y.body=f,("Invalid token"===f.data||"jwt expired"===f.data)&&(window.location.href="/"),y;case 28:if(!f||"error"!==f.status||a){e.next=34;break}throw(O=new Error(f.data)).res=g,O.body=f,("Invalid token"===f.data||"jwt expired"===f.data)&&(window.location.href="/"),O;case 34:return e.abrupt("return",{res:g,body:f.response});case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pa=function(e,t,a){return Ia.apply(this,arguments)},Ta=a(35),Ua=(a(140),a(54)),Ba=a(52);var Va=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.value,n=e.onValChange,r=e.type,c=e.maxLength,s=e.minLength,i=e.options,l=e.disabled,d=e.required,u=e.isMulti,m=e.loadOptions,p={};if(r&&"mobile_number"===r&&(p.pattern="d*",p.maxLength="10"),r&&"user_id"===r?(p.pattern="[0-9.]+",p.maxLength="4"):r&&"number"===r&&c&&(p.maxLength=c),r&&"textarea"===r)return o.a.createElement("div",{className:"input-main"},o.a.createElement("div",{className:"input-label"},t),o.a.createElement("div",{className:"input-content"},o.a.createElement("textarea",Object.assign({className:"input-content-textarea",disabled:l,value:a||"",onChange:function(e){return n(e.target)}},p))));if(r&&"select"===r){var h=d&&(!a||!u&&!a.value||u&&0===a.length);return o.a.createElement("div",{className:"input-main"},o.a.createElement("div",{className:"input-label"},t),o.a.createElement("div",{className:h?"input-content-error":"input-content"},o.a.createElement("div",{className:h?"input-content-box input-content-box-error":"input-content-box"},o.a.createElement(Ua.a,{closeMenuOnSelect:!0,isMulti:u,disabled:l,value:a,onChange:function(e){return n(e)},options:i,styles:{backgroundColor:d&&!a?"red":"blue"},getOptionLabel:function(e){return e.text?e.text:e.value},getOptionValue:function(e){return e.value}}))))}if(r&&"asyncSelect"===r)return o.a.createElement("div",{className:"input-main"},o.a.createElement("div",{className:"input-label"},t),o.a.createElement("div",{className:!d||a&&a[0]?"input-content":"input-content-error"},o.a.createElement("div",{className:!d||a&&a[0]?"input-content-box input-content-box-multi":"input-content-box input-content-box-multi input-content-box-error"},o.a.createElement(Ba.a,{closeMenuOnSelect:!1,isMulti:u,cacheOptions:!0,defaultOptions:!0,loadOptions:m,disabled:l,value:a,onChange:function(e){return n(e)},options:i,styles:{backgroundColor:d&&!a?"red":"blue"},getOptionLabel:function(e){return e.text?e.text:e.value},getOptionValue:function(e){return e.value}}))));var v=!0;switch(r){case"number":v=!a||!a.toString();break;case"mobile_number":v=!a||!a.toString()||a.toString().length!==Number(p.maxLength);break;case"password":v=!a||!a.toString()||a.toString().length<Number(s);break;default:v=!a}return o.a.createElement("div",{className:"input-main"},o.a.createElement("div",{className:"input-label"},t),o.a.createElement("div",{className:d&&v?"input-content-error":"input-content"},o.a.createElement("input",Object.assign({disabled:l,className:d&&v?"input-content-box input-content-box-error":"input-content-box",value:a,type:"number"===r?"number":r,onChange:function(e){if("number"===r||"mobile_number"===r){("age"===t.toLowerCase()&&new RegExp(/^[0-9]+$/).test(e.target.value)||e.target.value&&"number"===typeof Number(e.target.value))&&n(e.target)}else n(e.target)}},p))))}}]),a}(i.Component),Ra=[{value:"male",label:"Male"},{value:"female",label:"Female"}],Fa=[{key:"employee",text:"Employee",value:"employee"},{key:"admin",text:"Admin",value:"admin"}],za=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={showDetailModal:!1,showEditModal:!1,editCustomerData:{},editLoading:!1,showDeleteModal:!1,deleteCustomerData:{},editUserModal:!1,editUserData:{},editUserPasswordModal:!1,editUserPasswordData:{},isSuccessIndicator:!1,message:{type:"",text:""}},r.isAllInputOkay=r.isAllInputOkay.bind(Object(y.a)(r)),r.onSubmitEditUser=r.onSubmitEditUser.bind(Object(y.a)(r)),r.onSubmitDeleteUser=r.onSubmitDeleteUser.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"onSubmitEditUser",value:function(){var e=Object(k.a)(C.a.mark((function e(t){var a,n,r,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({editLoading:!0}),a={},n="user/employee/",t.newPassword?(a={"new-password":t.newPassword,"repeat-password":t.repeatPassword},n=n+"password/"+this.props.user._id):(a={"full-name":t.full_name,email:t.email,gender:t.gender.value,address:t.address,age:t.age,mobileNo:t.mobile_number.toString(),role:t.role.value},n+=t._id),e.prev=4,e.next=7,Pa({type:"PUT",uri:n,obj:a});case 7:r=e.sent,(c=r.body)&&"error"!==c.status?(this.props.getAllEmployees(),c.message&&this.props.addNotification({message:c.message,level:"success"})):c.data&&this.props.addNotification({message:c.data,level:"error"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),this.props.addNotification({message:e.t0.toString(),level:"error"});case 15:this.setState({editLoading:!1});case 16:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onSubmitDeleteUser",value:function(){var e=Object(k.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({editLoading:!0}),e.prev=1,e.next=4,Pa({type:"DELETE",uri:"user/employee/"+t._id});case 4:a=e.sent,n=a.body,this.setState({editLoading:!1,isSuccessIndicator:!0,message:{type:"success",text:n.message}}),this.props.getAllEmployees(),this.setState({showDeleteModal:!1,editLoading:!1}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({editLoading:!1,showDeleteModal:!1});case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isAllInputOkay",value:function(){var e=this.state.editUserData;return!e.full_name||!e.mobile_number||!e.gender||!e.age}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.type,r=t.onClickAction,c=this.props.appModuleData.toJS().myUserAccess,s=[];if(!a.deleted)switch(n){case"branch":s.push({icon:"view-detail",value:"view-detail"},{icon:"edit permission",value:"edit permission"},{icon:"remove from branch",value:"remove from branch"});break;default:s.push({icon:"view-detail",value:"view-detail"},{icon:"edit",value:"edit"},{icon:"delete",value:"delete"}),c.emp_id!==a._id&&s.push({icon:"reset password",value:"reset password"})}return o.a.createElement("div",{className:"grid-customer-container"},o.a.createElement("div",{className:"grid-customer-detail-container",onClick:function(){return e.setState({showDetailModal:!0})}},o.a.createElement("div",{className:"grid-icon"},"male"===a.gender?o.a.createElement(Ta.b,{className:"list-user-icon",size:"32px",color:"black"}):o.a.createElement(Ta.c,{className:"list-user-icon",size:"32px",color:"black"})),o.a.createElement("div",{className:"list-name"},a.full_name,o.a.createElement("div",null,a._id&&o.a.createElement("div",{className:"list-split list-label"},a._id),a.added_date_time&&o.a.createElement("div",{className:"list-split list-label"},Object(N.b)(a.added_date_time)),a.deleted&&o.a.createElement("div",{className:"list-split list-deleted"},"Deleted"))),o.a.createElement("div",{className:"customer-list-address"},a.mobile_number&&o.a.createElement("div",null,o.a.createElement("img",{style:{width:15},src:"https://img.icons8.com/carbon-copy/100/000000/phone.png"}),o.a.createElement("div",null,a.mobile_number)))),o.a.createElement("div",{className:"grid-end"},o.a.createElement(ua,{list:s,onSelectOption:function(t){"view-detail"===t?e.setState({showDetailModal:!0}):"delete"===t?e.setState({showDeleteModal:!0}):"edit"===t?e.setState({editUserModal:!0,editUserData:Object(E.a)(Object(E.a)({},a),{},{gender:Ra.filter((function(e){return e.value===a.gender}))[0],role:Fa.filter((function(e){return e.value===a.role}))[0]})}):"reset password"===t?e.setState({editUserPasswordModal:!0}):r&&r(t,a)}})),o.a.createElement(oa,{open:this.state.showDetailModal,center:!1,onClose:function(){return e.setState({showDetailModal:!1})},showCloseIcon:!1,size:"big",header:o.a.createElement("div",null,"Employee Detail - ",a.full_name),content:o.a.createElement("div",{style:{padding:10}},o.a.createElement("div",{className:"Detail-View"},o.a.createElement("div",{className:"Detail-View-Main-Content"},o.a.createElement("div",{className:"Detail-View-Main-Content-Column1"},o.a.createElement("div",{className:"Detail-View-Main-Content-Name"},a.full_name),o.a.createElement("div",{className:"Detail-View-Main-Content-Id"},o.a.createElement("img",{className:"image",src:"https://img.icons8.com/material-outlined/96/000000/face-id.png"}),a._id)),o.a.createElement("div",{className:"Detail-View-Main-Content-Column2"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"User Information:"),o.a.createElement("div",{className:"stat no-border"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Created On"),o.a.createElement("div",{className:"information-val"},Object(N.b)(a.added_date_time))),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Mobile Number"),o.a.createElement("div",{className:"information-val"},a.mobile_number)),a.added_by&&o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Created by"),o.a.createElement("div",{className:"information-val"},a.added_by))))))),"branch"===n&&o.a.createElement("div",{className:"employee-permission"},o.a.createElement("div",{className:"employee-permission-header-name"}," User Permissions"),o.a.createElement("div",{className:"employee-permission-box"},a.perm&&o.a.createElement("table",{className:"content-header-table"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{className:"content-header-name"},"Invoice"),o.a.createElement("td",{className:"content-header-name"},"Customer"),o.a.createElement("td",{className:"content-header-name"},"Items")),o.a.createElement("tr",null,o.a.createElement("td",{className:"content-header-name"},o.a.createElement(La.a,{disabled:!0,checked:a.perm.bill.add})," Add",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.bill.view})," View",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.bill.edit})," Edit",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.bill.delete})," Delete",o.a.createElement("br",null)),o.a.createElement("td",{className:"content-header-name"},o.a.createElement(La.a,{disabled:!0,checked:a.perm.customer.add})," Add ",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.customer.view})," View ",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.customer.edit})," Edit ",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.customer.delete})," Delete ",o.a.createElement("br",null)),o.a.createElement("td",{className:"content-header-name"},o.a.createElement(La.a,{disabled:!0,checked:a.perm.items.add})," Add ",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.items.view})," View ",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.items.edit})," Edit ",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.items.delete})," Delete ",o.a.createElement("br",null)))))))),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Close",onClick:function(){return e.setState({showDetailModal:!1})}}))}),this.state.editUserModal&&o.a.createElement(oa,{open:!0,center:!1,onClose:function(){return e.setState({editUserModal:!1,editUserData:{}})},showCloseIcon:!1,size:"big",header:o.a.createElement("div",null,"Edit User: ",o.a.createElement("span",{className:"Modal-Header-name"},a.full_name)),content:o.a.createElement("div",null,o.a.createElement(Va,{name:"Name",value:this.state.editUserData.full_name,required:!0,onValChange:function(t){e.setState({editUserData:Object(E.a)(Object(E.a)({},e.state.editUserData),{},{full_name:t.value})})}}),o.a.createElement(Va,{name:"Mobile Number",value:this.state.editUserData.mobile_number,type:"mobile_number",maxLength:"10",onValChange:function(t){e.setState({editUserData:Object(E.a)(Object(E.a)({},e.state.editUserData),{},{mobile_number:t.value})})}}),o.a.createElement(Va,{name:"Address",value:this.state.editUserData.address,type:"textarea",onValChange:function(t){e.setState({editUserData:Object(E.a)(Object(E.a)({},e.state.editUserData),{},{address:t.value})})}}),o.a.createElement(Va,{name:"Email",value:this.state.editUserData.email,onValChange:function(t){e.setState({editUserData:Object(E.a)(Object(E.a)({},e.state.editUserData),{},{email:t.value})})}}),o.a.createElement(Va,{name:"Gender",value:this.state.editUserData.gender,type:"select",required:!0,options:Ra,onValChange:function(t){e.setState({editUserData:Object(E.a)(Object(E.a)({},e.state.editUserData),{},{gender:t})})}}),o.a.createElement(Va,{name:"Age",value:this.state.editUserData.age,type:"number",maxLength:"2",required:!0,onValChange:function(t){e.setState({editUserData:Object(E.a)(Object(E.a)({},e.state.editUserData),{},{age:t.value})})}}),o.a.createElement(Va,{name:"Role",value:this.state.editUserData.role,type:"select",required:!0,options:Fa,onValChange:function(t){e.setState({editUserData:Object(E.a)(Object(E.a)({},e.state.editUserData),{},{role:t})})}})),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Submit",disabled:this.isAllInputOkay(),onClick:Object(k.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSubmitEditUser(e.state.editUserData);case 2:e.setState({editUserModal:!1,editUserData:{}});case 3:case"end":return t.stop()}}),t)})))}),o.a.createElement(Aa,{name:"Close",onClick:function(){e.setState({editUserModal:!1,editUserData:{}})}}))}),this.state.editUserPasswordModal&&o.a.createElement(oa,{open:!0,center:!1,onClose:function(){return e.setState({editUserPasswordModal:!1,editUserPasswordData:{}})},showCloseIcon:!1,size:"big",header:o.a.createElement("div",null,"Edit User Password: ",o.a.createElement("span",{className:"Modal-Header-name"},a.full_name)),content:o.a.createElement("div",null,o.a.createElement(Va,{name:"New Password",value:this.state.editUserPasswordData.newPassword,required:!0,type:"password",onValChange:function(t){e.setState({editUserPasswordData:Object(E.a)(Object(E.a)({},e.state.editUserPasswordData),{},{newPassword:t.value})})}}),o.a.createElement(Va,{name:"Repeat Password",value:this.state.editUserPasswordData.repeatPassword,required:!0,type:"password",onValChange:function(t){e.setState({editUserPasswordData:Object(E.a)(Object(E.a)({},e.state.editUserPasswordData),{},{repeatPassword:t.value})})}})),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Submit",disabled:!this.state.editUserPasswordData.newPassword||!this.state.editUserPasswordData.repeatPassword||this.state.editUserPasswordData.newPassword!==this.state.editUserPasswordData.repeatPassword,onClick:Object(k.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSubmitEditUser(e.state.editUserPasswordData);case 2:e.setState({editUserPasswordModal:!1,editUserPasswordData:{}});case 3:case"end":return t.stop()}}),t)})))}),o.a.createElement(Aa,{name:"Close",onClick:function(){e.setState({editUserPasswordModal:!1,editUserPasswordData:{}})}}))}),o.a.createElement(oa,{open:this.state.showDeleteModal,center:!1,onClose:function(){return e.setState({showDeleteModal:!1})},showCloseIcon:!1,size:"mini",header:o.a.createElement("div",null,"DELETE USER:",o.a.createElement("span",null,a.full_name)),content:o.a.createElement("div",{style:{padding:10}},"User will be shown in the inventory as deleted. You cannot revert the deletion at any point."),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Delete",onClick:Object(k.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSubmitDeleteUser(a);case 2:case"end":return t.stop()}}),t)})))}),o.a.createElement(Aa,{name:"Close",onClick:function(){return e.setState({showDeleteModal:!1})}}))}))}}]),a}(i.Component),qa=(a(90),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={deleteModal:{},filterField:"",deleteEmployeeLoading:!1},r.deleteEmployee=r.deleteEmployee.bind(Object(y.a)(r)),r.onChangeState=r.onChangeState.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"componentWillMount",value:function(){this.props.getAllEmployees()}},{key:"onChangeState",value:function(e){this.setState(Object(E.a)({},e))}},{key:"deleteEmployee",value:function(e){var t=this.onChangeState,a=this.props,n=(a.history,a.getAllEmployees),r=a.addNotification;t({deleteEmployeeLoading:!0}),j({type:"DELETE",uri:"/user/employee/"+e._id},!0,(function(e,a){var c=a.body;c&&"error"!==c.status?(t({deleteEmployeeLoading:!1}),n(),c.response.message&&r({message:c.response.message,level:"success"})):r({message:c.data,level:"error"})}))}},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=(t.loading,t.allEmployeesData),n=(t.myUserAccess,a.employees),r=a.admins,c=[{menuItem:"Employees",render:o.a.createElement("div",{style:{overflow:"hidden",width:"100%",padding:10}},n.map((function(t,a){return o.a.createElement(za,Object.assign({key:a,user:t},e.props))})))},{menuItem:"Admins",render:o.a.createElement("div",{style:{overflow:"hidden",width:"100%",padding:10}},r.map((function(t,a){return o.a.createElement(za,Object.assign({key:a,user:t},e.props))})))}];return o.a.createElement("div",null,o.a.createElement("div",{className:"actual-content"},o.a.createElement(Da,{panes:c,activeTab:this.state.activeTab,onTabClick:function(t){e.setState({activeTab:t})}})))}}]),a}(i.Component)),Ja=Object(E.a)({},et),Ga=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),Ja)(qa)),Ha=(a(152),a(104)),Wa=a.n(Ha),Qa=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.type,n=e.style;if(!t)return null;var r=o.a.createElement("div",{className:"Loading-Modal-Content ".concat("native"===n?"circle-loader-native":"circle-loader2"," Loading-Modal-pane")});return a&&"simple"===a?r:o.a.createElement(Wa.a,{isOpen:t,onRequestClose:function(){},className:"Loading-Modal",overlayClassName:"Loading-Overlay"},r)}}]),a}(i.Component),Ka=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={_id:"",gender:{},mobileNo:"","full-name":"",email:"",address:"",age:"",role:{},postCustomerLoading:!1},r.postEmployee=r.postEmployee.bind(Object(y.a)(r)),r.onChangeState=r.onChangeState.bind(Object(y.a)(r)),r.putEmployee=r.putEmployee.bind(Object(y.a)(r)),r.closeModal=r.closeModal.bind(Object(y.a)(r)),r.isAllInputOkay=r.isAllInputOkay.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){if(this.props.match.params.id){var e=Number(this.props.match.params.id),t=this.props.match.params.role,a=this.props.appModuleData.toJS().allEmployeesData["".concat(t,"s")].filter((function(t){return t._id===e}));a.length>0&&this.setState({_id:a[0]._id,gender:a[0].gender,mobileNo:String(a[0].mobile_number),"full-name":a[0].full_name,email:a[0].email,address:a[0].address,role:a[0].role,age:Number(a[0].age),perm:a[0].perm})}}},{key:"onChangeState",value:function(e){this.setState(Object(E.a)({},e))}},{key:"postEmployee",value:function(){var e=Object(k.a)(C.a.mark((function e(){var t,a,n,r,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.onChangeState,a=this.props.addNotification,t({postCustomerLoading:!0}),n={gender:this.state.gender.key,mobileNo:this.state.mobileNo,"full-name":this.state["full-name"],email:this.state.email,address:this.state.address,age:this.state.age,role:this.state.role.key},e.prev=4,e.next=7,Pa({type:"POST",uri:"user/employee",obj:n});case 7:r=e.sent,(c=r.body)&&"error"!==c.status?(this.closeModal(),this.props.getAllEmployees(),c.message&&a({message:c.message,level:"success"})):(c.data&&a({message:c.data,level:"error"}),this.closeModal()),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),a({message:e.t0.toString(),level:"error"}),t({postCustomerLoading:!1});case 16:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"putEmployee",value:function(){var e=this.onChangeState,t=this.props,a=t.history,n=t.addNotification;e({postCustomerLoading:!0}),j({type:"PUT",uri:"user/employee/"+this.state._id,obj:Object(E.a)({},this.state)},!0,(function(t,r){var c=r.body;c&&"error"!==c.status?(e({postCustomerLoading:!1}),a.push("/employees"),c.response.message&&n({message:c.response.message,level:"success"})):(c.data&&n({message:c.data,level:"error"}),e({postCustomerLoading:!1}))}))}},{key:"closeModal",value:function(){this.setState({_id:"",gender:"female",mobileNo:"","full-name":"",email:"",address:"",age:"",role:{},postCustomerLoading:!1}),this.props.modalToggle({modal:"employeeAddModal",view:!1})}},{key:"isAllInputOkay",value:function(){return!this.state["full-name"]||!this.state.gender||!this.state.gender.key||this.state.age&&!this.state.age.toString()||this.state.mobileNo&&10!==this.state.mobileNo.length||!this.state.email||!this.state.role||!this.state.role.key}},{key:"render",value:function(){var e=this;return o.a.createElement(oa,{open:!0,center:!1,onClose:function(){return e.closeModal()},showCloseIcon:!1,size:"big",header:o.a.createElement("div",null,"ADD EMPLOYEE"),content:o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(Va,{name:"Name",value:this.state["full-name"],required:!0,onValChange:function(t){return e.setState({"full-name":t.value})}}),o.a.createElement(Va,{name:"Mobile Number",value:this.state.mobileNo,type:"mobile_number",maxLength:"10",required:!0,onValChange:function(t){return e.setState({mobileNo:t.value})}}),o.a.createElement(Va,{name:"Email",value:this.state.email,required:!0,onValChange:function(t){return e.setState({email:t.value})}}),o.a.createElement(Va,{name:"Gender",value:this.state.gender,type:"select",required:!0,options:[{key:"female",text:"Female",value:"female"},{key:"male",text:"Male",value:"male"}],onValChange:function(t){return e.setState({gender:t})}}),o.a.createElement(Va,{name:"Address",value:this.state.address,required:!1,onValChange:function(t){return e.setState({address:t.value})}}),o.a.createElement(Va,{name:"Age",value:this.state.age,type:"number",maxLength:"2",required:!0,onValChange:function(t){return e.setState({age:Number(t.value)})}}),o.a.createElement(Va,{name:"Role",value:this.state.role,type:"select",required:!0,options:[{key:"employee",text:"Employee",value:"employee"},{key:"admin",text:"Admin",value:"admin"}],onValChange:function(t){return e.setState({role:t})}})),o.a.createElement(Qa,{loading:this.state.postCustomerLoading})),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Submit",disabled:this.isAllInputOkay(),onClick:Object(k.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.postEmployee();case 2:case"end":return t.stop()}}),t)})))}),o.a.createElement(Aa,{name:"Close",onClick:function(){return e.closeModal()}}))})}}]),a}(i.Component),Ya=Object(E.a)({},et),$a=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),Ya)(Ka)),Xa=(a(94),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"componentWillMount",value:function(){this.props.getAllActivities()}},{key:"render",value:function(){var e=this.props.appModuleData.toJS(),t=(e.loading,e.allActivitiesData);e.myUserAccess;return o.a.createElement("div",{className:"actual-content",style:{padding:20}},o.a.createElement("table",{structured:!0,id:"activity_table"},o.a.createElement("tr",null,o.a.createElement("th",null,"Date"),o.a.createElement("th",null,"Added By"),o.a.createElement("th",null,"Branch"),o.a.createElement("th",null,"Description")),o.a.createElement("tbody",null,t.map((function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",null,Object(N.b)(e.added_date_time)),o.a.createElement("td",null,e.added_by.full_name),o.a.createElement("td",null,e.branch&&e.branch.name?e.branch.name:"Null"),o.a.createElement("td",null,e.description))})))))}}]),a}(i.Component)),Za=Object(E.a)({},et),en=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),Za)(Xa)),tn=(a(162),a(174)),an=a(175),nn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={show:!1,expandAtStart:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.expandAtStart&&this.setState({show:this.props.expandAtStart,expandAtStart:this.props.expandAtStart})}},{key:"componentWillReceiveProps",value:function(e){e.expandAtStart!==this.state.expandAtStart&&this.setState({show:e.expandAtStart,expandAtStart:e.expandAtStart})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"invoice-expandable"},o.a.createElement("span",{className:"invoice-expandable-header",onClick:function(){return e.setState({show:!e.state.show})}},this.state.show?o.a.createElement(tn.a,{size:"small"}):o.a.createElement(an.a,{size:"small"}),o.a.createElement("span",{style:{paddingLeft:10}},this.props.header)),o.a.createElement("span",null,this.props.action),this.props.detail&&this.props.detail,this.state.show&&o.a.createElement("div",{className:"invoice-expandable-content"},this.props.children))}}]),a}(i.Component),rn=a(39),cn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={activeStat:[0,1]},r}return Object(r.a)(a,[{key:"componentWillMount",value:function(){this.props.getStats()}},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.allBranchData,n=t.stats;t.loading;return o.a.createElement("div",{className:"actual-content dashboard-branch"},a.filter((function(e){return!e.deleted})).map((function(t,a){var r=n.filter((function(e){return e.branch===t._id}));return 0===r.length?null:(r=r[0],o.a.createElement("div",{key:a,className:"dashboard-segment"},o.a.createElement(nn,{expandAtStart:e.state.activeStat.includes(a),header:t.name},o.a.createElement("div",{className:"dashboard-stat-grid"},o.a.createElement("div",{className:"dashboard-stat-card"},o.a.createElement("div",{className:"dashboard-stat-inner"},o.a.createElement("div",{className:"dashboard-stat-heading"},"Today's Invoice"),o.a.createElement("div",{className:"dashboard-stat-value"},r.invoice.added))),o.a.createElement("div",{className:"dashboard-stat-card"},o.a.createElement("div",{className:"dashboard-stat-inner"},o.a.createElement("div",{className:"dashboard-stat-heading"},"Total Billed in Rs."),o.a.createElement("div",{className:"dashboard-stat-value"},r.invoice.totalInvoiceAmount))),o.a.createElement("div",{className:"dashboard-stat-card"},o.a.createElement("div",{className:"dashboard-stat-inner"},o.a.createElement("div",{className:"dashboard-stat-heading"},"Total Paid in Rs."),o.a.createElement("div",{className:"dashboard-stat-value"},r.invoice.totalPaidAmount))),o.a.createElement("div",{className:"dashboard-stat-card"},o.a.createElement("div",{className:"dashboard-stat-inner"},o.a.createElement("div",{className:"dashboard-stat-heading"},"Un Paid in Rs"),o.a.createElement("div",{className:"dashboard-stat-value"},r.invoice.totalUnPaidAmount))),o.a.createElement("div",{className:"dashboard-stat-card dashboard-stat-clickable",onClick:function(){return e.props.history.push("/branch/".concat(t._id,"/customers"))}},o.a.createElement("div",{className:"dashboard-stat-inner"},o.a.createElement("div",{className:"dashboard-stat-heading"},"Go To"),o.a.createElement("div",{className:"dashboard-stat-value"},o.a.createElement(rn.a,{size:"28px"}))))))))})),0===n.length&&o.a.createElement("div",{style:{color:"#8c8c8c"},align:"center"},"Nothing to show"))}}]),a}(i.Component),sn=Object(E.a)({},et),on=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),sn)(cn)),ln={bill:{add:!0,edit:!1,delete:!1,view:!0},customer:{add:!0,edit:!0,delete:!1,view:!0},items:{add:!1,edit:!1,delete:!1,view:!0}},dn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={name:"",location:"",employees:[],mobile_number:"",addBranchLoading:!1},r.checkOkayToAdd=r.checkOkayToAdd.bind(Object(y.a)(r)),r.onClickAddBranch=r.onClickAddBranch.bind(Object(y.a)(r)),r.onChangeState=r.onChangeState.bind(Object(y.a)(r)),r.closeModal=r.closeModal.bind(Object(y.a)(r)),r.onChangePermission=r.onChangePermission.bind(Object(y.a)(r)),r.renderEmployeesOptions=r.renderEmployeesOptions.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.getAllEmployees();var e=this.props.appModuleData.toJS().myUserAccess,t=this.props,a=t.branchData;if("edit-branch"===t.type){var n=[];a.employees.filter((function(t){return t.employee_id._id!==e.emp_id})).forEach((function(e){n.push({key:e.employee_id._id,value:e.employee_id._id,text:"".concat(e.employee_id.full_name," (").concat(e.employee_id.role,")"),perm:e.perm})})),this.setState({name:a.name,location:a.location,mobile_number:a.mobile_number,employees:n})}}},{key:"renderEmployeesOptions",value:function(e){var t=this.props.appModuleData.toJS().myUserAccess,a=this.props,n=(a.branchData,a.type,[]);return e.filter((function(e){return e._id!==t.emp_id})).forEach((function(e){n.push({key:e._id,value:e._id,text:"".concat(e.deleted?"[Deleted] ":"").concat(e.full_name," (").concat(e.role,")"),perm:ln})})),n}},{key:"onChangePermission",value:function(e,t,a,n){var r=this.state.employees.map((function(r){return r.key===e.key?(r.perm[t][a]=n,r):r}));this.setState({employees:r})}},{key:"onChangeState",value:function(e){this.setState(Object(E.a)({},e))}},{key:"checkOkayToAdd",value:function(){var e=this.state;return!e.name||!e.location||!e.employees||0===e.employees.length||!e.mobile_number}},{key:"onClickAddBranch",value:function(){var e=Object(k.a)(C.a.mark((function e(){var t,a,n,r,c,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.onChangeState,a=this.props.appModuleData.toJS(),n=a.myUserAccess,t({addBranchLoading:!0}),(r={name:this.state.name,location:this.state.location,employees:this.state.employees.map((function(e){return{employee_id:e.key,perm:e.perm}})),mobile_number:this.state.mobile_number}).employees.push({employee_id:n.emp_id,perm:{bill:{add:!0,edit:!0,delete:!0,view:!0},customer:{add:!0,edit:!0,delete:!0,view:!0},items:{add:!0,edit:!0,delete:!0,view:!0}}}),e.prev=5,e.next=8,Pa({type:"add-branch"===this.props.type?"POST":"PUT",uri:"branch/".concat("add-branch"===this.props.type?"":this.props.branchData._id),obj:r});case 8:c=e.sent,s=c.body,this.props.modalToggle({modal:"branchAddModal",view:!1}),this.props.checkAuth(),"edit-branch"===this.props.type?this.props.getById({type:"branch",branchId:this.props.branchData._id}):this.props.getAllBranch(),this.closeModal(),this.props.addNotification({message:s.message,level:"success"}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),this.props.addNotification({message:e.t0.toString(),level:"error"});case 20:case"end":return e.stop()}}),e,this,[[5,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"closeModal",value:function(){this.setState({name:"",location:"",employees:[],mobile_number:"",addBranchLoading:!1}),"edit-branch"===this.props.type?this.props.modalToggle({modal:"branchEditModal",view:!1}):this.props.modalToggle({modal:"branchAddModal",view:!1})}},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS().allEmployeesData,a=t.employees.concat(t.admins);return o.a.createElement(oa,{open:!0,center:!1,onClose:function(){return e.closeModal()},showCloseIcon:!1,size:"big",header:o.a.createElement("div",null,"add-branch"===this.props.type?"ADD BRANCH":"EDIT BRANCH"),content:o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(Va,{name:"Branch Name",value:this.state.name,required:!0,onValChange:function(t){return e.setState({name:t.value})}}),o.a.createElement(Va,{name:"Branch Location",value:this.state.location,required:!0,onValChange:function(t){return e.setState({location:t.value})}}),o.a.createElement(Va,{name:"Branch Mobile Number",value:this.state.mobile_number,type:"mobile_number",maxLength:"10",required:!0,onValChange:function(t){return e.setState({mobile_number:Number(t.value)})}}),o.a.createElement(Va,{name:"Select Employees",value:this.state.employees,type:"select",isMulti:!0,required:!0,options:this.renderEmployeesOptions(a),onValChange:function(t){return e.setState({employees:t})}}),"add-branch"===this.props.type&&this.state.employees&&this.state.employees.length>0&&o.a.createElement("div",{className:"employee-permission-box"},o.a.createElement("div",{className:"employee-permission-header-name"}," User Permissions"),o.a.createElement("div",{className:"employee-permission-box"},o.a.createElement("table",{className:"content-header-table add-employee-permission-table"},o.a.createElement("tbody",null,o.a.createElement("tr",{className:"add-employee-permission-tr"},o.a.createElement("td",{className:"content-header-name"},"User"),o.a.createElement("td",{className:"content-header-name"},"Invoice"),o.a.createElement("td",{className:"content-header-name"},"Customer"),o.a.createElement("td",{className:"content-header-name"},"Items")),this.state.employees.map((function(t,a){return o.a.createElement("tr",{key:t.key,className:"add-employee-permission-tr"},o.a.createElement("td",{className:"content-header-name"},"[",t.key,"] ",t.text),o.a.createElement("td",{className:"content-header-name"},o.a.createElement(La.a,{checked:t.perm&&t.perm.bill.add,onChange:function(a){return e.onChangePermission(t,"bill","add",a)}})," Add ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:t.perm&&t.perm.bill.view,onChange:function(a){return e.onChangePermission(t,"bill","view",a)}})," View ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:t.perm&&t.perm.bill.edit,onChange:function(a){return e.onChangePermission(t,"bill","edit",a)}})," Edit ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:t.perm&&t.perm.bill.delete,onChange:function(a){return e.onChangePermission(t,"bill","delete",a)}})," Delete ",o.a.createElement("br",null)),o.a.createElement("td",{className:"content-header-name"},o.a.createElement(La.a,{checked:t.perm&&t.perm.customer.add,onChange:function(a){return e.onChangePermission(t,"customer","add",a)}})," Add ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:t.perm&&t.perm.customer.view,onChange:function(a){return e.onChangePermission(t,"customer","view",a)}})," View ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:t.perm&&t.perm.customer.edit,onChange:function(a){return e.onChangePermission(t,"customer","edit",a)}})," Edit ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:t.perm&&t.perm.customer.delete,onChange:function(a){return e.onChangePermission(t,"customer","delete",a)}})," Delete ",o.a.createElement("br",null)),o.a.createElement("td",{className:"content-header-name"},o.a.createElement(La.a,{checked:t.perm&&t.perm.items.add,onChange:function(a){return e.onChangePermission(t,"items","add",a)}})," Add ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:t.perm&&t.perm.items.view,onChange:function(a){return e.onChangePermission(t,"items","view",a)}})," View ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:t.perm&&t.perm.items.edit,onChange:function(a){return e.onChangePermission(t,"items","edit",a)}})," Edit ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:t.perm&&t.perm.items.delete,onChange:function(a){return e.onChangePermission(t,"items","delete",a)}})," Delete ",o.a.createElement("br",null)))}))))))),"add-branch"!==this.props.type&&o.a.createElement("div",{style:{padding:10},align:"center"},"Note: Update the employee permission using Edit-Permission"),o.a.createElement(Qa,{loading:this.state.addBranchLoading})),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Submit",disabled:this.checkOkayToAdd(),onClick:Object(k.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onClickAddBranch();case 2:case"end":return t.stop()}}),t)})))}),o.a.createElement(Aa,{name:"Close",onClick:function(){return e.closeModal()}}))})}}]),a}(i.Component),un=Object(E.a)({},et),mn=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),un)(dn)),pn=(a(95),a(105)),hn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.allBranchData,a=e.onClickFn,n=e.onClickAdd;return o.a.createElement("div",{className:"grid-container"},t.map((function(e,t){return o.a.createElement("div",{className:"grid-main",key:t,onClick:function(){return a(e)}},o.a.createElement("div",{className:"branch-grid-name"},e.name," ",e.deleted&&o.a.createElement("span",{className:"branch-grid-deleted"},"Deleted")),o.a.createElement("div",{className:"branch-grid-location"},e.location),o.a.createElement("div",{className:"branch-grid-mobile"},"Mobile Number: ",o.a.createElement("span",{style:{color:"black"}},e.mobile_number)))})),n&&o.a.createElement("div",{className:"grid-main grid-align-center",onClick:function(){return n()}},o.a.createElement(pn.a,{size:50})))}}]),a}(i.Component),vn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"componentWillMount",value:function(){this.props.getAllBranch()}},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.allBranchData;t.myUserAccess;return o.a.createElement("div",{className:"actual-content"},o.a.createElement("div",{className:"dashboard-branch"},o.a.createElement("div",{className:"dashboard-branch-heading"},"Branches"),o.a.createElement("div",null,o.a.createElement(hn,{allBranchData:a.filter((function(e){return!e.deleted})),onClickFn:function(t){e.props.setCurrentBranch(t),e.props.history.push("/branch/".concat(t._id,"/customers"))}}),0===a.length&&o.a.createElement("div",{style:{color:"#8c8c8c"},align:"center"},"Nothing to show"))),o.a.createElement("div",{className:"dashboard-branch"},o.a.createElement("div",{className:"dashboard-branch-heading"},"Archived Branches"),o.a.createElement("div",null,o.a.createElement(hn,{allBranchData:a.filter((function(e){return e.deleted})),onClickFn:function(t){e.props.setCurrentBranch(t),e.props.history.push("/branch/".concat(t._id,"/customers"))}}),0===a.length&&o.a.createElement("div",{style:{color:"#8c8c8c"},align:"center"},"Nothing to show"))))}}]),a}(i.Component),bn=Object(E.a)({},et),gn=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),bn)(vn)),fn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={newPassword:"",repeatPassword:"",updatePassLoading:!1},r.onClickUpdatePass=r.onClickUpdatePass.bind(Object(y.a)(r)),r.setStateChangeValues=r.setStateChangeValues.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"setStateChangeValues",value:function(e){var t=e.key,a=e.value;this.setState(Object(w.a)({},t,a))}},{key:"onClickUpdatePass",value:function(){var e=Object(k.a)(C.a.mark((function e(){var t,a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.appModuleData.toJS(),a=t.myUserAccess,this.setStateChangeValues({key:"updatePassLoading",value:!0}),e.prev=2,e.next=5,Pa({type:"PUT",uri:"/user/employee/password/".concat(a.emp_id),obj:{"new-password":this.state.newPassword,"repeat-password":this.state.repeatPassword}});case 5:n=e.sent,(r=n.body)&&"error"!==r.status?(window.location.href="/",this.props.addNotification({message:"Password successfully changed for ".concat(window.location.search.substring(1)),level:"success"})):this.props.addNotification({message:"Error while updating password: "+r.data,level:"error"}),this.setStateChangeValues({key:"updatePassLoading",value:!1}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),this.props.addNotification({message:"Error while updating password: "+e.t0.toString(),level:"error"});case 14:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.props.appModuleData.toJS().myUserAccess;return o.a.createElement(oa,{open:!0,center:!0,onClose:function(){return e.props.onChangeState({updatePasswordModal:!1})},showCloseIcon:!1,size:"mini",header:o.a.createElement("div",null,"CHANGE PASSWORD (min 8 character)"),content:o.a.createElement("div",null,o.a.createElement(Va,{name:"New Password",value:this.state.newPassword,required:!0,minLength:8,type:"password",onValChange:function(t){return e.setStateChangeValues({key:"newPassword",value:t.value})}}),o.a.createElement(Va,{name:"Repeat Password",value:this.state.repeatPassword,minLength:8,required:!0,type:"password",onValChange:function(t){return e.setStateChangeValues({key:"repeatPassword",value:t.value})}})),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Update Password",disabled:!this.state.newPassword||!this.state.repeatPassword||this.state.newPassword.length<8||this.state.repeatPassword.length<8||this.state.newPassword!==this.state.repeatPassword,onClick:function(){return e.onClickUpdatePass()}}),o.a.createElement(Aa,{name:"Close",onClick:function(){return e.props.onChangeState({updatePasswordModal:!1})}}))})}}]),a}(i.Component),En=Object(E.a)({},et),yn=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),En)(fn)),On=[{value:"male",label:"Male"},{value:"female",label:"Female"}],Cn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={showEditModal:!1,editCustomerData:{},editLoading:!1,showDeleteModal:!1,deleteCustomerData:{},isSuccessIndicator:!1,message:{type:"",text:""}},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.customer,n=t.branchId;a.deleted;return o.a.createElement("div",{className:this.state.editLoading||this.state.isSuccessIndicator?"grid-customer-container gradient":"grid-customer-container"},o.a.createElement("div",{className:"grid-customer-detail-container",onClick:function(){return e.props.minimal?e.props.onClick(a):e.props.history.push("/branch/".concat(n,"/customer/").concat(a._id))}},o.a.createElement("div",{className:"grid-icon"},"male"===a.gender?o.a.createElement(Ta.b,{className:"list-user-icon",size:"32px",color:"black"}):o.a.createElement(Ta.c,{className:"list-user-icon",size:"32px",color:"black"})),o.a.createElement("div",{className:"list-name"},a.deleted&&o.a.createElement("div",{className:"customer-list-split customer-list-deleted"},"Deleted"),a.full_name,o.a.createElement("div",{className:"mobile-number customer-list-mobile-number"},o.a.createElement("div",{className:"customer-list-split"},o.a.createElement(Ta.d,{size:"15px",color:"black"})),o.a.createElement("div",{className:"customer-list-split"},a.mobile_number))),!this.props.minimal&&o.a.createElement("div",{className:"customer-list-age"},o.a.createElement("div",{className:"customer-list-age-header"},"Age"),o.a.createElement("div",{className:"customer-list-age-value"},a.age)),!this.props.minimal&&a.address&&o.a.createElement("div",{className:"customer-list-address"},o.a.createElement(Ta.a,{size:"15px",color:"black"}),o.a.createElement("div",{className:"customer-list-address-value"},a.address))))}}]),a}(i.Component),kn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={updatePasswordModal:!1,filterField:"",deleteEmployeeLoading:!1},r.onChangeState=r.onChangeState.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"componentWillMount",value:function(){this.props.getAllEmployees()}},{key:"onChangeState",value:function(e){this.setState(Object(E.a)({},e))}},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS().myUserAccess;return o.a.createElement("div",{className:"actual-content"},o.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:10}},o.a.createElement(ua,{list:[{icon:"Change Password",value:"Change Password"}],onSelectOption:function(t){"Change Password"===t&&e.setState({updatePasswordModal:!0})}})),o.a.createElement("div",{className:"Detail-View"},t.emp_id&&o.a.createElement("div",{className:"Detail-View-Main-Content"},o.a.createElement("div",{className:"Detail-View-Main-Content-Column1"},o.a.createElement("div",{className:"Detail-View-Main-Content-Name"},t.full_name," ",t.deleted&&o.a.createElement("span",null,"DELETED")),o.a.createElement("div",{className:"Detail-View-Main-Content-Id"},o.a.createElement("img",{className:"image",src:"https://img.icons8.com/material-outlined/96/000000/face-id.png"}),t.emp_id)),o.a.createElement("div",{className:"Detail-View-Main-Content-Column2"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"Your Information:"),o.a.createElement("div",{className:"stat no-border"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Name"),o.a.createElement("div",{className:"information-val"},t.full_name)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Gender"),o.a.createElement("div",{className:"information-val"},t.gender)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Mobile Number"),o.a.createElement("div",{className:"information-val"},t.mobile_number)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Age"),o.a.createElement("div",{className:"information-val"},t.age)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Role"),o.a.createElement("div",{className:"information-val"},t.role))))))),this.state.updatePasswordModal&&o.a.createElement(yn,{onChangeState:this.onChangeState}))}}]),a}(i.Component),Nn=Object(E.a)({},et),Sn=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),Nn)(kn)),jn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){Object(N.d)(),window.location.href="/"}},{key:"render",value:function(){return o.a.createElement("div",null,"logging out...")}}]),a}(i.Component),wn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"componentWillMount",value:function(){this.props.getAllBranch()}},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.myUserAccess,n=t.modal,r=[{name:"Branches",id:"branches",link:"/branches"}];"admin"===a.role&&(r.push({name:"Users",id:"Users",link:"/Users",addFunc:function(){return e.props.modalToggle({modal:"employeeAddModal",view:!0})}}),r.push({name:"Activities",id:"Activities",link:"/Activities",addLink:null}));var c=[{link:"/dashboard",icon:o.a.createElement(ea.c,{size:"24px"})},{link:"/account",icon:o.a.createElement(ea.a,{size:"24px"})},{link:"/settings",icon:o.a.createElement(ea.d,{size:"24px"})},{link:"/logout",icon:o.a.createElement(Zt.e,{size:"24px"})}];return o.a.createElement(_a,{history:this.props.history,location:this.props.location,pageHeader:{appName:"Bill1ne",routeLinks:[],rightUserDetail:a,leftMenu:r,actions:c,changePasswordFn:function(){return e.props.history.push("/change-password")},checkAuth:this.props.checkAuth}},o.a.createElement(sa,{props:!0}),n.employeeAddModal&&o.a.createElement($a,{type:"add-employee"}),n.branchAddModal&&o.a.createElement(mn,{type:"add-branch"}),o.a.createElement(p.a,{exact:!0,path:ha,component:on}),o.a.createElement(p.a,{path:va,component:gn}),o.a.createElement(p.a,{path:ba,component:Sn}),o.a.createElement(p.a,{path:"/logout",component:jn}),"admin"===a.role&&o.a.createElement(p.a,{path:ga,component:Ga}),"admin"===a.role&&o.a.createElement(p.a,{path:fa,component:en}))}}]),a}(i.Component),_n=Object(E.a)({},et),xn=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),_n)(wn)),Dn=(a(163),a(96),a(164),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.totalPages,n=t.currentPage,r=t.nextPage,c=t.prevPage,s=t.loading,i=t.shownContent,l=t.totalContent;return o.a.createElement("div",{className:"page-next"},s&&o.a.createElement("div",{className:"page-next-split page-next-loading"},o.a.createElement(Qa,{type:"simple",style:"native",loading:s})),o.a.createElement("div",{className:"page-next-split page-next-arrows",onClick:function(){n>0&&c(n-1)}},o.a.createElement("img",{style:{width:15},src:"https://img.icons8.com/material-outlined/96/000000/left.png"})),o.a.createElement("div",{className:"page-next-split page-next-numbers"},n," / ",a," Page",o.a.createElement("div",{className:"page-next-numbers-subline"},i," / ",l)),o.a.createElement("div",{className:"page-next-split page-next-arrows",onClick:function(){if(n<a){var t=new URLSearchParams(e.props.location.search);t.set("page",n+1),e.props.history.push("".concat(e.props.location.pathname,"?").concat(t.toString())),r(n+1)}}},o.a.createElement("img",{style:{width:15},src:"https://img.icons8.com/material-outlined/96/000000/right.png"})))}}]),a}(i.Component)),Mn=(a(97),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.heading,a=e.count,n=e.size,r=e.noBorder,c=e.borderColor,s={main:"content-stat-count",heading:"heading",count:"count"};switch(n){case"small":s={main:"content-stat-small-count",heading:"heading",count:"count"}}return r&&(s.main=s.main+" no-border"),o.a.createElement("div",{className:s.main,style:{borderColor:c}},t&&o.a.createElement("div",{className:s.heading},t),o.a.createElement("div",{className:s.count},a))}}]),a}(i.Component)),Ln=(i.Component,function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={deleteCustomerModal:!1,whichCustomer:{},filterField:"",showEditModal:!1},r}return Object(r.a)(a,[{key:"componentWillMount",value:function(){var e=new URLSearchParams(this.props.location.search);this.props.getAllCustomer(e.get("page")?e.get("page"):0),"admin"===this.props.appModuleData.toJS().myUserAccess.role&&this.props.getAllBranch()}},{key:"componentDidMount",value:function(){"delete-customer"!==window.location.search.substring(1)||this.state.whichCustomer.full_name||this.props.history.push("/customers");var e=this.props.appModuleData.toJS().myUserAccess;"admin"===e.role&&e.branch&&this.setState({branch_id:{value:e.branch._id,label:e.branch.name}})}},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.allCustomerData,n=t.loading,r=t.currentBranch,c=t.myUserAccess,s=a.customers.filter((function(t){return t.full_name.toLowerCase().includes(e.state.filterField.toLowerCase())}));return o.a.createElement("div",{className:"actual-content"},Object(N.a)(r,c.emp_id,"customer","add")&&o.a.createElement("div",{style:{display:"flex",borderBottom:"1px solid #eaeaea"}},o.a.createElement(Zt.c,{size:"24px",style:{margin:10},className:"button-icon",alt:"Add Customer",onClick:function(){return e.props.modalToggle({modal:"customerAddModal",view:!0})}})),o.a.createElement("div",null,s&&s.map((function(t,n){return o.a.createElement(Cn,{key:n,customer:t,page:a.count.page,history:e.props.history,branchId:e.props.match.params.branchId,getAllCustomer:e.props.getAllCustomer})})),0===s.length&&o.a.createElement("div",{style:{color:"#8c8c8c"},align:"center"},"Nothing to show")),o.a.createElement("div",{className:"float-right"},o.a.createElement(Dn,{loading:n.getAllCustomerLoading,currentPage:a.count.page,totalPages:a.count.totalPages,shownContent:a.customers.length,totalContent:a.count.total,nextPage:function(t){return e.props.getAllCustomer(t)},prevPage:function(t){return e.props.getAllCustomer(t)},history:this.props.history,location:this.props.location})))}}]),a}(i.Component)),An=Object(E.a)({},et),In=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),An)(Ln)),Pn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.invoice,n=t.branchId;return o.a.createElement("div",{className:"grid-list-container grid-invoice",onClick:function(){return e.props.history.push("/branch/".concat(n,"/invoice/").concat(a._id))}},o.a.createElement("div",{className:"grid-icon",id:"icon"},o.a.createElement(Ta.e,{className:"list-user-icon",size:"28px"})),o.a.createElement("div",{className:"list-name",id:"name"},a.customer.mobile_number&&o.a.createElement("span",null,a.customer.mobile_number)," ",a.customer.full_name||a._id,o.a.createElement("div",null,o.a.createElement("div",{className:"list-split list-label"},a._id),o.a.createElement("div",{className:"list-split list-label"},Object(N.b)(a.added_date_time)),o.a.createElement("div",{className:"list-split list-label"},a.added_by.full_name),a.deleted&&o.a.createElement("div",{className:"list-split list-deleted"},"Deleted"))),o.a.createElement("div",{className:"grid-stat-container",id:"stat"},o.a.createElement(Mn,{heading:"".concat(a.products.length),count:"Product",size:"small"}),o.a.createElement(Mn,{heading:"".concat(a.services.length),count:"Service",size:"small"}),"pending"===a.state&&o.a.createElement(Mn,{heading:"Rs.".concat(a.final_bill_amount.toFixed(2)-a.paid_amount.toFixed(2)," "),count:"Pending",size:"small",borderColor:"#e35656"}),o.a.createElement(Mn,{heading:"Rs.".concat(a.final_bill_amount.toFixed(2)),count:"Bill Amount",size:"small"})))}}]),a}(i.Component),Tn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={editCustomerModal:!1,showDeleteModal:!1},r.isAllInputOkay=r.isAllInputOkay.bind(Object(y.a)(r)),r.onSubmitDeleteCustomer=r.onSubmitDeleteCustomer.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.match.params.id;this.props.getById({type:"customer",id:e})}},{key:"isAllInputOkay",value:function(){var e=this.state.editCustomerData;return!e.full_name||0===Object.keys(e.gender).length||!(Number(e.age)>0)||10!==e.mobile_number.toString().length}},{key:"onSubmitDeleteCustomer",value:function(){var e=Object(k.a)(C.a.mark((function e(t){var a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({showDeleteModal:!1,deleteLoading:!0}),e.prev=1,e.next=4,Pa({type:"DELETE",uri:"customer/"+t._id});case 4:a=e.sent,n=a.body,this.setState({editLoading:!1,isSuccessIndicator:!0,message:{type:"success",text:n.message}}),n&&"error"!==n.status?(r=this.props.match.params.id,this.props.getById({type:"customer",id:r}),n.message&&this.props.addNotification({message:n.message,level:"success"})):n.data&&this.props.addNotification({message:n.data,level:"error"}),this.setState({deleteLoading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({deleteLoading:!1}),this.props.addNotification({message:e.t0.toString(),level:"error"});case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.detailData,n=t.currentBranch,r=t.loading,c=t.myUserAccess,s=a.detail,i=a.invoicesAdded,l=(a.queryId,[{menuItem:"Invoices (".concat(i&&i.length,")"),render:o.a.createElement("div",{className:"Detail-View-Main-Content-Body"},i&&i.map((function(t,a){return o.a.createElement(Pn,{invoice:t,history:e.props.history,key:a,branchId:t.branch})})))}]);return o.a.createElement("div",null,o.a.createElement("div",{className:"actual-content"},o.a.createElement("div",{style:{width:"100%"}},o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.a.createElement(Qa,{type:"simple",style:"native",loading:r.getByIdLoading||r.putCustomerLoading})),o.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},!r.getByIdLoading&&!r.putCustomerLoading&&!s.deleted&&Object(N.a)(n,c.emp_id,"customer","edit")&&o.a.createElement(rn.b,{size:"20px",style:{margin:10},className:"button-icon",onClick:function(){return e.setState({editCustomerModal:!0,editCustomerData:Object(E.a)(Object(E.a)({},s),{},{gender:On.filter((function(e){return e.value===s.gender}))[0]})})}}),!r.getByIdLoading&&!r.putCustomerLoading&&!s.deleted&&Object(N.a)(n,c.emp_id,"customer","delete")&&o.a.createElement(ea.b,{size:"20px",style:{margin:10},className:"button-icon",onClick:function(){return e.setState({showDeleteModal:!0})}}))),o.a.createElement("div",{className:"Detail-View"},"customer"===a.type&&s._id&&o.a.createElement("div",null,o.a.createElement("div",{className:"Detail-View-Main-Content"},o.a.createElement("div",{className:"Detail-View-Main-Content-Column1"},o.a.createElement("div",{className:"Detail-View-Main-Content-Name"},s.full_name," ",s.deleted&&o.a.createElement("span",null,"DELETED")),o.a.createElement("div",{className:"Detail-View-Main-Content-Id"},o.a.createElement("img",{className:"image",src:"https://img.icons8.com/material-outlined/96/000000/face-id.png"}),s._id)),o.a.createElement("div",{className:"Detail-View-Main-Content-Column2"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"Customer Information:"),o.a.createElement("div",{className:"stat"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Name"),o.a.createElement("div",{className:"information-val"},s.full_name)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Mobile Number"),o.a.createElement("div",{className:"information-val"},s.mobile_number)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Age"),o.a.createElement("div",{className:"information-val"},s.age)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Address"),o.a.createElement("div",{className:"information-val"},s.address)))),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"Invoice Information:"),o.a.createElement("div",{className:"stat no-border"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Invoice Count"),o.a.createElement("div",{className:"information-val"},i.length)))))),o.a.createElement("div",{style:{paddingTop:10}},o.a.createElement(Da,{panes:l,type:"default"}))))),this.state.editCustomerModal&&o.a.createElement(oa,{open:!0,center:!1,onClose:function(){e.setState({editCustomerModal:!1,editCustomerData:{}})},showCloseIcon:!1,size:"big",header:o.a.createElement("div",null,"EDIT CUSTOMER: ",o.a.createElement("span",{className:"Modal-Header-name"},s.full_name)),content:o.a.createElement("div",null,o.a.createElement(Va,{name:"Name",value:this.state.editCustomerData.full_name,required:!0,onValChange:function(t){e.setState({editCustomerData:Object(E.a)(Object(E.a)({},e.state.editCustomerData),{},{full_name:t.value})})}}),o.a.createElement(Va,{name:"Mobile Number",value:this.state.editCustomerData.mobile_number,type:"mobile_number",disabled:!0,maxLength:"10",onValChange:function(t){e.setState({editCustomerData:Object(E.a)(Object(E.a)({},e.state.editCustomerData),{},{mobile_number:t.value})})}}),o.a.createElement(Va,{name:"Home Address",value:this.state.editCustomerData.address,type:"textarea",onValChange:function(t){e.setState({editCustomerData:Object(E.a)(Object(E.a)({},e.state.editCustomerData),{},{address:t.value})})}}),o.a.createElement(Va,{name:"Email",value:this.state.editCustomerData.email,onValChange:function(t){e.setState({editCustomerData:Object(E.a)(Object(E.a)({},e.state.editCustomerData),{},{email:t.value})})}}),o.a.createElement(Va,{name:"Age",value:this.state.editCustomerData.age,type:"number",maxLength:"2",required:!0,onValChange:function(t){e.setState({editCustomerData:Object(E.a)(Object(E.a)({},e.state.editCustomerData),{},{age:t.value})})}}),o.a.createElement(Va,{name:"Gender",value:this.state.editCustomerData.gender,type:"select",required:!0,options:On,onValChange:function(t){e.setState({editCustomerData:Object(E.a)(Object(E.a)({},e.state.editCustomerData),{},{gender:t})})}})),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Submit",disabled:this.isAllInputOkay(),onClick:function(){var t=e.state.editCustomerData;e.props.putCustomer({name:t.full_name,email:t.email,gender:t.gender.value,address:t.address,age:Number(t.age),mobileNo:Number(t.mobile_number),branch_id:Number(n._id)}),e.setState({editCustomerData:{},editCustomerModal:!1})}}),o.a.createElement(Aa,{name:"Close",onClick:function(){e.setState({editCustomerData:{},editCustomerModal:!1})}}))}),this.state.showDeleteModal&&o.a.createElement(oa,{open:this.state.showDeleteModal,center:!1,onClose:function(){return e.setState({showDeleteModal:!1})},showCloseIcon:!1,size:"mini",header:o.a.createElement("div",null,"DELETE CUSTOMER:",o.a.createElement("span",null,s.full_name)),content:o.a.createElement("div",{style:{padding:10}},"Deleting customer will not delete the customer from the inventory. Customer will be shown in the inventory as deleted. You cannot revert the deletion at any point."),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Delete",onClick:Object(k.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSubmitDeleteCustomer(s);case 2:case"end":return t.stop()}}),t)})))}),o.a.createElement(Aa,{name:"Close",onClick:function(){return e.setState({showDeleteModal:!1})}}))}))}}]),a}(i.Component),Un=Object(E.a)({},et),Bn=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),Un)(Tn)),Vn=(a(57),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.product,n=t.showAvgUsage,r=t.isInvoiceView;return o.a.createElement("div",{className:"grid-list-container grid-product",onClick:function(){return e.props.history.push("/branch/".concat(e.props.branchId,"/product/").concat(a._id))}},o.a.createElement("div",{className:"grid-icon",id:"icon"},o.a.createElement(Ta.f,{className:"list-user-icon",size:"28px"})),o.a.createElement("div",{className:"list-name",id:"name"},a.name,o.a.createElement("div",null,a._id&&o.a.createElement("div",{className:"list-split list-label"},a._id),a.added_date_time&&o.a.createElement("div",{className:"list-split list-label"},Object(N.b)(a.added_date_time)),a.deleted&&o.a.createElement("div",{className:"list-split list-deleted"},"Deleted"))),!r&&o.a.createElement("div",{className:"grid-stat-container",id:"stat"},n&&o.a.createElement(Mn,{heading:"".concat(n," ").concat(a.product_unit),count:"Avg.used",size:"small"}),o.a.createElement(Mn,{heading:"".concat(a.available_stocks.toFixed(2)," ").concat(a.product_unit),count:"Available",size:"small"}),o.a.createElement(Mn,{heading:"cost",count:a.product_cost,size:"small"})),r&&o.a.createElement("div",{className:"grid-stat-container",id:"stat"},o.a.createElement(Mn,{heading:"".concat(a.quantity_used),count:"".concat(a.product_unit),size:"small"}),o.a.createElement(Mn,{heading:"cost",count:a.product_cost,size:"small"})))}}]),a}(i.Component)),Rn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.service,n=t.showSubStatDetail,r=t.isInvoiceView;return o.a.createElement("div",{className:"grid-list-container grid-service",onClick:function(){return e.props.history.push("/branch/".concat(e.props.branchId,"/service/").concat(a._id))}},o.a.createElement("div",{className:"grid-icon",id:"icon"},o.a.createElement(Ta.g,{className:"list-user-icon",size:"28px"})),o.a.createElement("div",{className:"list-name",id:"name"},a.name,o.a.createElement("div",null,a._id&&o.a.createElement("div",{className:"list-split list-label"},a._id),r&&a._id&&o.a.createElement("div",{className:"list-split list-label"},a._id),a.added_date_time&&o.a.createElement("div",{className:"list-split list-label"},Object(N.b)(a.added_date_time)),a.added_by&&o.a.createElement("div",{className:"list-split list-label"},a.added_by.full_name),a.deleted&&o.a.createElement("div",{className:"list-split list-deleted"},"Deleted"))),o.a.createElement("div",{className:"grid-stat-container",id:"stat"},!n&&o.a.createElement(Mn,{heading:"".concat(a.average_stock_usage.length),count:"Products Used",size:"small"}),!n&&!r&&o.a.createElement(Mn,{heading:"".concat(a.product_used.length),count:"Products Used",size:"small"}),n&&!r&&a.average_stock_usage.map((function(e,t){var n=a.product_used.filter((function(t){return t._id===e._id}))[0];return n?o.a.createElement(Mn,{heading:"".concat(n.name),key:t,count:"".concat(e.quantity_used," ").concat(n.product_unit),size:"small"}):null})),n&&r&&a.product_used.map((function(e,t){return o.a.createElement(Mn,{heading:"".concat(e.name),key:t,count:"".concat(e.quantity_used," ").concat(e.product_unit),size:"small"})})),r&&o.a.createElement(Mn,{heading:"Rs.".concat(a.service_cost),count:"Cost",size:"small"})))}}]),a}(i.Component),Fn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={activeTab:1},r}return Object(r.a)(a,[{key:"componentWillMount",value:function(){var e=new URLSearchParams(this.props.location.search);switch(e.get("tab")){case"2":this.setState({activeTab:Number(e.get("tab"))}),this.props.getAllService(e.get("page")?e.get("page"):0);break;default:this.props.getAllProduct(e.get("page")?e.get("page"):0)}}},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.allProductsData,n=t.allServiceData,r=t.myUserAccess,c=t.updateHistoryFn,s=t.currentBranch,i=t.loading,l=[{menuItem:"Products",render:o.a.createElement("div",{style:{overflow:"hidden"}},Object(N.a)(s,r.emp_id,"items","add")&&o.a.createElement("div",{style:{display:"flex",borderBottom:"1px solid #eaeaea"}},o.a.createElement(Zt.c,{size:"24px",style:{margin:10},className:"button-icon",alt:"Add Product",onClick:function(){return u()}})),a.products.map((function(t,a){return o.a.createElement(Vn,{product:t,history:c,key:a,branchId:e.props.match.params.branchId})})),0===a.products.length&&o.a.createElement("div",{style:{color:"#8c8c8c",padding:10},align:"center"},"Nothing to show"))},{menuItem:"Services",render:o.a.createElement("div",{style:{overflow:"hidden"}},Object(N.a)(s,r.emp_id,"items","add")&&o.a.createElement("div",{style:{display:"flex",borderBottom:"1px solid #eaeaea"}},o.a.createElement(Zt.c,{size:"24px",style:{margin:10},className:"button-icon",alt:"Add Service",onClick:function(){return u()}})),n.services.map((function(t,a){return o.a.createElement(Rn,{service:t,history:e.props.history,key:a,branchId:e.props.match.params.branchId})})),0===n.services.length&&o.a.createElement("div",{style:{color:"#8c8c8c",padding:10},align:"center"},"Nothing to show"))}],d={};switch(this.state.activeTab){case 1:d={loading:i.getProductLoading,currentPage:a.count.page,totalPages:a.count.totalPages,shownContent:a.products.length,totalContent:a.count.total,nextPage:function(t){return e.props.getAllProduct(t)},prevPage:function(t){return e.props.getAllProduct(t)}};break;case 2:d={loading:i.getServiceLoading,currentPage:n.count.page,totalPages:n.count.totalPages,shownContent:n.services.length,totalContent:n.count.total,nextPage:function(t){return e.props.getAllService(t)},prevPage:function(t){return e.props.getAllService(t)}}}var u;switch(this.state.activeTab){case 1:"PRODUCT",u=function(){return e.props.modalToggle({modal:Kt,view:!0})};break;case 2:"SERVICE",u=function(){return e.props.modalToggle({modal:Yt,view:!0})}}return o.a.createElement("div",{className:"actual-content",id:"pageContent"},o.a.createElement(Da,{panes:l,activeTab:this.state.activeTab,onTabClick:function(t){e.setState({activeTab:t});var r=new URLSearchParams(e.props.location.search);r.set("tab",t);var c=0;switch(t){case 2:c=n.count.page,0===n.services.length&&e.props.getAllService(c);break;default:c=a.count.page,0===a.products.length&&e.props.getAllProduct(c)}r.set("page",c.toString()),e.props.history.push("/branch/".concat(e.props.match.params.branchId,"/items/?").concat(r.toString()))}}),o.a.createElement("div",{className:"float-right"},o.a.createElement(Dn,Object.assign({},d,{history:this.props.history,location:this.props.location}))))}}]),a}(i.Component),zn=Object(E.a)({},et),qn=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),zn)(Fn)),Jn=[{key:"kg",text:"kg",value:"kg"},{key:"gram",text:"gram",value:"gram"},{key:"piece",text:"piece",value:"piece"},{key:"litre",text:"litre",value:"litre"},{key:"box",text:"box",value:"box"},{key:"pack",text:"pack",value:"pack"},{key:"ml",text:"ml",value:"ml"},{key:"kit",text:"kit",value:"kit"},{key:"full_kit",text:"full_kit",value:"full_kit"},{key:"half_kit",text:"half_kit",value:"half_kit"}],Gn=[],Hn=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={type:"",_id:"",productName:"",productUnit:{},productCost:0,quantityInMl:0,totalQuantity:0,quantityInBox:0,serviceName:"",costOfService:0,productUsed:[],branch:{}},r.onClickSubmit=r.onClickSubmit.bind(Object(y.a)(r)),r.setStockUsageQuantity=r.setStockUsageQuantity.bind(Object(y.a)(r)),r.setStateValues=r.setStateValues.bind(Object(y.a)(r)),r.onCloseModal=r.onCloseModal.bind(Object(y.a)(r)),r.checkAllInputOkay=r.checkAllInputOkay.bind(Object(y.a)(r)),r.onLoadProductSelectOption=r.onLoadProductSelectOption.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.productsData,a=e.serviceData,n=e.type;if("add-product"===n)this.setState({type:"add-product"});else if("add-service"===n)this.setState({type:"add-service"});else if("edit-product"===n){if(Object.keys(t).length>0){var r={type:"edit-product",_id:t._id,productName:t.name,productUnit:Jn.filter((function(e){return e.value===t.product_unit}))[0],productCost:t.product_cost};this.setState(r)}}else if("edit-service"===n&&Object.keys(a).length>0){var c={type:"edit-service",_id:a._id,serviceName:a.name,costOfService:String(a.service_cost),productUsed:a.product_used.filter((function(e){return!e.deleted})).map((function(e){var t=a.average_stock_usage.filter((function(t){return e._id===t._id})),n=t.length>0?t[0].quantity_used:0;return Object(E.a)(Object(E.a)({},Kn([e])[0]),{},{averageQuantityOfStockUsed:n,fullObj:e})}))};this.setState(c)}}},{key:"onClickSubmit",value:function(){var e=this.state,t=e.type,a=e._id,n=e.productName,r=e.productUnit,c=e.productCost,s=e.serviceName;this.props.updateHistoryFun(this.props.history);var i={branch_id:this.props.match.params.branchId};if("add-product"===t)this.props.postNewProduct(Object(E.a)({name:n,unit:r.value,cost:Number(c)},i));else if("edit-product"===t)this.props.updateProduct(Object(E.a)({_id:a,name:n,unit:r.value,cost:Number(c)},i));else if("edit-service"===t){var o=Object(E.a)({_id:a,name:s,costOfService:this.state.costOfService.toString()},i);o.productUsed=this.state.productUsed.map((function(e){return e.key})),this.state.productUsed.filter((function(e){return e.averageQuantityOfStockUsed&&Number(e.averageQuantityOfStockUsed)&&Number(e.averageQuantityOfStockUsed)>0})).length>0&&(o.averageStockUsage=this.state.productUsed.map((function(e){return{_id:e.fullObj._id,quantity_used:Number(e.averageQuantityOfStockUsed)}}))),this.props.updateService(o)}else{var l=Object(E.a)({name:s,costOfService:this.state.costOfService.toString()},i);l.productUsed=this.state.productUsed.map((function(e){return e.key})),this.state.productUsed.filter((function(e){return e.averageQuantityOfStockUsed&&Number(e.averageQuantityOfStockUsed)&&Number(e.averageQuantityOfStockUsed)>0})).length>0&&(l.averageStockUsage=this.state.productUsed.map((function(e){return{_id:e.fullObj._id,quantity_used:Number(e.averageQuantityOfStockUsed)}}))),this.props.postNewService(l)}this.onCloseModal()}},{key:"setStateValues",value:function(e){this.setState(e)}},{key:"setStockUsageQuantity",value:function(e,t){var a=this.state.productUsed;a[e].averageQuantityOfStockUsed=t,this.setStateValues({productUsed:a})}},{key:"checkAllInputOkay",value:function(){return"add-product"===this.state.type?!this.state.productName||0===Object.keys(this.state.productUnit).length||!this.state.productCost.toString():"add-service"===this.state.type?!this.state.serviceName||!this.state.costOfService.toString():"edit-product"===this.state.type?!this.state.productName||0===Object.keys(this.state.productUnit).length||!this.state.productCost.toString():"edit-service"===this.state.type?!this.state.serviceName||!this.state.costOfService.toString():void 0}},{key:"onCloseModal",value:function(){var e=this.props.appModuleData.toJS().loading;"add-product"===this.state.type?!e.postNewProductLoading&&!e.postNewServiceLoading&&this.props.modalToggle({modal:Kt,view:!1}):"add-service"===this.state.type?!e.postNewProductLoading&&!e.postNewServiceLoading&&this.props.modalToggle({modal:Yt,view:!1}):"edit-product"===this.state.type?this.props.modalToggle({modal:$t,view:!1}):"edit-service"===this.state.type&&this.props.modalToggle({modal:Xt,view:!1})}},{key:"onLoadProductSelectOption",value:function(){var e=Object(k.a)(C.a.mark((function e(t){var a,n,r,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.appModuleData.toJS(),n=a.currentBranch,!t){e.next=13;break}return e.prev=2,e.next=5,Pa({type:"GET",uri:"products/".concat(n._id,"?name=").concat(t)});case 5:return r=e.sent,c=r.body,e.abrupt("return",Kn(c.products));case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement(oa,{open:!0,center:!1,onClose:function(){return e.onCloseModal()},showCloseIcon:!1,size:"big",header:o.a.createElement("div",null,this.state.type.toUpperCase()),content:o.a.createElement("div",null,("add-product"===this.state.type||"edit-product"===this.state.type)&&o.a.createElement("div",null,o.a.createElement(Va,{name:"Product Name",value:this.state.productName,required:!0,onValChange:function(t){e.setState({productName:t.value})}}),o.a.createElement(Va,{name:"Select Product Unit",value:this.state.productUnit,type:"select",required:!0,options:Jn,onValChange:function(t){return e.setState({productUnit:t})}}),o.a.createElement(Va,{name:"Product Cost",value:this.state.productCost,required:!0,type:"number",onValChange:function(t){return e.setState({productCost:t.value})}})),("add-service"===this.state.type||"edit-service"===this.state.type)&&o.a.createElement("div",null,o.a.createElement(Va,{name:"Service Name",value:this.state.serviceName,required:!0,onValChange:function(t){e.setState({serviceName:t.value})}}),o.a.createElement(Va,{name:"Service Cost",value:this.state.costOfService,required:!0,type:"number",onValChange:function(t){return e.setState({costOfService:t.value})}}),o.a.createElement(Va,{name:"Select Product Used",value:this.state.productUsed,type:"asyncSelect",required:!0,isMulti:!0,loadOptions:function(){var t=Object(k.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onLoadProductSelectOption(a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),options:Jn,onValChange:function(t){e.setState({productUsed:t||[]})}}),this.state.productUsed.length>0&&o.a.createElement("div",{className:"product-avg-usage-box"},this.state.productUsed.map((function(t,a){return o.a.createElement("div",{key:a},o.a.createElement(Va,{type:"number",name:"Average quantity of ".concat(t.fullObj.name," used in ").concat(t.fullObj.product_unit),value:t.averageQuantityOfStockUsed,onValChange:function(t){e.setStockUsageQuantity(a,t.value)}}))}))))),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Submit",disabled:this.checkAllInputOkay(),onClick:function(){return e.onClickSubmit()}}),o.a.createElement(Aa,{name:"Close",onClick:function(){return e.onCloseModal()}}))})}}]),a}(i.Component),Wn=Object(E.a)({},et),Qn=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),Wn)(Hn));var Kn=function(e){return Gn=0===e.length?Gn:[],e.filter((function(e){return!e.deleted})).forEach((function(e){Gn.push({key:e._id,value:e._id,text:e.name,fullObj:e})})),Gn},Yn=[{icon:"Add",value:"Add"},{icon:"Remove",value:"Remove"}],$n=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={addStockModal:!1,addStockData:{type:Yn[0],number:""},showDeleteModal:!1,deleteLoading:!1},r.addStockModal=r.addStockModal.bind(Object(y.a)(r)),r.isAllStockInputOkay=r.isAllStockInputOkay.bind(Object(y.a)(r)),r.onSubmitDeleteProduct=r.onSubmitDeleteProduct.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.match.params.id;this.props.getById({type:"product",id:e})}},{key:"isAllStockInputOkay",value:function(){return!(this.state.addStockData.number>0)}},{key:"addStockModal",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.detailData,n=t.currentBranch,r=t.myUserAccess,c=a.detail,s=[{icon:"Add",value:"Add"}];return Object(N.a)(n,r.emp_id,"items","edit")&&s.push({icon:"Remove",value:"Remove"}),o.a.createElement(oa,{open:this.state.addStockModal,center:!1,onClose:function(){return e.setState({addStockModal:!1})},showCloseIcon:!1,size:"mini",header:o.a.createElement("div",null,"ADD/REMOVE STOCK | ",o.a.createElement("span",null,"(Available Stocks: ",c.available_stocks.toFixed(2)," ",c.product_unit,")")),content:o.a.createElement("div",null,o.a.createElement(Va,{name:"Action Type",value:this.state.addStockData.type,type:"select",required:!0,options:s,onValChange:function(t){e.setState({addStockData:Object(E.a)(Object(E.a)({},e.state.addStockData),{},{type:t})})}}),o.a.createElement(Va,{name:"No.of Stocks (in ".concat(c.product_unit,")"),value:this.state.addStockData.number,required:!0,type:"number",onValChange:function(t){e.setState({addStockData:Object(E.a)(Object(E.a)({},e.state.addStockData),{},{number:t.value})})}}),o.a.createElement(Qa,{loading:this.state.addCustomerLoading})),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Submit",disabled:this.isAllStockInputOkay(),onClick:function(){e.props.addStockToProduct({type:e.state.addStockData.type.value.toLowerCase(),productId:c._id,quantityToAdd:Number(e.state.addStockData.number),branch_id:c.branch._id}),e.setState({addStockModal:!1,addStockData:{type:Yn[0],number:0}})}}),o.a.createElement(Aa,{name:"Close",onClick:function(){e.setState({addStockModal:!1,addStockData:{type:Yn[0],number:0}})}}))})}},{key:"onSubmitDeleteProduct",value:function(){var e=Object(k.a)(C.a.mark((function e(t){var a,n,r,c,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({showDeleteModal:!1,deleteLoading:!0}),e.prev=1,a=this.props.appModuleData.toJS(),n=a.currentBranch,e.next=5,Pa({type:"DELETE",uri:"product/".concat(n._id,"/").concat(t._id)});case 5:r=e.sent,(c=r.body)&&"error"!==c.status?(s=this.props.match.params.id,this.props.getById({type:"product",id:s}),c.message&&this.props.addNotification({message:c.message,level:"success"})):c.data&&this.props.addNotification({message:c.data,level:"error"}),this.setState({deleteLoading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({deleteLoading:!1}),this.props.addNotification({message:e.t0.toString(),level:"error"});case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.detailData,n=t.loading,r=t.modal,c=t.currentBranch,s=t.myUserAccess,i=a.detail,l=a.servicesUsed,d=a.invoicesAdded,u=this.props.match.params.branchId,m=[{menuItem:"Stock Details",render:o.a.createElement("div",{style:{overflow:"hidden",padding:10}},o.a.createElement("div",{className:"Detail-View-Main-Content-Body"},o.a.createElement("div",{className:"stock-list"},!n.getByIdLoading&&!n.addStockToProductLoading&&!n.postNewProductLoading&&!this.state.deleteLoading&&!i.deleted&&Object(N.a)(c,s.emp_id,"items","add")&&o.a.createElement("div",{style:{alignSelf:"center",justifySelf:"center"}},o.a.createElement(rn.c,{size:"40px",style:{float:"right"},className:"button-icon button-icon-bordered",onClick:function(){return e.setState({addStockModal:!0})}}),this.state.addStockModal&&this.addStockModal()),i.stocks&&i.stocks.reverse().map((function(t){return o.a.createElement("div",{className:"stock-list-item ".concat(t.type)},o.a.createElement("div",{className:"stock-list-item-id"},t._id),o.a.createElement("div",{className:"stock-list-item-stock"},"".concat(t.quantity.toFixed(3)," ").concat(i.product_unit)),"add"===t.type&&o.a.createElement("div",{className:"stock-list-item-type"},"Added"),"remove"===t.type&&o.a.createElement("div",{className:"stock-list-item-type"},"Removed"),"used"===t.type&&o.a.createElement("div",{className:"stock-list-item-type"},"Used ",o.a.createElement("span",{onClick:function(){return e.props.history.push("/branch/"+u+"/invoice/"+t.bill_ref)}},"(",t.bill_ref,")")),o.a.createElement("div",{className:"stock-list-item-added-by"},o.a.createElement("span",null,"By:")," ",t.added_by),o.a.createElement("div",{className:"stock-list-item-added-by"},o.a.createElement("span",null,"Date:")," ",Object(N.b)(t.added_date_time)))})))))},{menuItem:"Services Used (".concat(l&&l.length,")"),render:o.a.createElement("div",{style:{overflow:"hidden",padding:10}},o.a.createElement("div",{className:"Detail-View-Main-Content-Body"},l&&l.map((function(t){return o.a.createElement(Rn,{service:t,history:e.props.history,showSubStatDetail:!0,branchId:u})}))))},{menuItem:"Invoices (".concat(d&&d.length,")"),render:o.a.createElement("div",{className:"Detail-View-Main-Content-Body"},d&&d.map((function(t,a){return o.a.createElement(Pn,{invoice:t,history:e.props.history,key:a,branchId:u})})))}];return o.a.createElement("div",null,o.a.createElement("div",{className:"actual-content",id:"pageContent"},o.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},o.a.createElement(Qa,{type:"simple",style:"native",loading:n.getByIdLoading||n.addStockToProductLoading||n.postNewProductLoading||this.state.deleteLoading}),!n.getByIdLoading&&!n.addStockToProductLoading&&!n.postNewProductLoading&&!this.state.deleteLoading&&!i.deleted&&Object(N.a)(c,s.emp_id,"items","edit")&&o.a.createElement(rn.b,{size:"20px",style:{margin:10},className:"button-icon",onClick:function(){return e.props.modalToggle({modal:$t,view:!0})}}),!n.getByIdLoading&&!n.addStockToProductLoading&&!n.postNewProductLoading&&!this.state.deleteLoading&&!i.deleted&&Object(N.a)(c,s.emp_id,"items","delete")&&o.a.createElement(ea.b,{size:"20px",style:{margin:10},className:"button-icon",onClick:function(){return e.setState({showDeleteModal:!0})}})),o.a.createElement("div",{className:"Detail-View"},"product"===a.type&&i._id&&o.a.createElement("div",null,o.a.createElement("div",{className:"Detail-View-Main-Content"},o.a.createElement("div",{className:"Detail-View-Main-Content-Column1"},o.a.createElement("div",{className:"Detail-View-Main-Content-Name"},"PRODUCT / ",i.name," ",i.deleted&&o.a.createElement("span",null,"DELETED")),o.a.createElement("div",{className:"Detail-View-Main-Content-Id"},o.a.createElement("img",{className:"image",src:"https://img.icons8.com/material-outlined/96/000000/face-id.png"}),i._id)),o.a.createElement("div",{className:"Detail-View-Main-Content-Column2"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"Product Information:"),o.a.createElement("div",{className:"stat"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Branch"),o.a.createElement("div",{className:"information-val"},i.branch?i.branch.name:"NIL")),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Created On"),o.a.createElement("div",{className:"information-val"},Object(N.b)(i.added_date_time))),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Cost"),o.a.createElement("div",{className:"information-val"},i.product_cost)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Created by"),o.a.createElement("div",{className:"information-val"},i.added_by.full_name)))),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"Stock Information:"),o.a.createElement("div",{className:"stat no-border"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Available Stocks"),o.a.createElement("div",{className:"information-val"},i.available_stocks.toFixed(2)," ",i.product_unit)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Stock Action Count"),o.a.createElement("div",{className:"information-val"},i.stocks.length)))))),o.a.createElement("div",{style:{paddingTop:10}},o.a.createElement(Da,{panes:m,type:"default"}))))),r.productEditModal&&o.a.createElement(Qn,Object.assign({type:"edit-product"},this.props,{productsData:i})),this.state.showDeleteModal&&o.a.createElement(oa,{open:this.state.showDeleteModal,center:!1,onClose:function(){return e.setState({showDeleteModal:!1})},showCloseIcon:!1,size:"mini",header:o.a.createElement("div",null,"DELETE PRODUCT: ",o.a.createElement("span",null,i.name)),content:o.a.createElement("div",{style:{padding:10}},"Are you sure you want to delete this product?"),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Delete",onClick:Object(k.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSubmitDeleteProduct(i);case 2:case"end":return t.stop()}}),t)})))}),o.a.createElement(Aa,{name:"Close",onClick:function(){return e.setState({showDeleteModal:!1})}}))}))}}]),a}(i.Component),Xn=Object(E.a)({},et),Zn=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),Xn)($n)),er=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={showDeleteModal:!1,deleteLoading:!1},r.onSubmitDeleteService=r.onSubmitDeleteService.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.match.params.id;this.props.getById({type:"service",id:e})}},{key:"onSubmitDeleteService",value:function(){var e=Object(k.a)(C.a.mark((function e(t){var a,n,r,c,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({showDeleteModal:!1,deleteLoading:!0}),e.prev=1,a=this.props.appModuleData.toJS(),n=a.currentBranch,e.next=5,Pa({type:"DELETE",uri:"service/".concat(n._id,"/").concat(t._id)});case 5:r=e.sent,(c=r.body)&&"error"!==c.status?(s=this.props.match.params.id,this.props.getById({type:"service",id:s}),c.message&&this.props.addNotification({message:c.message,level:"success"})):c.data&&this.props.addNotification({message:c.data,level:"error"}),this.setState({deleteLoading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({deleteLoading:!1}),this.props.addNotification({message:e.t0.toString(),level:"error"});case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.detailData,n=t.modal,r=t.loading,c=t.myUserAccess,s=t.currentBranch,i=a.detail,l=a.invoicesAdded,d=this.props.match.params.branchId,u=[{menuItem:"Products Used (".concat(i.product_used&&i.product_used.length,")"),render:o.a.createElement("div",{style:{overflow:"hidden",padding:10}},o.a.createElement("div",{className:"Detail-View-Main-Content-Body"},i.product_used&&i.product_used.map((function(t,a){return o.a.createElement(Vn,{product:t,showAvgUsage:i.average_stock_usage.filter((function(e){return e._id===t._id}))[0]?i.average_stock_usage.filter((function(e){return e._id===t._id}))[0].quantity_used:"0",history:e.props.history,key:a,branchId:d})}))))},{menuItem:"Invoices (".concat(l&&l.length,")"),render:o.a.createElement("div",{className:"Detail-View-Main-Content-Body"},l&&l.map((function(t,a){return o.a.createElement(Pn,{invoice:t,history:e.props.history,key:a,branchId:d})})))}];return o.a.createElement("div",null,o.a.createElement("div",{className:"actual-content",id:"pageContent"},o.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},o.a.createElement(Qa,{type:"simple",style:"native",loading:r.getByIdLoading||r.updateServiceLoading}),!r.getByIdLoading&&!r.updateServiceLoading&&!this.state.deleteLoading&&!i.deleted&&Object(N.a)(s,c.emp_id,"items","edit")&&o.a.createElement(rn.b,{size:"20px",style:{margin:10},className:"button-icon",onClick:function(){return e.props.modalToggle({modal:Xt,view:!0})}}),!r.getByIdLoading&&!r.updateServiceLoading&&!this.state.deleteLoading&&!i.deleted&&Object(N.a)(s,c.emp_id,"items","delete")&&o.a.createElement(ea.b,{size:"20px",style:{margin:10},className:"button-icon",onClick:function(){return e.setState({showDeleteModal:!0})}})),o.a.createElement("div",{className:"Detail-View"},"service"===a.type&&i._id&&o.a.createElement("div",null,o.a.createElement("div",{className:"Detail-View-Main-Content"},o.a.createElement("div",{className:"Detail-View-Main-Content-Column1"},o.a.createElement("div",{className:"Detail-View-Main-Content-Name"},i.name," ",i.deleted&&o.a.createElement("span",null,"DELETED")),o.a.createElement("div",{className:"Detail-View-Main-Content-Id"},o.a.createElement("img",{className:"image",src:"https://img.icons8.com/material-outlined/96/000000/face-id.png"}),i._id)),o.a.createElement("div",{className:"Detail-View-Main-Content-Column2"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"Service Information:"),o.a.createElement("div",{className:"stat"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Branch"),o.a.createElement("div",{className:"information-val"},i.branch?i.branch.name:"NIL")),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Created On"),o.a.createElement("div",{className:"information-val"},Object(N.b)(i.added_date_time))),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Cost"),o.a.createElement("div",{className:"information-val"},i.service_cost)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Created by"),o.a.createElement("div",{className:"information-val"},i.added_by.full_name)))),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"Product Information:"),o.a.createElement("div",{className:"stat no-border"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"No of Products Used"),o.a.createElement("div",{className:"information-val"},i.product_used.length)))))),o.a.createElement("div",{style:{paddingTop:10}},o.a.createElement(Da,{panes:u,type:"default"}))))),n.serviceEditModal&&o.a.createElement(Qn,Object.assign({type:"edit-service"},this.props,{serviceData:i})),this.state.showDeleteModal&&o.a.createElement(oa,{open:this.state.showDeleteModal,center:!1,onClose:function(){return e.setState({showDeleteModal:!1})},showCloseIcon:!1,size:"mini",header:o.a.createElement("div",null,"DELETE Service: ",o.a.createElement("span",null,i.name)),content:o.a.createElement("div",{style:{padding:10}},"Are you sure you want to delete this service?"),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Delete",onClick:Object(k.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSubmitDeleteService(i);case 2:case"end":return t.stop()}}),t)})))}),o.a.createElement(Aa,{name:"Close",onClick:function(){return e.setState({showDeleteModal:!1})}}))}))}}]),a}(i.Component),tr=Object(E.a)({},et),ar=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),tr)(er)),nr=(a(73),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={activeTab:1},r}return Object(r.a)(a,[{key:"componentWillMount",value:function(){var e=new URLSearchParams(this.props.location.search);this.props.getAllBills(e.get("page")?e.get("page"):0)}},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.allBillData,n=t.updateHistoryFn,r=t.loading,c=t.myUserAccess,s=t.currentBranch,i=this.props.match.params.branchId;return o.a.createElement("div",{className:"actual-content"},Object(N.a)(s,c.emp_id,"bill","add")&&o.a.createElement("div",{style:{display:"flex",borderBottom:"1px solid #eaeaea"}},o.a.createElement(Zt.c,{size:"24px",style:{margin:10},className:"button-icon",alt:"Add Customer",onClick:function(){return e.props.history.push("/branch/".concat(i,"/new-invoice"))}})),a.invoices.map((function(t,a){return o.a.createElement(Pn,{invoice:t,history:n,key:a,branchId:e.props.match.params.branchId})})),0===a.invoices.length&&o.a.createElement("div",{style:{color:"#8c8c8c",padding:10},align:"center"},"Nothing to show"),o.a.createElement("div",{className:"float-right"},o.a.createElement(Dn,{loading:r.getBillLoading,currentPage:a.count.page,totalPages:a.count.totalPages,shownContent:a.invoices.length,totalContent:a.count.total,nextPage:function(t){return e.props.getAllBills(t)},prevPage:function(t){return e.props.getAllBills(t)},history:this.props.history,location:this.props.location})))}}]),a}(i.Component)),rr=Object(E.a)({},et),cr=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),rr)(nr)),sr=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={balancePaidModal:!1,completeBillLoading:!1,paidby:"",amountPaid:null,nowPaying:0},r.completeBill=r.completeBill.bind(Object(y.a)(r)),r.setCompState=r.setCompState.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.getById({type:"invoice",id:e})}},{key:"setCompState",value:function(e){this.setState(Object(E.a)({},e))}},{key:"completeBill",value:function(){var e=Object(k.a)(C.a.mark((function e(t,a){var n,r,c,s,i,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.getById,r=this.setCompState,c=this.props.appModuleData.toJS(),s=c.currentBranch,r({completeBillLoading:!0,balancePaidModal:!1}),e.prev=4,e.next=7,j({type:"PUT",uri:"invoice/".concat(s._id,"/").concat(t._id,"/").concat(a),obj:{balance_paid:this.state.nowPaying}});case 7:i=e.sent,(o=i.body)&&"error"!==o.status&&n({type:"invoice",id:t._id}),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(4);case 14:r({completeBillLoading:!1});case 15:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.detailData,n=t.myUserAccess,r=t.loading,c=t.currentBranch,s=a.detail,i=this.props.match.params.branchId,l=[{menuItem:"Products (".concat(s.products&&s.products.length,")"),render:o.a.createElement("div",{style:{overflow:"hidden",padding:10}},o.a.createElement("div",{className:"Detail-View-Main-Content-Body"},s.products&&s.products.map((function(t,a){return o.a.createElement(Vn,{key:a,product:t,history:e.props.history,isInvoiceView:!0,branchId:i})}))))},{menuItem:"Services (".concat(s.services&&s.services.length,")"),render:o.a.createElement("div",{style:{overflow:"hidden",padding:10}},o.a.createElement("div",{className:"Detail-View-Main-Content-Body"},s.services&&s.services.map((function(t,a){return o.a.createElement(Rn,{key:a,service:t,history:e.props.history,isInvoiceView:!0,showSubStatDetail:!0,branchId:i})}))))}];return o.a.createElement("div",{className:"actual-content"},o.a.createElement("div",{className:"page-header-add-btn"},o.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},o.a.createElement(Qa,{type:"simple",style:"native",loading:r.getByIdLoading||this.state.completeBillLoading}),!r.getByIdLoading&&!this.state.completeBillLoading&&Object(N.a)(c,n.emp_id,"bill","edit")&&"pending"===s.state&&o.a.createElement(Aa,{name:"Balance Paid",onClick:function(){return e.setState({balancePaidModal:!e.state.balancePaidModal,paidby:n.emp_id})}})),this.state.balancePaidModal&&o.a.createElement(oa,{open:!0,center:!1,onClose:function(){return e.setState({balancePaidModal:!1})},showCloseIcon:!1,size:"big",header:o.a.createElement("div",null,"INVOICE - ",s._id),content:o.a.createElement("div",null,o.a.createElement(Va,{type:"text",name:"Paid by",value:this.state.paidby,onValChange:function(t){return e.setState({paidby:t.value})}}),o.a.createElement(Va,{type:"text",name:"Total Invoice Amount",value:s.actual_bill_amount,disabled:!0,onValChange:function(e){}}),o.a.createElement(Va,{type:"text",name:"Balance Amount",value:s.actual_bill_amount-s.paid_amount,disabled:!0,onValChange:function(e){}}),o.a.createElement(Va,{type:"number",name:"Amount Paid",disabled:!0,value:s.paid_amount,onValChange:function(e){}}),o.a.createElement(Va,{type:"number",name:"Now paying",value:this.state.nowPaying,onValChange:function(t){return e.setState({nowPaying:t.value})}})),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Close",onClick:function(){return e.setState({balancePaidModal:!1})}}),o.a.createElement(Aa,{name:"Submit",onClick:function(){return e.completeBill(s,"paid")}}))})),o.a.createElement("div",{className:"Detail-View"},"invoice"===a.type&&s._id&&o.a.createElement("div",null,o.a.createElement("div",{className:"Detail-View-Main-Content"},o.a.createElement("div",{className:"Detail-View-Main-Content-Column1"},o.a.createElement("div",{className:"Detail-View-Main-Content-Name Detail-View-Main-Content-Name-underline",onClick:function(){return e.props.history.push("/branch/".concat(i,"/customer/").concat(s.customer._id?s.customer._id:s.customer))}},s.customer.full_name||s.customer," ",s.deleted&&o.a.createElement("span",null,"DELETED")),o.a.createElement("div",{className:"Detail-View-Main-Content-Id"},o.a.createElement("img",{className:"image",src:"https://img.icons8.com/material-outlined/96/000000/face-id.png"}),s._id)),o.a.createElement("div",{className:"Detail-View-Main-Content-Column2"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"Invoice Information:"),o.a.createElement("div",{className:"stat"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Branch"),o.a.createElement("div",{className:"information-val"},s.branch?s.branch.name:"NIL")),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Created On"),o.a.createElement("div",{className:"information-val"},Object(N.b)(s.added_date_time))),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Created by"),o.a.createElement("div",{className:"information-val"},s.added_by.full_name)))),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"Customer Information:"),o.a.createElement("div",{className:"stat"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Name"),o.a.createElement("div",{className:"information-val"},s.customer.full_name)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Mobile Number"),o.a.createElement("div",{className:"information-val"},s.customer.mobile_number)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Age"),o.a.createElement("div",{className:"information-val"},s.customer.age)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Address"),o.a.createElement("div",{className:"information-val"},s.customer.address)))),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"Payment Information:"),o.a.createElement("div",{className:"stat no-border"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Final Bill Amount"),o.a.createElement("div",{className:"information-val"},s.final_bill_amount)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Actual Bill Amount"),o.a.createElement("div",{className:"information-val"},s.actual_bill_amount)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Discount Amount"),o.a.createElement("div",{className:"information-val"},s.discount_amount)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Paid Amount"),o.a.createElement("div",{className:"information-val"},s.paid_amount)),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Balance Amount"),o.a.createElement("div",{className:"information-val"},s.final_bill_amount-s.paid_amount)))))),o.a.createElement("div",{style:{paddingTop:10}},o.a.createElement(Da,{panes:l,type:"default"})))))}}]),a}(i.Component),ir=Object(E.a)({},et),or=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),ir)(sr)),lr=a(176),dr=a(177),ur=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={branchData:{},customerData:{},customerQueryList:[],items:[],discountAmount:0,srcTag:{product:!0,service:!0},showAddRow:!0,editProductUsed:!1,editProductUsedIndex:null,createInvoice:!1,billedby:"",paidby:"",amountPaid:null},r.onLoadCustomers=r.onLoadCustomers.bind(Object(y.a)(r)),r.onLoadProductOrService=r.onLoadProductOrService.bind(Object(y.a)(r)),r.checkAllInputOkay=r.checkAllInputOkay.bind(Object(y.a)(r)),r.onRemoveItem=r.onRemoveItem.bind(Object(y.a)(r)),r.onClickSubmit=r.onClickSubmit.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.branchId,t=this.props.appModuleData.toJS().myUserAccess,a=t.access_branches.filter((function(t){return t._id===Number(e)})),n={};a.length>0&&(n.branchData={text:a[0].name.toUpperCase(),value:a[0]._id}),t&&t.full_name&&(n.billedby=t.full_name),this.setState(n)}},{key:"onLoadCustomers",value:function(){var e=Object(k.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return e.prev=1,e.next=4,Pa({type:"GET",uri:"customers?full_name=".concat(t)});case 4:return a=e.sent,n=a.body,e.abrupt("return",vr(n.customers));case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onLoadProductOrService",value:function(){var e=Object(k.a)(C.a.mark((function e(t){var a,n,r,c,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=16;break}return a=this.props.appModuleData.toJS(),n=a.currentBranch,e.prev=2,r=[],this.state.srcTag.product&&r.push("product=".concat(t)),this.state.srcTag.service&&r.push("service=".concat(t)),e.next=8,Pa({type:"GET",uri:"query/".concat(n._id,"?").concat(r.join("&"))});case 8:return c=e.sent,s=c.body,e.abrupt("return",gr(s));case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,this,[[2,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"checkAllInputOkay",value:function(){return 0===Object.keys(this.state.customerData).length||0===this.state.items.length}},{key:"onRemoveItem",value:function(e){var t=this.state.items;t.splice(e,1),this.setState({items:t})}},{key:"onClickSubmit",value:function(){var e=this.props.appModuleData.toJS().myUserAccess;if(this.state.paidby){this.props.updateHistoryFun(this.props.history);var t=this.state.items.filter((function(e){return"service"===e.type})).map((function(e){return Object(E.a)({},e.fullObj)})),a=this.state.items.filter((function(e){return"product"===e.type})).map((function(e){return Object(E.a)(Object(E.a)({},e.fullObj),{},{quantity_used:e.quantity_used.value})}));this.props.postNewBill({customer:this.state.customerData.fullObj,services:t,products:a,paid_amount:Number(this.state.amountPaid?this.state.amountPaid:0),discount_amount:Number(this.state.discountAmount),paid_by:this.state.paidby,billed_by:e.emp_id,branch_id:this.state.branchData.branch_id,totalBillAmount:hr(this.state,!0)})}}},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.myUserAccess,n=t.loading,r=this.props.match.params.branchId;return o.a.createElement("div",{className:"actual-content",id:"pageContent"},o.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},o.a.createElement(Aa,{name:"Create Invoice",disabled:this.checkAllInputOkay(),onClick:function(){return e.setState({createInvoice:!e.state.createInvoice})}})),o.a.createElement("div",{className:"invoice-detail"},o.a.createElement("div",{className:"invoice-detail-customer"},o.a.createElement("div",{className:"content-invoice-customer-grid"},o.a.createElement("div",{className:"content-invoice-customer-label"},"Bill From"),o.a.createElement("div",{className:"content-invoice-customer-content"},o.a.createElement(Ua.a,{axis:"y",closeMenuOnSelect:!0,value:this.state.branchData,onChange:function(t){return e.setState({branchData:t})},options:br(a.access_branches),getOptionLabel:function(e){return e.text?e.text:e.value},getOptionValue:function(e){return e.value},isDisabled:!0}))),o.a.createElement("div",{className:"content-invoice-customer-grid"},o.a.createElement("div",{className:"content-invoice-customer-label"},"Bill To"),o.a.createElement("div",{className:"content-invoice-customer-content"},o.a.createElement("div",null,o.a.createElement(Ba.a,{closeMenuOnSelect:!0,defaultOptions:!0,loadOptions:function(){var t=Object(k.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.onLoadCustomers(a));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),value:this.state.customerData,onChange:function(t){return e.setState({customerData:t,paidby:t.text})},getOptionLabel:function(e){return e.text?e.text:e.value},getOptionValue:function(e){return e.value}}))))),o.a.createElement("div",{className:"invoice-detail-date"},o.a.createElement("div",{className:"content-invoice-customer-split content-invoice-customer-label"},"Date"),o.a.createElement("div",{className:"content-invoice-customer-split"},o.a.createElement("div",{className:"content-invoice-customer-content-text content-invoice-customer-content-text-box"},Object(N.b)(new Date))))),o.a.createElement("div",{className:"content-invoice-total"},o.a.createElement("div",null,o.a.createElement("div",{className:"total-name"},"Total"),o.a.createElement("div",{className:"amount"},"Rs: ",hr(this.state,!0))),o.a.createElement("div",null,o.a.createElement("div",{className:"total-name"},"Discount"),o.a.createElement("div",{className:"amount"}," - Rs: ",Number(this.state.discountAmount).toFixed(2)),o.a.createElement("div",{style:{paddingTop:10,paddingBottom:10}},o.a.createElement(nn,{header:"Add Discount"},o.a.createElement(Va,{type:"number",name:"Discount Amount",value:this.state.discountAmount,onValChange:function(t){return e.setState({discountAmount:t.value})}})))),o.a.createElement("div",{className:"border-top"},o.a.createElement("div",{className:"total-name"},"Bill Amount"),o.a.createElement("div",{className:"amount"},"Rs: ",hr(this.state)))),this.state.showAddRow&&o.a.createElement("div",{className:"content-invoice-search-box"},o.a.createElement("div",{className:"invoice-src-type invoice-src-type-drop"},o.a.createElement(Ba.a,{closeMenuOnSelect:!0,defaultOptions:!0,loadOptions:function(){var t=Object(k.a)(C.a.mark((function t(a){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.onLoadProductOrService(a));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),value:{},onChange:function(t){var a=e.state.items;t.quantity_used={key:1,value:1},a.push(t),e.setState({items:a})},menuPlacement:"top",menuContainerStyle:{top:"auto",bottom:"100%"},placeholder:"Search Product/Service...",getOptionLabel:function(e){return e.text?e.text:e.value},getOptionValue:function(e){return e.value}})),o.a.createElement("div",{style:{paddingTop:10}},o.a.createElement("span",{className:"invoice-src-type-checkbox"},o.a.createElement(Er,{checked:this.state.srcTag.product,onChange:function(){return e.setState({srcTag:Object(E.a)(Object(E.a)({},e.state.srcTag),{},{product:!e.state.srcTag.product})})}}),"Product"),o.a.createElement("span",{className:"invoice-src-type-checkbox"},o.a.createElement(Er,{checked:this.state.srcTag.service,onChange:function(){return e.setState({srcTag:Object(E.a)(Object(E.a)({},e.state.srcTag),{},{service:!e.state.srcTag.service})})}}),"Service"))),o.a.createElement("div",{style:{marginBottom:40}},o.a.createElement("div",{className:"content-invoice-items"},o.a.createElement("div",{className:"content-invoice-item content-invoice-item-header"},o.a.createElement("div",{className:"ci-item-name justify-center"},"Name"),o.a.createElement("div",{className:"ci-item-quantity justify-center"},"Quantity"),o.a.createElement("div",{className:"ci-item-price justify-center"},"Price (Rs)"),o.a.createElement("div",{className:"ci-item-unit justify-center"},"Unit"),o.a.createElement("div",{className:"ci-item-total justify-center"},"Total")),this.state.items.map((function(t,a){return o.a.createElement("div",{className:"content-invoice-item",key:a},o.a.createElement("div",{className:"ci-item-name"},o.a.createElement("div",{onClick:function(){return e.props.history.push("/branch/".concat(r,"/").concat(t.type,"/").concat(t.key))}},o.a.createElement("span",null,t.heading))),o.a.createElement("div",{className:"ci-item-quantity"},"product"===t.type&&o.a.createElement(Ua.a,{menuPlacement:"top",closeMenuOnSelect:!0,value:t.quantity_used,onChange:function(t){var n=e.state.items;n[a].quantity_used=t,e.setState({items:n})},options:fr(15),getOptionLabel:function(e){return e.text?e.text:e.value},getOptionValue:function(e){return e.value}}),"service"===t.type&&o.a.createElement(nn,{header:t.fullObj.product_used.map((function(e,a){var n=t.fullObj.average_stock_usage.filter((function(t){return t._id===e._id}));return"".concat(n[0]?n[0].quantity_used:0," ").concat(e.product_unit," of ").concat(e.name)})).join(", "),action:o.a.createElement("span",{className:"content-invoice-table-avg-product-used-action",style:{float:"right"},onClick:function(){return e.setState({editProductUsed:!0,editProductUsedIndex:a})}},o.a.createElement(lr.a,{size:"small"})),expandAtStart:!1},t.fullObj.product_used.map((function(e,a){var n=t.fullObj.average_stock_usage.filter((function(t){return t._id===e._id}));return o.a.createElement("div",{key:a,className:"content-invoice-table-avg-product-used",align:"center"},"".concat(n[0]?n[0].quantity_used:0," ").concat(e.product_unit),o.a.createElement("span",{style:{fontSize:10}}," of "),o.a.createElement("span",{style:{fontWeight:"bold",fontStyle:"italic"}},"".concat(e.name)))})))),o.a.createElement("div",{className:"ci-item-price"},"product"===t.type&&t.fullObj.product_cost.toFixed(2),"service"===t.type&&t.fullObj.service_cost.toFixed(2)),o.a.createElement("div",{className:"ci-item-unit"},"product"===t.type&&t.fullObj.product_unit,"service"===t.type&&"nil"),o.a.createElement("div",{className:"ci-item-total"},"Rs:",o.a.createElement("span",{className:"item-amount"},"product"===t.type&&(Number(t.quantity_used.key)*t.fullObj.product_cost).toFixed(2),"service"===t.type&&(Number(t.quantity_used.key)*t.fullObj.service_cost).toFixed(2))),o.a.createElement("div",{className:"ci-item-cancel"},o.a.createElement(dr.a,{onClick:function(){return e.onRemoveItem(a)}})))})))),this.state.editProductUsed&&o.a.createElement(oa,{open:!0,center:!1,onClose:function(){return e.setState({editProductUsed:!1})},showCloseIcon:!1,size:"big",header:o.a.createElement("div",null,"Edit Product used quantity - ",null!==this.state.editProductUsedIndex&&this.state.items[this.state.editProductUsedIndex]&&this.state.items[this.state.editProductUsedIndex].fullObj&&this.state.items[this.state.editProductUsedIndex].fullObj.name),content:o.a.createElement("div",null,null!==this.state.editProductUsedIndex&&this.state.items[this.state.editProductUsedIndex]&&this.state.items[this.state.editProductUsedIndex].fullObj&&this.state.items[this.state.editProductUsedIndex].fullObj.product_used.length>0&&o.a.createElement("div",{className:"product-avg-usage-box"},this.state.items[this.state.editProductUsedIndex].fullObj.product_used.map((function(t,a){var n=e.state.items[e.state.editProductUsedIndex].fullObj.average_stock_usage.filter((function(e){return e._id===t._id}));return o.a.createElement("div",{key:a},o.a.createElement(Va,{type:"number",name:"Average quantity of ".concat(t.name," used in ").concat(t.product_unit," (").concat(t.available_stocks," ").concat(t.product_unit," available)"),value:n[0]?n[0].quantity_used:0,onValChange:function(a){var n=e.state.items;n[e.state.editProductUsedIndex].fullObj.average_stock_usage=e.state.items[e.state.editProductUsedIndex].fullObj.average_stock_usage.map((function(e){return t._id===e._id&&Number(a.value)<=t.available_stocks&&(e.quantity_used=Number(a.value)),e})),e.setState({items:n})}}))})))),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Close",onClick:function(){return e.setState({editProductUsed:!1})}}))}),this.state.createInvoice&&o.a.createElement(oa,{open:!0,center:!1,onClose:function(){return e.setState({editProductUsed:!1})},showCloseIcon:!1,size:"big",header:o.a.createElement("div",null,"INVOICE - ",this.state.customerData.text),content:o.a.createElement("div",null,o.a.createElement(Va,{type:"text",name:"Paid by",disabled:!0,value:this.state.paidby,onValChange:function(t){return e.setState({paidby:t.value})}}),o.a.createElement(Va,{type:"text",name:"Total Invoice Amount",value:hr(this.state),disabled:!0,onValChange:function(e){}}),o.a.createElement(Va,{type:"number",name:"Amount Paid",value:this.state.amountPaid,onValChange:function(t){return e.setState({amountPaid:t.value})}}),o.a.createElement(Qa,{loading:n.postNewBillLoading})),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Close",onClick:function(){return e.setState({createInvoice:!1})}}),o.a.createElement(Aa,{name:"Submit",disabled:!this.state.amountPaid,onClick:function(){return e.onClickSubmit()}}))}))}}]),a}(i.Component),mr=Object(E.a)({},et),pr=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),mr)(ur)),hr=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=0;return e.items.forEach((function(e){"product"===e.type?a+=e.quantity_used.value*e.fullObj.product_cost:"service"===e.type&&(a+=e.quantity_used.value*e.fullObj.service_cost)})),(t?a:a-e.discountAmount).toFixed(2)},vr=function(e){var t=[];return e.filter((function(e){return!e.deleted})).forEach((function(e){t.push({key:e._id,value:e._id,text:"".concat(e.full_name," (").concat(e.mobile_number,")"),fullObj:e})})),t},br=function(e){return e.filter((function(e){return!e.deleted})).map((function(e){return{text:e.name.toUpperCase(),value:e._id}}))},gr=function(e){var t=[];return e.products.filter((function(e){return!e.deleted})).forEach((function(e){t.push({key:e._id,value:e._id,text:o.a.createElement("span",null,o.a.createElement("span",{className:"typeLabel"},"Product"),o.a.createElement("span",null,"".concat(e.name)),o.a.createElement("span",{style:{float:"right",fontWeight:"bold"}},"  Rs: ".concat(e.product_cost)),o.a.createElement("span",{style:{float:"right",paddingRight:10}},"Stocks Available: ".concat(e.available_stocks,"  "))),heading:o.a.createElement("span",null,o.a.createElement("span",{className:"typeLabel"},"Product"),o.a.createElement("span",{className:"Detail-View-Main-Content-Name-underline"},"".concat(e.name))),type:"product",fullObj:e})})),e.services.filter((function(e){return!e.deleted})).forEach((function(e){t.push({key:e._id,value:e._id,text:o.a.createElement("span",null,o.a.createElement("span",{className:"typeLabel"},"Service"),o.a.createElement("span",null,"".concat(e.name)),o.a.createElement("span",{style:{float:"right"}},"Rs: ".concat(e.service_cost))),heading:o.a.createElement("span",null,o.a.createElement("span",{className:"typeLabel"},"Service"),o.a.createElement("span",{className:"Detail-View-Main-Content-Name-underline"},"".concat(e.name))),type:"service",fullObj:e})})),t},fr=function(e){for(var t=[],a=1;a<=e;a++)t.push({key:a,text:a,value:a});return t},Er=function(e){return o.a.createElement("input",Object.assign({type:"checkbox"},e))},yr=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={addCustomerData:{name:"",email:"",address:"",age:null,mobileNo:null,branch_id:null,gender:On[1]},addCustomerLoading:!1,isSuccessIndicator:!1},r.onSubmitAddCustomer=r.onSubmitAddCustomer.bind(Object(y.a)(r)),r.isAllInputOkay=r.isAllInputOkay.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"onSubmitAddCustomer",value:function(){var e=Object(k.a)(C.a.mark((function e(t){var a,n,r,c,s,i,o,l=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.appModuleData.toJS(),n=a.allCustomerData,r=a.currentBranch,c=this.props.match.params.branchId,this.setState({addCustomerLoading:!0,isSuccessIndicator:!1,message:{}}),s={name:t.full_name,email:t.email,gender:t.gender.value,address:t.address,age:Number(t.age),mobileNo:Number(t.mobile_number),branch_id:Number(c)},e.prev=4,e.next=7,Pa({type:"POST",uri:"customer/"+r._id,obj:s});case 7:i=e.sent,o=i.body,this.setState({addCustomerLoading:!1,isSuccessIndicator:!0,message:{type:"success",text:o.message}}),this.props.modalToggle({modal:"customerAddModal",view:!1}),this.props.getAllCustomer(n.count.page),setTimeout(Object(k.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.setState({isSuccessIndicator:!1,successMessage:""});case 1:case"end":return e.stop()}}),e)}))),4e3),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),this.setState({addCustomerLoading:!1,isSuccessIndicator:!0,message:{type:"error",text:e.t0.toString()}});case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isAllInputOkay",value:function(){var e=this.state.addCustomerData;return!e.full_name||e.mobile_number&&!e.mobile_number.toString()||!e.gender||e.age&&!e.age.toString()||e.mobile_number&&10!==e.mobile_number.length}},{key:"render",value:function(){var e=this;return o.a.createElement(oa,{open:!0,center:!1,onClose:function(){e.setState({addCustomerLoading:!1,isSuccessIndicator:!1,message:{},addCustomerData:{gender:On[1]}}),e.props.modalToggle({modal:"customerAddModal",view:!1})},showCloseIcon:!1,size:"big",header:o.a.createElement("div",null,"ADD CUSTOMER"),content:o.a.createElement("div",null,this.state.isSuccessIndicator&&o.a.createElement("div",{className:"success"===this.state.message.type?"customer-li-success-msg":"customer-li-error-msg"},this.state.message.text),o.a.createElement(Va,{name:"Name",value:this.state.addCustomerData.full_name,required:!0,onValChange:function(t){e.setState({addCustomerData:Object(E.a)(Object(E.a)({},e.state.addCustomerData),{},{full_name:t.value})})}}),o.a.createElement(Va,{name:"Mobile Number",value:this.state.addCustomerData.mobile_number,type:"mobile_number",maxLength:"10",required:!0,onValChange:function(t){e.setState({addCustomerData:Object(E.a)(Object(E.a)({},e.state.addCustomerData),{},{mobile_number:t.value})})}}),o.a.createElement(Va,{name:"Home Address",value:this.state.addCustomerData.address,type:"textarea",onValChange:function(t){e.setState({addCustomerData:Object(E.a)(Object(E.a)({},e.state.addCustomerData),{},{address:t.value})})}}),o.a.createElement(Va,{name:"Email",value:this.state.addCustomerData.email,onValChange:function(t){e.setState({addCustomerData:Object(E.a)(Object(E.a)({},e.state.addCustomerData),{},{email:t.value})})}}),o.a.createElement(Va,{name:"Age",value:this.state.addCustomerData.age,type:"number",maxLength:"2",required:!0,onValChange:function(t){e.setState({addCustomerData:Object(E.a)(Object(E.a)({},e.state.addCustomerData),{},{age:t.value})})}}),o.a.createElement(Va,{name:"Gender",value:this.state.addCustomerData.gender,type:"select",required:!0,options:On,onValChange:function(t){e.setState({addCustomerData:Object(E.a)(Object(E.a)({},e.state.addCustomerData),{},{gender:t})})}}),o.a.createElement(Qa,{loading:this.state.addCustomerLoading})),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Submit",disabled:this.isAllInputOkay(),onClick:Object(k.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSubmitAddCustomer(e.state.addCustomerData);case 2:case"end":return t.stop()}}),t)})))}),o.a.createElement(Aa,{name:"Close",onClick:function(){e.setState({addCustomerLoading:!1,isSuccessIndicator:!1,message:{},addCustomerData:{gender:On[1]}}),e.props.modalToggle({modal:"customerAddModal",view:!1})}}))})}}]),a}(i.Component),Or=Object(E.a)({},et),Cr=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),Or)(yr)),kr=(a(165),function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={showDetailModal:!1,showEditModal:!1,editCustomerData:{},editLoading:!1,showDeleteModal:!1,deleteCustomerData:{},isSuccessIndicator:!1,message:{type:"",text:""}},r.isAllInputOkay=r.isAllInputOkay.bind(Object(y.a)(r)),r.onSubmitEditCustomer=r.onSubmitEditCustomer.bind(Object(y.a)(r)),r.onSubmitDeleteCustomer=r.onSubmitDeleteCustomer.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"onSubmitEditCustomer",value:function(){var e=Object(k.a)(C.a.mark((function e(t){var a,n,r,c=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({showEditModal:!1,editLoading:!0}),a={name:t.full_name,email:t.email,gender:t.gender.value,address:t.address,age:t.age,mobileNo:t.mobile_number},e.prev=2,e.next=5,Pa({type:"PUT",uri:"customer/"+t._id,obj:a});case 5:n=e.sent,r=n.body,this.setState({editLoading:!1,isSuccessIndicator:!0,message:{type:"success",text:r.message}}),this.props.getAllCustomer(this.props.page),setTimeout(Object(k.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.setState({isSuccessIndicator:!1,successMessage:""});case 1:case"end":return e.stop()}}),e)}))),4e3),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),this.setState({editLoading:!1,isSuccessIndicator:!0,message:{type:"error",text:e.t0.toString()}});case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onSubmitDeleteCustomer",value:function(){var e=Object(k.a)(C.a.mark((function e(t){var a,n,r=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({showDeleteModal:!1,editLoading:!0}),e.prev=1,e.next=4,Pa({type:"DELETE",uri:"customer/"+t._id});case 4:a=e.sent,n=a.body,this.setState({editLoading:!1,isSuccessIndicator:!0,message:{type:"success",text:n.message}}),this.props.getAllCustomer(this.props.page),setTimeout(Object(k.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({isSuccessIndicator:!1,successMessage:""});case 1:case"end":return e.stop()}}),e)}))),4e3),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({editLoading:!1,isSuccessIndicator:!0,message:{type:"error",text:e.t0.toString()}});case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isAllInputOkay",value:function(){var e=this.state.editCustomerData;return!e.full_name||!e.mobile_number||!e.gender||!e.age}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.type,r=t.onClickAction,c=[];return a.deleted||("branch"===n?c.push({icon:"view-detail",value:"view-detail"},{icon:"edit permission",value:"edit permission"},{icon:"remove from branch",value:"remove from branch"}):c.push({icon:"view-detail",value:"view-detail"},{icon:"edit",value:"edit"},{icon:"delete",value:"delete"})),o.a.createElement("div",{className:"grid-main"},o.a.createElement("div",null,o.a.createElement("div",{className:"grid-split grid-name"},a.full_name),o.a.createElement("div",{className:"grid-split",style:{float:"right"}},o.a.createElement(ua,{list:c,onSelectOption:function(t){"view-detail"===t?e.setState({showDetailModal:!0}):r&&r(t,a)}}))),o.a.createElement("div",{className:"grid-padding"},a.mobile_number&&o.a.createElement("div",{className:"grid-split"},o.a.createElement("img",{style:{width:15},src:"https://img.icons8.com/carbon-copy/100/000000/phone.png"}),o.a.createElement("div",{className:"grid-split"},a.mobile_number))),o.a.createElement("div",null,a._id&&o.a.createElement("div",{className:"grid-split grid-label"},a._id),a.added_date_time&&o.a.createElement("div",{className:"grid-split grid-label"},Object(N.b)(a.added_date_time)),a.deleted&&o.a.createElement("div",{className:"grid-split grid-deleted"},"Deleted")),o.a.createElement(oa,{open:this.state.showDetailModal,center:!1,onClose:function(){return e.setState({showDetailModal:!1})},showCloseIcon:!1,size:"big",header:o.a.createElement("div",null,"Employee Detail - ",a.full_name),content:o.a.createElement("div",{style:{padding:10}},o.a.createElement("div",{className:"Detail-View"},o.a.createElement("div",{className:"Detail-View-Main-Content"},o.a.createElement("div",{className:"Detail-View-Main-Content-Column1"},o.a.createElement("div",{className:"Detail-View-Main-Content-Name"},a.full_name),o.a.createElement("div",{className:"Detail-View-Main-Content-Id"},o.a.createElement("img",{className:"image",src:"https://img.icons8.com/material-outlined/96/000000/face-id.png"}),a._id)),o.a.createElement("div",{className:"Detail-View-Main-Content-Column2"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"User Information:"),o.a.createElement("div",{className:"stat no-border"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Created On"),o.a.createElement("div",{className:"information-val"},Object(N.b)(a.added_date_time))),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Mobile Number"),o.a.createElement("div",{className:"information-val"},a.mobile_number)),a.added_by&&o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Created by"),o.a.createElement("div",{className:"information-val"},a.added_by))))))),"branch"===n&&o.a.createElement("div",{className:"employee-permission"},o.a.createElement("div",{className:"employee-permission-header-name"}," User Permissions"),o.a.createElement("div",{className:"employee-permission-box"},a.perm&&o.a.createElement("table",{className:"content-header-table"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{className:"content-header-name"},"Invoice"),o.a.createElement("td",{className:"content-header-name"},"Customer"),o.a.createElement("td",{className:"content-header-name"},"Items")),o.a.createElement("tr",null,o.a.createElement("td",{className:"content-header-name"},o.a.createElement(La.a,{disabled:!0,checked:a.perm.bill.add})," Add",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.bill.view})," View",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.bill.edit})," Edit",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.bill.delete})," Delete",o.a.createElement("br",null)),o.a.createElement("td",{className:"content-header-name"},o.a.createElement(La.a,{disabled:!0,checked:a.perm.customer.add})," Add ",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.customer.view})," View ",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.customer.edit})," Edit ",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.customer.delete})," Delete ",o.a.createElement("br",null)),o.a.createElement("td",{className:"content-header-name"},o.a.createElement(La.a,{disabled:!0,checked:a.perm.items.add})," Add ",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.items.view})," View ",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.items.edit})," Edit ",o.a.createElement("br",null),o.a.createElement(La.a,{disabled:!0,checked:a.perm.items.delete})," Delete ",o.a.createElement("br",null)))))))),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Close",onClick:function(){return e.setState({showDetailModal:!1})}}))}))}}]),a}(i.Component)),Nr=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={deleteBranchModal:!1,whichBranch:{},updatePermissionModal:!1,updatePermissionData:{},updateData:{},removeUserModal:!1,settingsLoading:!1,showDeleteModal:!1},r.onClickAction=r.onClickAction.bind(Object(y.a)(r)),r.isAllInputOkay=r.isAllInputOkay.bind(Object(y.a)(r)),r.onChangePermission=r.onChangePermission.bind(Object(y.a)(r)),r.closeModal=r.closeModal.bind(Object(y.a)(r)),r.onClickUpdatePermission=r.onClickUpdatePermission.bind(Object(y.a)(r)),r.onClickRemoveUser=r.onClickRemoveUser.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.match.params.branchId;this.props.getById({type:"branch",branchId:e})}},{key:"onClickAction",value:function(e,t){"edit permission"===e?this.setState({updatePermissionModal:!0,updatePermissionData:t.perm,updateData:t}):"remove from branch"===e&&this.setState({removeUserModal:!0,updateData:t})}},{key:"isAllInputOkay",value:function(){this.state.updatePermissionData;return!1}},{key:"onChangePermission",value:function(e,t,a){var n=this.state.updatePermissionData;n[e][t]=a,this.setState({updatePermissionData:n})}},{key:"closeModal",value:function(){this.setState({updatePermissionData:{},updatePermissionModal:!1,updateData:{},removeUserModal:!1})}},{key:"onClickUpdatePermission",value:function(){var e=Object(k.a)(C.a.mark((function e(){var t,a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.appModuleData.toJS(),a=t.currentBranch,this.setState({settingsLoading:!0}),e.prev=2,e.next=5,Pa({type:"PUT",uri:"branch/".concat(a._id,"/").concat(this.state.updateData._id),obj:{perm:this.state.updatePermissionData}});case 5:n=e.sent,r=n.body,this.closeModal(),this.props.addNotification({message:r.message,level:"success"}),window.location.reload(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),this.props.addNotification({message:e.t0.toString(),level:"error"});case 15:this.setState({settingsLoading:!1});case 16:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"onClickRemoveUser",value:function(){var e=Object(k.a)(C.a.mark((function e(){var t,a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.appModuleData.toJS(),a=t.currentBranch,this.setState({settingsLoading:!0}),e.prev=2,e.next=5,Pa({type:"DELETE",uri:"branch/".concat(a._id,"/").concat(this.state.updateData._id)});case 5:n=e.sent,r=n.body,this.props.getById({type:"branch",branchId:a._id}),this.closeModal(),this.props.addNotification({message:r.message,level:"success"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),this.props.addNotification({message:e.t0.toString(),level:"error"});case 15:this.setState({settingsLoading:!1});case 16:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"onSubmitDeleteBranch",value:function(){var e=Object(k.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({showDeleteModal:!1,settingsLoading:!0}),e.prev=1,e.next=4,Pa({type:"DELETE",uri:"branch/".concat(t._id)});case 4:a=e.sent,(n=a.body)&&"error"!==n.status?(this.props.match.params.id,n.message&&this.props.addNotification({message:n.message,level:"success"}),window.location.href="/"):n.data&&this.props.addNotification({message:n.data,level:"error"}),this.setState({settingsLoading:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),this.setState({settingsLoading:!1}),this.props.addNotification({message:e.t0.toString(),level:"error"});case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.detailData,n=t.modal,r=t.loading,c=t.myUserAccess,s=a.detail,i=this.state,l=i.updatePermissionData,d=i.updateData,u=[{menuItem:"Employees",menuButton:o.a.createElement(Zt.a,null),menuButtonClick:function(){},render:o.a.createElement("div",{className:"grid-container"},s.employees&&s.employees.filter((function(e){return"employee"===e.employee_id.role})).map((function(t,a){return o.a.createElement(kr,Object.assign({key:a,user:Object(E.a)(Object(E.a)({},t.employee_id),{},{perm:t.perm}),type:"branch",onClickAction:e.onClickAction},e.props))})))},{menuItem:"Admins",menuButton:o.a.createElement(Zt.a,{size:"30px"}),menuButtonClick:function(){},render:o.a.createElement("div",{className:"grid-container"},s.employees&&s.employees.filter((function(e){return"admin"===e.employee_id.role})).map((function(t,a){return o.a.createElement(kr,Object.assign({key:a,user:Object(E.a)(Object(E.a)({},t.employee_id),{},{perm:t.perm}),type:"branch",onClickAction:e.onClickAction},e.props))})))}];return o.a.createElement("div",{className:"actual-content"},o.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},o.a.createElement(Qa,{type:"simple",style:"native",loading:this.state.settingsLoading||r.getByIdLoading}),"admin"===c.role&&!this.state.settingsLoading&&!r.getByIdLoading&&!s.deleted&&o.a.createElement(rn.b,{size:"20px",style:{margin:10},className:"button-icon",onClick:function(){return e.props.modalToggle({modal:"branchEditModal",view:!0})}}),"admin"===c.role&&!this.state.settingsLoading&&!r.getByIdLoading&&!s.deleted&&o.a.createElement(ea.b,{size:"20px",style:{margin:10},className:"button-icon",onClick:function(){return e.setState({showDeleteModal:!0})}})),o.a.createElement("div",{className:"Detail-View"},o.a.createElement("div",{className:"Detail-View-Main-Content"},o.a.createElement("div",{className:"Detail-View-Main-Content-Column1"},o.a.createElement("div",{className:"Detail-View-Main-Content-Name"},s.name),o.a.createElement("div",{className:"Detail-View-Main-Content-Id"},o.a.createElement("img",{className:"image",src:"https://img.icons8.com/material-outlined/96/000000/face-id.png"}),s._id)),o.a.createElement("div",{className:"Detail-View-Main-Content-Column2"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"Branch Information:"),o.a.createElement("div",{className:"stat"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Location"),o.a.createElement("div",{className:"information-val"},s.location?s.location:"NIL")),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Created On"),o.a.createElement("div",{className:"information-val"},Object(N.b)(s.added_date_time))),o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Mobile Number"),o.a.createElement("div",{className:"information-val"},s.mobile_number)),s.added_by&&o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"Created by"),o.a.createElement("div",{className:"information-val"},s.added_by&&s.added_by.full_name," (",s.added_by&&s.added_by._id,")")))),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"information"},"Employee Information:"),o.a.createElement("div",{className:"stat no-border"},o.a.createElement("div",{className:"Detail-View-Main-Content-split"},o.a.createElement("div",{className:"information-heading"},"No of employees"),o.a.createElement("div",{className:"information-val"},s.employees?s.employees.length:0)))))),o.a.createElement("div",{style:{paddingTop:10}},o.a.createElement(Da,{panes:u,type:"default"})),this.state.updatePermissionModal&&o.a.createElement(oa,{open:this.state.updatePermissionModal,center:!1,onClose:function(){return e.closeModal()},showCloseIcon:!1,size:"mini",header:o.a.createElement("div",null,"EDIT PERMISSION: ",o.a.createElement("span",{className:"Modal-Header-name"},this.state.updateData.full_name)),content:o.a.createElement("div",null,Object.keys(l).length>0&&o.a.createElement("div",{className:"employee-permission-box"},o.a.createElement("div",{className:"employee-permission-box"},o.a.createElement("table",{className:"content-header-table add-employee-permission-table"},o.a.createElement("tbody",null,o.a.createElement("tr",{className:"add-employee-permission-tr"},o.a.createElement("td",{className:"content-header-name"},"Invoice"),o.a.createElement("td",{className:"content-header-name"},"Customer"),o.a.createElement("td",{className:"content-header-name"},"Items")),o.a.createElement("tr",{className:"add-employee-permission-tr"},o.a.createElement("td",{className:"content-header-name"},o.a.createElement(La.a,{checked:l.bill.add,onChange:function(t){return e.onChangePermission("bill","add",t)}})," Add ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:l.bill.view,onChange:function(t){return e.onChangePermission("bill","view",t)}})," View ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:l.bill.edit,onChange:function(t){return e.onChangePermission("bill","edit",t)}})," Edit ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:l.bill.delete,onChange:function(t){return e.onChangePermission("bill","delete",t)}})," Delete ",o.a.createElement("br",null)),o.a.createElement("td",{className:"content-header-name"},o.a.createElement(La.a,{checked:l.customer.add,onChange:function(t){return e.onChangePermission("customer","add",t)}})," Add ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:l.customer.view,onChange:function(t){return e.onChangePermission("customer","view",t)}})," View ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:l.customer.edit,onChange:function(t){return e.onChangePermission("customer","edit",t)}})," Edit ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:l.customer.delete,onChange:function(t){return e.onChangePermission("customer","delete",t)}})," Delete ",o.a.createElement("br",null)),o.a.createElement("td",{className:"content-header-name"},o.a.createElement(La.a,{checked:l.items.add,onChange:function(t){return e.onChangePermission("items","add",t)}})," Add ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:l.items.view,onChange:function(t){return e.onChangePermission("items","view",t)}})," View ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:l.items.edit,onChange:function(t){return e.onChangePermission("items","edit",t)}})," Edit ",o.a.createElement("br",null),o.a.createElement(La.a,{checked:l.items.delete,onChange:function(t){return e.onChangePermission("items","delete",t)}})," Delete ",o.a.createElement("br",null))))))),o.a.createElement(Qa,{loading:this.state.settingsLoading})),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Update",disabled:this.isAllInputOkay()||this.state.settingsLoading,onClick:Object(k.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onClickUpdatePermission();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}),o.a.createElement(Aa,{disabled:this.state.settingsLoading,name:"Close",onClick:function(){return e.closeModal()}}))}),this.state.removeUserModal&&o.a.createElement(oa,{open:this.state.removeUserModal,center:!1,onClose:function(){return e.closeModal()},showCloseIcon:!1,size:"mini",header:o.a.createElement("div",null,"REMOVE EMPLOYEE FROM BRANCH:",o.a.createElement("span",null,d.full_name)),content:o.a.createElement("div",{style:{padding:10}},"Remove employee from branch will revoke permission for user to do any further action in branch.",o.a.createElement(Qa,{loading:this.state.settingsLoading})),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Remove from branch",disabled:this.state.settingsLoading,onClick:Object(k.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.onClickRemoveUser());case 1:case"end":return t.stop()}}),t)})))}),o.a.createElement(Aa,{name:"Close",disabled:this.state.settingsLoading,onClick:function(){return e.closeModal()}}))}),n.branchEditModal&&o.a.createElement(mn,{type:"edit-branch",branchData:s}),this.state.showDeleteModal&&o.a.createElement(oa,{open:this.state.showDeleteModal,center:!1,onClose:function(){return e.setState({showDeleteModal:!1})},showCloseIcon:!1,size:"mini",header:o.a.createElement("div",null,"DELETE BRANCH: ",o.a.createElement("span",null,s.name)),content:o.a.createElement("div",{style:{padding:10}},"Are you sure you want to delete this branch? Once the branch is deleted, you cannot revert, add or make any changes to the branch propertoes.",o.a.createElement(Qa,{loading:this.state.settingsLoading})),footer:o.a.createElement("div",null,o.a.createElement(Aa,{name:"Delete",onClick:Object(k.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSubmitDeleteBranch(s);case 2:case"end":return t.stop()}}),t)})))}),o.a.createElement(Aa,{name:"Close",onClick:function(){return e.setState({showDeleteModal:!1})}}))})))}}]),a}(i.Component),Sr=Object(E.a)({},et),jr=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),Sr)(Nr)),wr=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"componentWillMount",value:function(){Object(N.e)("activeBranch",this.props.match.params.branchId);var e=this.props.appModuleData.toJS().myUserAccess,t=this.props.match.params.branchId,a=e.access_branches.filter((function(e){return e._id===Number(t)}));a&&a.length>0&&this.props.setCurrentBranch(a[0])}},{key:"componentDidUpdate",value:function(e,t,a){var n=e.match.params.branchId,r=this.props.match.params.branchId;if(n!==r){var c=this.props.appModuleData.toJS().myUserAccess.access_branches.filter((function(e){return e._id===Number(r)}));c&&c.length>0&&this.props.setCurrentBranch(c[0])}}},{key:"render",value:function(){var e=this,t=this.props.appModuleData.toJS(),a=t.myUserAccess,n=t.currentBranch,r=t.modal,c=[],s=this.props.match.params.branchId,i=a.access_branches.filter((function(e){return e._id===Number(s)}));if(i&&i.length>0){var l=i[0].employees[0].perm;if(l.customer.view){var d={name:"Customers",id:"customers",link:"/branch/".concat(s,"/customers")};l.customer.add&&!n.deleted&&(d.addFunc=function(){return e.props.modalToggle({modal:"customerAddModal",view:!0})}),c.push(d)}if(l.items.view){var u={name:"Product/Service",id:"items",link:"/branch/".concat(s,"/items")};l.items.add&&!n.deleted&&(u.addFunc=function(){return e.props.modalToggle({modal:Kt,view:!0})}),c.push(u)}if(l.bill.view){var m={name:"Invoice",id:"Invoice",link:"/branch/".concat(s,"/invoices")};l.bill.add&&!n.deleted&&(m.addLink="/branch/".concat(s,"/new-invoice")),c.push(m)}"admin"===a.role&&c.push({name:"Settings",id:"Settings",link:"/branch/".concat(s,"/settings")});var h=[{link:"/dashboard",icon:o.a.createElement(ea.c,{size:"24px"})},{link:"/account",icon:o.a.createElement(ea.a,{size:"24px"})},{link:"/settings",icon:o.a.createElement(ea.d,{size:"24px"})},{link:"/logout",icon:o.a.createElement(Zt.e,{size:"24px"})}];return o.a.createElement(_a,{history:this.props.history,location:this.props.location,pageHeader:{appName:"Bill1ne",isBranch:!0,branchName:n.name,routeLinks:[],rightUserDetail:a,leftMenu:c,actions:h,changePasswordFn:function(){return e.props.history.push("/change-password")},checkAuth:this.props.checkAuth}},o.a.createElement(sa,{props:!0}),r.customerAddModal&&o.a.createElement(Cr,null),r.productAddModal&&o.a.createElement(Qn,{type:"add-product"}),r.serviceAddModal&&o.a.createElement(Qn,{type:"add-service"}),o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/branch/:branchId/customers",component:In}),o.a.createElement(p.a,{path:"/branch/:branchId/customer/:id",component:Bn}),o.a.createElement(p.a,{path:"/branch/:branchId/items",component:qn}),o.a.createElement(p.a,{path:"/branch/:branchId/product/:id",component:Zn}),o.a.createElement(p.a,{path:"/branch/:branchId/service/:id",component:ar}),o.a.createElement(p.a,{path:"/branch/:branchId/invoices",component:cr}),o.a.createElement(p.a,{path:"/branch/:branchId/invoice/:id/",component:or}),o.a.createElement(p.a,{path:"/branch/:branchId/new-invoice",component:pr}),"admin"===a.role&&o.a.createElement(p.a,{path:"/branch/:branchId/settings",component:jr})))}return o.a.createElement("div",{align:"center",style:{padding:20}},"You dont have access to this branch")}}]),a}(i.Component),_r=Object(E.a)({},et),xr=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),_r)(wr)),Dr=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loggedIn:!1,loading:!0,navOpenState:{isOpen:!0,width:304},modalVisible:!1,modalType:""},r.checkedLogin=r.checkedLogin.bind(Object(y.a)(r)),r}return Object(r.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=this.checkedLogin,a=this.props,n=a.updateUserAccessDetails,r=a.appModuleData,c=a.firstTimeBoot,s=a.updateHistoryFun;r.getIn(["myUserAccess","role"])?t(!0,!1):j({type:"GET",uri:"auth/verify"},!0,(function(a,i){var o=i.body;o&&"error"!==o.status?(n(o.response),r.get("firstTimeBoot")||c(!0),s(e.props.history),t(!0,!1),"/"!==window.location.pathname&&""!==window.location.pathname||e.props.history.push("/dashboard")):("/auth"!==window.location.pathname&&e.props.history.push("/auth"),t(!1))}))}},{key:"componentDidMount",value:function(){var e=this.props.checkAuth;setInterval((function(){e()}),12e4)}},{key:"checkedLogin",value:function(e,t){this.setState({loggedIn:e,loading:!!t||t})}},{key:"render",value:function(){return this.state.loggedIn?o.a.createElement("div",null,o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/branch/:branchId",component:xr}),o.a.createElement(p.a,{path:"/",component:xn}))):o.a.createElement("div",{align:"center",style:{padding:20}},"Loading...")}}]),a}(i.Component),Mr=Object(E.a)({},et),Lr=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),Mr)(Dr)),Ar=a(42),Ir=Object(Ar.c)({appModuleReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case"appModule/FIRST_TIME_BOOT":return e.merge({firstTimeBoot:n});case"appModule/UPDATE_USER_ACCESS_DETAILS":return e.merge({myUserAccess:n});case"appModule/COMMON_ERROR_MESSAGE":return e.merge({commonErrorMsg:n});case"appModule/LOGIN_LOADING":return e.merge({loginLoading:n});case Ue:return e.merge({credsDetail:n});case Be:return e.merge({error:n});case Fe:return e.merge({customerQueryPage:n||0});case"appModule/GET_ALL_CUSTOMER_SUCCESS":return e.merge({allCustomerData:{customers:Object(_.a)(n.customers),count:{total:n.count.total,page:n.count.page,totalPages:n.count.totalPages}}});case"appModule/POST_NEW_CUSTOMER":return e.merge({postNewCustomerData:n});case ze:return e.merge({putCustomerData:n});case"appModule/DELETE_A_CUSTOMER":return e.merge({deleteACustomerData:n});case qe:return e.merge({postNewBillData:n});case Je:case Xe:return e.merge({postNewProductData:n});case Ge:case Ze:return e.merge({postNewServiceData:n});case We:var r={detailData:{detail:{},invoicesAdded:[],servicesUsed:[],queryId:n.id,type:n.type}};return e.merge(r);case He:return e.merge({productQueryPage:n||0});case"appModule/GET_ALL_PRODUCT_SUCCESS":return e.merge({allProductsData:{products:Object(_.a)(n.products),count:{total:n.count.total,page:n.count.page,totalPages:n.count.totalPages}}});case"appModule/ADD_STOCK_TO_PRODUCT":return e.merge({addNewStockToProductData:n});case Ke:return e.merge({billQueryPage:n||0});case"appModule/GET_ALL_BILLS_SUCCESS":return e.merge({allBillData:{invoices:Object(_.a)(n.invoices),count:{total:n.count.total,page:n.count.page,totalPages:n.count.totalPages}}});case Qe:return e.merge({serviceQueryPage:n||0});case"appModule/GET_ALL_SERVICE_SUCCESS":return e.merge({allServiceData:{services:Object(_.a)(n.services),count:{total:n.count.total,page:n.count.page,totalPages:n.count.totalPages}}});case"appModule/GET_ALL_STOCK_SUCCESS":return e.merge({allStockData:n});case"appModule/GET_ALL_BRANCH_SUCCESS":return e.merge({allBranchData:n.branches});case"appModule/GET_ALL_EMPLOYEES_SUCCESS":return e.merge({allEmployeesData:n});case"appModule/EDIT_BRANCH":return e.merge({editBranchData:n});case Ye:return e.merge({deleteABranchData:n});case"appModule/UPDATE_HISTORY_FN":return e.merge({updateHistoryFn:n});case"appModule/LOADING_TOOGLE":return e.mergeDeep({loading:Object(w.a)({},n.key,n.value)});case"appModule/MODAL_TOGGLE":return e.mergeDeep({modal:Object(w.a)({},n.modal,n.view)});case Re:return e.merge(Object(E.a)({},n));case Ve:return e.merge({notification:{type:Ve,message:n.message,level:n.level}});case $e:return e.merge({takeSnapshotQuery:n});case"appModule/SET_CURRENT_BRANCH":return e.merge({currentBranch:n});default:return e}}});var Pr=C.a.mark(Tr);function Tr(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.a)([Object(L.c)(Wt)]);case 2:case"end":return e.stop()}}),Pr)}a(166);var Ur=function(e){Object(c.a)(i,e);var t=Object(s.a)(i);function i(e){var a;return Object(n.a)(this,i),(a=t.call(this,e)).state={empId:"",password:"","login-branch":"",loginLoading:!1,loginError:"",loginView:!0},a.setLoginState=a.setLoginState.bind(Object(y.a)(a)),a.doLogin=a.doLogin.bind(Object(y.a)(a)),a}return Object(r.a)(i,[{key:"setLoginState",value:function(e){this.setState(Object(E.a)({},e))}},{key:"componentWillMount",value:function(){var e=this;j({type:"GET",uri:"auth/verify"},!0,(function(t,a){var n=a.body;n&&"ok"===n.status&&"/auth"===window.location.pathname&&e.props.history.push("/dashboard")}))}},{key:"doLogin",value:function(e){var t=this,a=e.empId,n=e.password,r=this.props.addNotification;this.setLoginState({loginLoading:!0,loginError:""}),j({type:"POST",uri:"auth/login",obj:{"emp-id":Number(a),password:n}},!0,(function(e,a){var n=a.body;if(n&&"ok"===n.status)Object(N.e)("t",n.response.token),t.props.history.push("/dashboard"),t.setLoginState({loginLoading:!1});else{var c="Error while login";null!==n&&null!==n.data&&(c=c+" :"+n.data),r({message:c,level:"error"}),t.setLoginState({loginError:c,loginLoading:!1})}}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(sa,{props:!0}),o.a.createElement("div",{className:"auth-main"},o.a.createElement("div",{className:"auth-banner"},o.a.createElement("img",{src:a(167),className:"auth-banner-logo"}),o.a.createElement("p",{className:"auth-banner-app-name"},"Bill1ne"),o.a.createElement("div",{className:"input-main"},o.a.createElement("div",{className:"input-label"},"Emp Id"),o.a.createElement("div",{className:this.state.empId?"input-content":"input-content-error"},o.a.createElement("input",{className:this.state.empId?"input-content-box":"input-content-box input-content-box-error",style:{width:window.innerWidth<800?"100%":"90%"},value:this.state.empId,type:"number",onChange:function(t){return e.setState({empId:t.target.value})}}))),o.a.createElement("div",{className:"input-main"},o.a.createElement("div",{className:"input-label"},"Password"),o.a.createElement("div",{className:this.state.password?"input-content":"input-content-error"},o.a.createElement("input",{className:this.state.password?"input-content-box":"input-content-box input-content-box-error",style:{width:window.innerWidth<800?"100%":"90%"},value:this.state.password,type:"password",onChange:function(t){return e.setState({password:t.target.value})}}))),o.a.createElement("button",{className:"auth-button",type:"submit",disabled:!this.state.empId||!this.state.password||this.state.loginLoading,onClick:function(){return e.doLogin({empId:e.state.empId,password:e.state.password})}},"Login"))))}}]),i}(i.Component),Br=Object(E.a)({},et),Vr=Object(p.f)(Object(u.b)((function(e,t){return{appModuleData:e.appModuleReducer}}),Br)(Ur)),Rr=Object(v.a)(),Fr=Object(h.routerMiddleware)(Rr),zr=Object(b.a)(),qr=function(e,t,a){var n=Object(Ar.d)(Object(Ar.a)(e,t));return Object(Ar.e)(Ir,a,n)}(zr,Fr);zr.run(Tr);var Jr=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(u.a,{store:qr},o.a.createElement("div",null,o.a.createElement(m.a,null,o.a.createElement("div",null,o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/auth",component:Vr}),o.a.createElement(p.a,{path:"/",component:Lr}))))))}}]),a}(i.Component);d.a.render(o.a.createElement(Jr,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");g?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):f(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):f(e)}))}}()},47:function(e,t,a){},57:function(e,t,a){},73:function(e,t,a){},82:function(e,t,a){},90:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){}},[[109,1,2]]]);
//# sourceMappingURL=main.75ffadf7.chunk.js.map